!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.fidemdsl=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports.challengeRules=a("./lib/challenge-rules-parser"),b.exports.challengeRules.literals=a("./lib/challenge-rules").literals,b.exports.challengeAvailabilityRules=a("./lib/challenge-availability-rules-parser"),b.exports.challengeAvailabilityRules.literals=a("./lib/challenge-availability-rules").literals,b.exports.reactionActions=a("./lib/reaction-actions-parser"),b.exports.reactionActions.literals=a("./lib/reaction-actions").literals,b.exports.reactionTriggerConditions=a("./lib/reaction-trigger-conditions-parser"),b.exports.reactionTriggerConditions.literals=a("./lib/reaction-trigger-conditions").literals,b.exports.smartListMemberConditions=a("./lib/smartlist-member-conditions-parser"),b.exports.smartListMemberConditions.literals=a("./lib/smartlist-member-conditions").literals},{"./lib/challenge-availability-rules":3,"./lib/challenge-availability-rules-parser":2,"./lib/challenge-rules":5,"./lib/challenge-rules-parser":4,"./lib/reaction-actions":7,"./lib/reaction-actions-parser":6,"./lib/reaction-trigger-conditions":9,"./lib/reaction-trigger-conditions-parser":8,"./lib/smartlist-member-conditions":11,"./lib/smartlist-member-conditions-parser":10}],2:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return a.substring(bc,ac)}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return cc!==b&&(cc>b&&(cc=0,dc={line:1,column:1,seenCR:!1}),c(dc,cc,b),cc=b),dc}function e(a){ec>ac||(ac>ec&&(ec=ac,fc=[]),fc.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var a;return a=h()}function h(){var b,c,d,f,g,h,j,k;if(b=ac,c=i(),c!==z){for(d=[],f=ac,g=[],h=t();h!==z;)g.push(h),h=t();if(g!==z)if(a.substr(ac,3)===D?(h=D,ac+=3):(h=z,0===gc&&e(E)),h!==z){for(j=[],k=t();k!==z;)j.push(k),k=t();j!==z?(k=i(),k!==z?(g=[g,h,j,k],f=g):(ac=f,f=C)):(ac=f,f=C)}else ac=f,f=C;else ac=f,f=C;if(f!==z)for(;f!==z;){for(d.push(f),f=ac,g=[],h=t();h!==z;)g.push(h),h=t();if(g!==z)if(a.substr(ac,3)===D?(h=D,ac+=3):(h=z,0===gc&&e(E)),h!==z){for(j=[],k=t();k!==z;)j.push(k),k=t();j!==z?(k=i(),k!==z?(g=[g,h,j,k],f=g):(ac=f,f=C)):(ac=f,f=C)}else ac=f,f=C;else ac=f,f=C}else d=C;d!==z?(bc=b,c=F(c,d),b=c):(ac=b,b=C)}else ac=b,b=C;return b===z&&(b=ac,c=i(),c!==z&&(bc=b,c=G(c)),b=c),b}function i(){var b,c,d,f,g,h,i,j,k,r,s,v;if(b=ac,a.substr(ac,5)===H?(c=H,ac+=5):(c=z,0===gc&&e(I)),c!==z){for(d=[],f=t();f!==z;)d.push(f),f=t();if(d!==z)if(f=m(),f!==z){for(g=[],h=t();h!==z;)g.push(h),h=t();if(g!==z)if(a.substr(ac,2)===J?(h=J,ac+=2):(h=z,0===gc&&e(K)),h===z&&(a.substr(ac,2)===L?(h=L,ac+=2):(h=z,0===gc&&e(M)),h===z&&(61===a.charCodeAt(ac)?(h=N,ac++):(h=z,0===gc&&e(O)),h===z&&(62===a.charCodeAt(ac)?(h=P,ac++):(h=z,0===gc&&e(Q)),h===z&&(60===a.charCodeAt(ac)?(h=R,ac++):(h=z,0===gc&&e(S)))))),h!==z){for(i=[],j=t();j!==z;)i.push(j),j=t();i!==z?(j=q(),j!==z?(bc=b,c=T(c,f,h,j),b=c):(ac=b,b=C)):(ac=b,b=C)}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;if(b===z){if(b=ac,a.substr(ac,3)===U?(c=U,ac+=3):(c=z,0===gc&&e(V)),c!==z){for(d=[],f=t();f!==z;)d.push(f),f=t();if(d!==z)if(f=o(),f!==z){for(g=[],h=t();h!==z;)g.push(h),h=t();if(g!==z)if(a.substr(ac,2)===J?(h=J,ac+=2):(h=z,0===gc&&e(K)),h===z&&(a.substr(ac,2)===L?(h=L,ac+=2):(h=z,0===gc&&e(M)),h===z&&(61===a.charCodeAt(ac)?(h=N,ac++):(h=z,0===gc&&e(O)),h===z&&(62===a.charCodeAt(ac)?(h=P,ac++):(h=z,0===gc&&e(Q)),h===z&&(60===a.charCodeAt(ac)?(h=R,ac++):(h=z,0===gc&&e(S)))))),h!==z){for(i=[],j=t();j!==z;)i.push(j),j=t();i!==z?(j=q(),j!==z?(bc=b,c=W(c,f,h,j),b=c):(ac=b,b=C)):(ac=b,b=C)}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;if(b===z){if(b=ac,a.substr(ac,7)===X?(c=X,ac+=7):(c=z,0===gc&&e(Y)),c!==z){for(d=[],f=t();f!==z;)d.push(f),f=t();if(d!==z)if(f=n(),f!==z){for(g=[],h=t();h!==z;)g.push(h),h=t();if(g!==z)if(a.substr(ac,2)===J?(h=J,ac+=2):(h=z,0===gc&&e(K)),h===z&&(a.substr(ac,2)===L?(h=L,ac+=2):(h=z,0===gc&&e(M)),h===z&&(61===a.charCodeAt(ac)?(h=N,ac++):(h=z,0===gc&&e(O)),h===z&&(62===a.charCodeAt(ac)?(h=P,ac++):(h=z,0===gc&&e(Q)),h===z&&(60===a.charCodeAt(ac)?(h=R,ac++):(h=z,0===gc&&e(S)))))),h!==z){for(i=[],j=t();j!==z;)i.push(j),j=t();i!==z?(j=q(),j!==z?(bc=b,c=Z(c,f,h,j),b=c):(ac=b,b=C)):(ac=b,b=C)}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;if(b===z){if(b=ac,a.substr(ac,7)===$?(c=$,ac+=7):(c=z,0===gc&&e(_)),c!==z){for(d=[],f=t();f!==z;)d.push(f),f=t();if(d!==z)if(f=p(),f!==z){for(g=[],h=ac,i=[],j=t();j!==z;)i.push(j),j=t();if(i!==z)if(44===a.charCodeAt(ac)?(j=ab,ac++):(j=z,0===gc&&e(bb)),j!==z){for(k=[],r=t();r!==z;)k.push(r),r=t();k!==z?(r=p(),r!==z?(i=[i,j,k,r],h=i):(ac=h,h=C)):(ac=h,h=C)}else ac=h,h=C;else ac=h,h=C;for(;h!==z;){for(g.push(h),h=ac,i=[],j=t();j!==z;)i.push(j),j=t();if(i!==z)if(44===a.charCodeAt(ac)?(j=ab,ac++):(j=z,0===gc&&e(bb)),j!==z){for(k=[],r=t();r!==z;)k.push(r),r=t();k!==z?(r=p(),r!==z?(i=[i,j,k,r],h=i):(ac=h,h=C)):(ac=h,h=C)}else ac=h,h=C;else ac=h,h=C}if(g!==z){for(h=ac,i=[],j=t();j!==z;)i.push(j),j=t();if(i!==z)if(a.substr(ac,3)===db?(j=db,ac+=3):(j=z,0===gc&&e(eb)),j!==z){for(k=[],r=t();r!==z;)k.push(r),r=t();if(k!==z)if(r=q(),r!==z){for(s=[],v=t();v!==z;)s.push(v),v=t();s!==z?(v=u(),v!==z?(i=[i,j,k,r,s,v],h=i):(ac=h,h=C)):(ac=h,h=C)}else ac=h,h=C;else ac=h,h=C}else ac=h,h=C;else ac=h,h=C;h===z&&(h=cb),h!==z?(bc=b,c=fb(f,g,h),b=c):(ac=b,b=C)}else ac=b,b=C}else ac=b,b=C;else ac=b,b=C}else ac=b,b=C;if(b===z)if(b=ac,a.substr(ac,9)===gb?(c=gb,ac+=9):(c=z,0===gc&&e(hb)),c!==z){for(d=[],f=t();f!==z;)d.push(f),f=t();d!==z?(f=l(),f!==z?(bc=b,c=ib(c,f),b=c):(ac=b,b=C)):(ac=b,b=C)}else ac=b,b=C}}}return b}function j(){var b;return kb.test(a.charAt(ac))?(b=a.charAt(ac),ac++):(b=z,0===gc&&e(lb)),b}function k(){var a,b,c;if(a=ac,b=[],c=j(),c!==z)for(;c!==z;)b.push(c),c=j();else b=C;return b!==z&&(bc=a,b=jb(b)),a=b}function l(){var a,b;return gc++,a=k(),gc--,a===z&&(b=z,0===gc&&e(mb)),a}function m(){var a,b;return gc++,a=k(),gc--,a===z&&(b=z,0===gc&&e(nb)),a}function n(){var a,b;return gc++,a=k(),gc--,a===z&&(b=z,0===gc&&e(ob)),a}function o(){var a,b;return gc++,a=k(),gc--,a===z&&(b=z,0===gc&&e(pb)),a}function p(){var a,b;return gc++,a=k(),gc--,a===z&&(b=z,0===gc&&e(qb)),a}function q(){var b,c,d,f,g,h,i;if(gc++,b=ac,sb.test(a.charAt(ac))?(c=a.charAt(ac),ac++):(c=z,0===gc&&e(tb)),c===z&&(c=cb),c!==z){for(d=ac,f=[],g=r();g!==z;)f.push(g),g=r();if(f!==z)if(46===a.charCodeAt(ac)?(g=ub,ac++):(g=z,0===gc&&e(vb)),g!==z){if(h=[],i=r(),i!==z)for(;i!==z;)h.push(i),i=r();else h=C;h!==z?(f=[f,g,h],d=f):(ac=d,d=C)}else ac=d,d=C;else ac=d,d=C;if(d===z)if(d=[],f=r(),f!==z)for(;f!==z;)d.push(f),f=r();else d=C;d!==z?(bc=b,c=wb(),b=c):(ac=b,b=C)}else ac=b,b=C;return gc--,b===z&&(c=z,0===gc&&e(rb)),b}function r(){var b,c;return gc++,yb.test(a.charAt(ac))?(b=a.charAt(ac),ac++):(b=z,0===gc&&e(zb)),gc--,b===z&&(c=z,0===gc&&e(xb)),b}function s(){var b,c;if(b=[],Ab.test(a.charAt(ac))?(c=a.charAt(ac),ac++):(c=z,0===gc&&e(Bb)),c!==z)for(;c!==z;)b.push(c),Ab.test(a.charAt(ac))?(c=a.charAt(ac),ac++):(c=z,0===gc&&e(Bb));else b=C;return b}function t(){var a,b;return gc++,a=s(),gc--,a===z&&(b=z,0===gc&&e(Cb)),a}function u(){var b,c;return b=ac,a.substr(ac,7)===Db?(c=Db,ac+=7):(c=z,0===gc&&e(Eb)),c===z&&(a.substr(ac,6)===Fb?(c=Fb,ac+=6):(c=z,0===gc&&e(Gb)),c===z&&(a.substr(ac,5)===Hb?(c=Hb,ac+=5):(c=z,0===gc&&e(Ib)),c===z&&(a.substr(ac,4)===Jb?(c=Jb,ac+=4):(c=z,0===gc&&e(Kb)),c===z&&(a.substr(ac,4)===Lb?(c=Lb,ac+=4):(c=z,0===gc&&e(Mb)),c===z&&(a.substr(ac,3)===Nb?(c=Nb,ac+=3):(c=z,0===gc&&e(Ob)),c===z&&(a.substr(ac,5)===Pb?(c=Pb,ac+=5):(c=z,0===gc&&e(Qb)),c===z&&(a.substr(ac,4)===Rb?(c=Rb,ac+=4):(c=z,0===gc&&e(Sb)),c===z&&(a.substr(ac,6)===Tb?(c=Tb,ac+=6):(c=z,0===gc&&e(Ub)),c===z&&(a.substr(ac,5)===Vb?(c=Vb,ac+=5):(c=z,0===gc&&e(Wb)),c===z&&(a.substr(ac,5)===Xb?(c=Xb,ac+=5):(c=z,0===gc&&e(Yb)),c===z&&(a.substr(ac,4)===Zb?(c=Zb,ac+=4):(c=z,0===gc&&e($b))))))))))))),c!==z&&(bc=b,c=_b(c)),b=c}function v(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function w(a,b,c){return(null!==a?[a]:[]).concat(v(b,c))}var x,y=arguments.length>1?arguments[1]:{},z={},A={start:g},B=g,C=z,D="and",E={type:"literal",value:"and",description:'"and"'},F=function(a,b){return w(a,b,3)},G=function(a){return[a]},H="level",I={type:"literal",value:"level",description:'"level"'},J=">=",K={type:"literal",value:">=",description:'">="'},L="<=",M={type:"literal",value:"<=",description:'"<="'},N="=",O={type:"literal",value:"=",description:'"="'},P=">",Q={type:"literal",value:">",description:'">"'},R="<",S={type:"literal",value:"<",description:'"<"'},T=function(a,b,c,d){return{scope:a,code:b,operator:c,value:d}},U="tag",V={type:"literal",value:"tag",description:'"tag"'},W=function(a,b,c,d){return{scope:a,code:b,operator:c,value:d}},X="segment",Y={type:"literal",value:"segment",description:'"segment"'},Z=function(a,b,c,d){return{scope:a,code:b,operator:c,value:d}},$="in zone",_={type:"literal",value:"in zone",description:'"in zone"'},ab=",",bb={type:"literal",value:",",description:'","'},cb=null,db="for",eb={type:"literal",value:"for",description:'"for"'},fb=function(a,b,c){return{scope:"zone",codes:w(a,b,3),duration:c?c[3]:null,timeframe:c?c[5]:null}},gb="challenge",hb={type:"literal",value:"challenge",description:'"challenge"'},ib=function(a,b){return{scope:a,code:b}},jb=function(a){return a.join("")},kb=/^[_a-z0-9\-.]/i,lb={type:"class",value:"[_a-z0-9\\-.]i",description:"[_a-z0-9\\-.]i"},mb={type:"other",description:"challengeCode"},nb={type:"other",description:"levelCode"},ob={type:"other",description:"segmentCode"},pb={type:"other",description:"tagCode"},qb={type:"other",description:"zoneCode"},rb={type:"other",description:"number"},sb=/^[+\-]/,tb={type:"class",value:"[+\\-]",description:"[+\\-]"},ub=".",vb={type:"literal",value:".",description:'"."'},wb=function(){return parseFloat(c())},xb={type:"other",description:"digit"},yb=/^[0-9]/,zb={type:"class",value:"[0-9]",description:"[0-9]"},Ab=/^[ \t\r\n\f]/,Bb={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Cb={type:"other",description:"whitespace"},Db="minutes",Eb={type:"literal",value:"minutes",description:'"minutes"'},Fb="minute",Gb={type:"literal",value:"minute",description:'"minute"'},Hb="hours",Ib={type:"literal",value:"hours",description:'"hours"'},Jb="hour",Kb={type:"literal",value:"hour",description:'"hour"'},Lb="days",Mb={type:"literal",value:"days",description:'"days"'},Nb="day",Ob={type:"literal",value:"day",description:'"day"'},Pb="weeks",Qb={type:"literal",value:"weeks",description:'"weeks"'},Rb="week",Sb={type:"literal",value:"week",description:'"week"'},Tb="months",Ub={type:"literal",value:"months",description:'"months"'},Vb="month",Wb={type:"literal",value:"month",description:'"month"'},Xb="years",Yb={type:"literal",value:"years",description:'"years"'},Zb="year",$b={type:"literal",value:"year",description:'"year"'},_b=function(a){return a.replace(/s/g,"")},ac=0,bc=0,cc=0,dc={line:1,column:1,seenCR:!1},ec=0,fc=[],gc=0;if("startRule"in y){if(!(y.startRule in A))throw new Error("Can't start parsing from rule \""+y.startRule+'".');B=A[y.startRule]}if(x=B(),x!==z&&ac===a.length)return x;throw x!==z&&ac<a.length&&e({type:"end",description:"end of input"}),f(null,fc,ec)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],3:[function(a,b){"use strict";b.exports.literals=["and","level","tag","segment","challenge","in zone","for","minutes","minute","hours","hour","days","day","weeks","week","months","month","years","year"]},{}],4:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return a.substring(Vc,Uc)}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return Wc!==b&&(Wc>b&&(Wc=0,Xc={line:1,column:1,seenCR:!1}),c(Xc,Wc,b),Wc=b),Xc}function e(a){Yc>Uc||(Uc>Yc&&(Yc=Uc,Zc=[]),Zc.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var a;return a=h()}function h(){var b,c,d,f,g,h,j,k;if(b=Uc,c=i(),c!==N){for(d=[],f=Uc,g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(a.substr(Uc,3)===R?(h=R,Uc+=3):(h=N,0===$c&&e(S)),h!==N){for(j=[],k=I();k!==N;)j.push(k),k=I();j!==N?(k=i(),k!==N?(g=[g,h,j,k],f=g):(Uc=f,f=Q)):(Uc=f,f=Q)}else Uc=f,f=Q;else Uc=f,f=Q;if(f!==N)for(;f!==N;){for(d.push(f),f=Uc,g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(a.substr(Uc,3)===R?(h=R,Uc+=3):(h=N,0===$c&&e(S)),h!==N){for(j=[],k=I();k!==N;)j.push(k),k=I();j!==N?(k=i(),k!==N?(g=[g,h,j,k],f=g):(Uc=f,f=Q)):(Uc=f,f=Q)}else Uc=f,f=Q;else Uc=f,f=Q}else d=Q;if(d!==N){for(f=[],g=Uc,h=[],j=I();j!==N;)h.push(j),j=I();if(h!==N?(j=s(),j!==N?(h=[h,j],g=h):(Uc=g,g=Q)):(Uc=g,g=Q),g!==N)for(;g!==N;){for(f.push(g),g=Uc,h=[],j=I();j!==N;)h.push(j),j=I();h!==N?(j=s(),j!==N?(h=[h,j],g=h):(Uc=g,g=Q)):(Uc=g,g=Q)}else f=Q;f!==N?(Vc=b,c=T(c,d,f),b=c):(Uc=b,b=Q)}else Uc=b,b=Q}else Uc=b,b=Q;if(b===N)if(b=Uc,c=i(),c!==N){for(d=[],f=Uc,g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N?(h=s(),h!==N?(g=[g,h],f=g):(Uc=f,f=Q)):(Uc=f,f=Q),f!==N)for(;f!==N;){for(d.push(f),f=Uc,g=[],h=I();h!==N;)g.push(h),h=I();g!==N?(h=s(),h!==N?(g=[g,h],f=g):(Uc=f,f=Q)):(Uc=f,f=Q)}else d=Q;d!==N?(Vc=b,c=U(c,d),b=c):(Uc=b,b=Q)}else Uc=b,b=Q;return b}function i(){var b,c,d,f,g,h,i,l,m,o,p,q,s,t;if(b=Uc,a.substr(Uc,6)===V?(c=V,Uc+=6):(c=N,0===$c&&e(W)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=z(),f!==N){for(g=[],h=Uc,i=[],l=I();l!==N;)i.push(l),l=I();for(i!==N?(l=j(),l!==N?(i=[i,l],h=i):(Uc=h,h=Q)):(Uc=h,h=Q);h!==N;){for(g.push(h),h=Uc,i=[],l=I();l!==N;)i.push(l),l=I();i!==N?(l=j(),l!==N?(i=[i,l],h=i):(Uc=h,h=Q)):(Uc=h,h=Q)}if(g!==N){for(h=[],i=Uc,l=[],m=I();m!==N;)l.push(m),m=I();for(l!==N?(m=k(),m!==N?(l=[l,m],i=l):(Uc=i,i=Q)):(Uc=i,i=Q);i!==N;){for(h.push(i),i=Uc,l=[],m=I();m!==N;)l.push(m),m=I();l!==N?(m=k(),m!==N?(l=[l,m],i=l):(Uc=i,i=Q)):(Uc=i,i=Q)}h!==N?(Vc=b,c=X(c,f,g,h),b=c):(Uc=b,b=Q)}else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;if(b===N){if(b=Uc,a.substr(Uc,9)===Y?(c=Y,Uc+=9):(c=N,0===$c&&e(Z)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=A(),f!==N){for(g=[],h=Uc,i=[],l=I();l!==N;)i.push(l),l=I();for(i!==N?(l=j(),l!==N?(i=[i,l],h=i):(Uc=h,h=Q)):(Uc=h,h=Q);h!==N;){for(g.push(h),h=Uc,i=[],l=I();l!==N;)i.push(l),l=I();i!==N?(l=j(),l!==N?(i=[i,l],h=i):(Uc=h,h=Q)):(Uc=h,h=Q)}if(g!==N){for(h=[],i=Uc,l=[],m=I();m!==N;)l.push(m),m=I();for(l!==N?(m=k(),m!==N?(l=[l,m],i=l):(Uc=i,i=Q)):(Uc=i,i=Q);i!==N;){for(h.push(i),i=Uc,l=[],m=I();m!==N;)l.push(m),m=I();l!==N?(m=k(),m!==N?(l=[l,m],i=l):(Uc=i,i=Q)):(Uc=i,i=Q)}h!==N?(Vc=b,c=$(c,f,g,h),b=c):(Uc=b,b=Q)}else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;if(b===N){if(b=Uc,a.substr(Uc,6)===_?(c=_,Uc+=6):(c=N,0===$c&&e(ab)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(a.substr(Uc,5)===bb?(f=bb,Uc+=5):(f=N,0===$c&&e(cb)),f===N&&(a.substr(Uc,5)===db?(f=db,Uc+=5):(f=N,0===$c&&e(eb))),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(h=B(),h!==N){for(i=[],l=I();l!==N;)i.push(l),l=I();if(i!==N)if(l=F(),l!==N){for(m=[],o=I();o!==N;)m.push(o),o=I();m!==N?(o=n(),o===N&&(o=fb),o!==N?(Vc=b,c=gb(c,f,h,l,o),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;if(b===N){if(b=Uc,a.substr(Uc,6)===_?(c=_,Uc+=6):(c=N,0===$c&&e(ab)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(a.substr(Uc,3)===hb?(f=hb,Uc+=3):(f=N,0===$c&&e(ib)),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(h=C(),h!==N){for(i=[],l=I();l!==N;)i.push(l),l=I();if(i!==N)if(l=F(),l!==N){for(m=[],o=I();o!==N;)m.push(o),o=I();m!==N?(o=n(),o===N&&(o=fb),o!==N?(Vc=b,c=jb(c,f,h,l,o),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;if(b===N){if(b=Uc,a.substr(Uc,6)===_?(c=_,Uc+=6):(c=N,0===$c&&e(ab)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(a.substr(Uc,7)===kb?(f=kb,Uc+=7):(f=N,0===$c&&e(lb)),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(h=D(),h!==N){for(i=[],l=Uc,m=[],o=I();o!==N;)m.push(o),o=I();if(m!==N)if(44===a.charCodeAt(Uc)?(o=mb,Uc++):(o=N,0===$c&&e(nb)),o!==N){for(p=[],q=I();q!==N;)p.push(q),q=I();p!==N?(q=D(),q!==N?(m=[m,o,p,q],l=m):(Uc=l,l=Q)):(Uc=l,l=Q)}else Uc=l,l=Q;else Uc=l,l=Q;for(;l!==N;){for(i.push(l),l=Uc,m=[],o=I();o!==N;)m.push(o),o=I();if(m!==N)if(44===a.charCodeAt(Uc)?(o=mb,Uc++):(o=N,0===$c&&e(nb)),o!==N){for(p=[],q=I();q!==N;)p.push(q),q=I();p!==N?(q=D(),q!==N?(m=[m,o,p,q],l=m):(Uc=l,l=Q)):(Uc=l,l=Q)}else Uc=l,l=Q;else Uc=l,l=Q}if(i!==N){for(l=Uc,m=[],o=I();o!==N;)m.push(o),o=I();if(m!==N)if(a.substr(Uc,3)===ob?(o=ob,Uc+=3):(o=N,0===$c&&e(pb)),o!==N){for(p=[],q=I();q!==N;)p.push(q),q=I();if(p!==N)if(q=F(),q!==N){for(s=[],t=I();t!==N;)s.push(t),t=I();s!==N?(t=r(),t!==N?(m=[m,o,p,q,s,t],l=m):(Uc=l,l=Q)):(Uc=l,l=Q)}else Uc=l,l=Q;else Uc=l,l=Q}else Uc=l,l=Q;else Uc=l,l=Q;l===N&&(l=fb),l!==N?(Vc=b,c=qb(c,h,i,l),b=c):(Uc=b,b=Q)}else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;if(b===N)if(b=Uc,a.substr(Uc,6)===_?(c=_,Uc+=6):(c=N,0===$c&&e(ab)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(a.substr(Uc,8)===rb?(f=rb,Uc+=8):(f=N,0===$c&&e(sb)),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(h=B(),h!==N){for(i=[],l=Uc,m=[],o=I();o!==N;)m.push(o),o=I();for(m!==N?(o=j(),o!==N?(m=[m,o],l=m):(Uc=l,l=Q)):(Uc=l,l=Q);l!==N;){for(i.push(l),l=Uc,m=[],o=I();o!==N;)m.push(o),o=I();m!==N?(o=j(),o!==N?(m=[m,o],l=m):(Uc=l,l=Q)):(Uc=l,l=Q)}if(i!==N){for(l=[],m=I();m!==N;)l.push(m),m=I();l!==N?(m=n(),m===N&&(m=fb),m!==N?(Vc=b,c=tb(c,f,h,i,m),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q}}}}return b}function j(){var a;return a=q(),a===N&&(a=p()),a}function k(){var a;return a=n(),a===N&&(a=o(),a===N&&(a=l(),a===N&&(a=m()))),a}function l(){var b,c,d,f,g,h,i,j,k,l;if(b=Uc,a.substr(Uc,7)===kb?(c=kb,Uc+=7):(c=N,0===$c&&e(lb)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=D(),f!==N){for(g=[],h=Uc,i=[],j=I();j!==N;)i.push(j),j=I();if(i!==N)if(44===a.charCodeAt(Uc)?(j=mb,Uc++):(j=N,0===$c&&e(nb)),j!==N){for(k=[],l=I();l!==N;)k.push(l),l=I();k!==N?(l=D(),l!==N?(i=[i,j,k,l],h=i):(Uc=h,h=Q)):(Uc=h,h=Q)}else Uc=h,h=Q;else Uc=h,h=Q;for(;h!==N;){for(g.push(h),h=Uc,i=[],j=I();j!==N;)i.push(j),j=I();if(i!==N)if(44===a.charCodeAt(Uc)?(j=mb,Uc++):(j=N,0===$c&&e(nb)),j!==N){for(k=[],l=I();l!==N;)k.push(l),l=I();k!==N?(l=D(),l!==N?(i=[i,j,k,l],h=i):(Uc=h,h=Q)):(Uc=h,h=Q)}else Uc=h,h=Q;else Uc=h,h=Q}g!==N?(Vc=b,c=ub(f,g),b=c):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;return b}function m(){var b,c,d,f,g,h,i,j,k,l,m,n,o,p;if(b=Uc,a.substr(Uc,4)===vb?(c=vb,Uc+=4):(c=N,0===$c&&e(wb)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=F(),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(a.substr(Uc,9)===xb?(h=xb,Uc+=9):(h=N,0===$c&&e(yb)),h!==N){for(i=[],j=I();j!==N;)i.push(j),j=I();if(i!==N)if(j=E(),j!==N){for(k=[],l=Uc,m=[],n=I();n!==N;)m.push(n),n=I();if(m!==N)if(44===a.charCodeAt(Uc)?(n=mb,Uc++):(n=N,0===$c&&e(nb)),n!==N){for(o=[],p=I();p!==N;)o.push(p),p=I();o!==N?(p=E(),p!==N?(m=[m,n,o,p],l=m):(Uc=l,l=Q)):(Uc=l,l=Q)}else Uc=l,l=Q;else Uc=l,l=Q;for(;l!==N;){for(k.push(l),l=Uc,m=[],n=I();n!==N;)m.push(n),n=I();if(m!==N)if(44===a.charCodeAt(Uc)?(n=mb,Uc++):(n=N,0===$c&&e(nb)),n!==N){for(o=[],p=I();p!==N;)o.push(p),p=I();o!==N?(p=E(),p!==N?(m=[m,n,o,p],l=m):(Uc=l,l=Q)):(Uc=l,l=Q)}else Uc=l,l=Q;else Uc=l,l=Q}k!==N?(Vc=b,c=zb(f,j,k),b=c):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;return b}function n(){var b,c,d,f,g,h,i,j,k;if(b=Uc,a.substr(Uc,8)===Ab?(c=Ab,Uc+=8):(c=N,0===$c&&e(Bb)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=C(),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N){if(h=Uc,61===a.charCodeAt(Uc)?(i=Cb,Uc++):(i=N,0===$c&&e(Db)),i!==N){for(j=[],k=I();k!==N;)j.push(k),k=I();j!==N?(k=F(),k!==N?(i=[i,j,k],h=i):(Uc=h,h=Q)):(Uc=h,h=Q)}else Uc=h,h=Q;h===N&&(h=fb),h!==N?(Vc=b,c=Eb(f,h),b=c):(Uc=b,b=Q)}else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;return b}function o(){var b,c,d,f,g,h,i,j;if(b=Uc,a.substr(Uc,9)===Fb?(c=Fb,Uc+=9):(c=N,0===$c&&e(Gb)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=x(),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(61===a.charCodeAt(Uc)?(h=Cb,Uc++):(h=N,0===$c&&e(Db)),h!==N){for(i=[],j=I();j!==N;)i.push(j),j=I();i!==N?(j=v(),j!==N?(Vc=b,c=Hb(f,j),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;return b}function p(){var b,c,d,f;if(b=Uc,c=F(),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();d!==N?(a.substr(Uc,5)===Ib?(f=Ib,Uc+=5):(f=N,0===$c&&e(Jb)),f!==N?(Vc=b,c=Kb(c),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;return b}function q(){var b,c,d,f,g,h,i,j,k,l;if(b=Uc,c=F(),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(a.substr(Uc,5)===Ib?(f=Ib,Uc+=5):(f=N,0===$c&&e(Jb)),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();if(g!==N)if(a.substr(Uc,6)===Lb?(h=Lb,Uc+=6):(h=N,0===$c&&e(Mb)),h!==N){for(i=[],j=I();j!==N;)i.push(j),j=I();if(i!==N)if(j=F(),j!==N){for(k=[],l=I();l!==N;)k.push(l),l=I();k!==N?(l=r(),l!==N?(Vc=b,c=Nb(c,j,l),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;return b}function r(){var b,c;return b=Uc,a.substr(Uc,7)===Ob?(c=Ob,Uc+=7):(c=N,0===$c&&e(Pb)),c===N&&(a.substr(Uc,6)===Qb?(c=Qb,Uc+=6):(c=N,0===$c&&e(Rb)),c===N&&(a.substr(Uc,5)===Sb?(c=Sb,Uc+=5):(c=N,0===$c&&e(Tb)),c===N&&(a.substr(Uc,4)===Ub?(c=Ub,Uc+=4):(c=N,0===$c&&e(Vb)),c===N&&(a.substr(Uc,4)===Wb?(c=Wb,Uc+=4):(c=N,0===$c&&e(Xb)),c===N&&(a.substr(Uc,3)===Yb?(c=Yb,Uc+=3):(c=N,0===$c&&e(Zb)),c===N&&(a.substr(Uc,5)===$b?(c=$b,Uc+=5):(c=N,0===$c&&e(_b)),c===N&&(a.substr(Uc,4)===ac?(c=ac,Uc+=4):(c=N,0===$c&&e(bc)),c===N&&(a.substr(Uc,6)===cc?(c=cc,Uc+=6):(c=N,0===$c&&e(dc)),c===N&&(a.substr(Uc,5)===ec?(c=ec,Uc+=5):(c=N,0===$c&&e(fc)),c===N&&(a.substr(Uc,5)===gc?(c=gc,Uc+=5):(c=N,0===$c&&e(hc)),c===N&&(a.substr(Uc,4)===ic?(c=ic,Uc+=4):(c=N,0===$c&&e(jc))))))))))))),c!==N&&(Vc=b,c=kc(c)),b=c}function s(){var b,c,d,f,g,h;if(b=Uc,a.substr(Uc,4)===lc?(c=lc,Uc+=4):(c=N,0===$c&&e(mc)),c!==N){for(d=[],f=I();f!==N;)d.push(f),f=I();if(d!==N)if(f=F(),f!==N){for(g=[],h=I();h!==N;)g.push(h),h=I();g!==N?(h=y(),h!==N?(Vc=b,c=nc(f,h),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;else Uc=b,b=Q}else Uc=b,b=Q;return b}function t(){var b,c,d,f;if(b=Uc,34===a.charCodeAt(Uc)?(c=oc,Uc++):(c=N,0===$c&&e(pc)),c!==N){for(d=[],qc.test(a.charAt(Uc))?(f=a.charAt(Uc),Uc++):(f=N,0===$c&&e(rc)),f===N&&(92===a.charCodeAt(Uc)?(f=sc,Uc++):(f=N,0===$c&&e(tc)));f!==N;)d.push(f),qc.test(a.charAt(Uc))?(f=a.charAt(Uc),Uc++):(f=N,0===$c&&e(rc)),f===N&&(92===a.charCodeAt(Uc)?(f=sc,Uc++):(f=N,0===$c&&e(tc)));d!==N?(34===a.charCodeAt(Uc)?(f=oc,Uc++):(f=N,0===$c&&e(pc)),f!==N?(Vc=b,c=uc(d),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;return b}function u(){var b,c,d,f;if(b=Uc,39===a.charCodeAt(Uc)?(c=vc,Uc++):(c=N,0===$c&&e(wc)),c!==N){for(d=[],xc.test(a.charAt(Uc))?(f=a.charAt(Uc),Uc++):(f=N,0===$c&&e(yc)),f===N&&(92===a.charCodeAt(Uc)?(f=sc,Uc++):(f=N,0===$c&&e(tc)));f!==N;)d.push(f),xc.test(a.charAt(Uc))?(f=a.charAt(Uc),Uc++):(f=N,0===$c&&e(yc)),f===N&&(92===a.charCodeAt(Uc)?(f=sc,Uc++):(f=N,0===$c&&e(tc)));d!==N?(39===a.charCodeAt(Uc)?(f=vc,Uc++):(f=N,0===$c&&e(wc)),f!==N?(Vc=b,c=uc(d),b=c):(Uc=b,b=Q)):(Uc=b,b=Q)}else Uc=b,b=Q;return b}function v(){var a;return a=t(),a===N&&(a=u()),a}function w(){var b;return zc.test(a.charAt(Uc))?(b=a.charAt(Uc),Uc++):(b=N,0===$c&&e(Ac)),b}function x(){var a,b,c;if(a=Uc,b=[],c=w(),c!==N)for(;c!==N;)b.push(c),c=w();else b=Q;return b!==N&&(Vc=a,b=uc(b)),a=b}function y(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Bc)),a}function z(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Cc)),a}function A(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Dc)),a}function B(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Ec)),a}function C(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Fc)),a}function D(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Gc)),a}function E(){var a,b;return $c++,a=x(),$c--,a===N&&(b=N,0===$c&&e(Hc)),a}function F(){var b,c,d,f,g,h,i;if($c++,b=Uc,Jc.test(a.charAt(Uc))?(c=a.charAt(Uc),Uc++):(c=N,0===$c&&e(Kc)),c===N&&(c=fb),c!==N){for(d=Uc,f=[],g=G();g!==N;)f.push(g),g=G();if(f!==N)if(46===a.charCodeAt(Uc)?(g=Lc,Uc++):(g=N,0===$c&&e(Mc)),g!==N){if(h=[],i=G(),i!==N)for(;i!==N;)h.push(i),i=G();else h=Q;h!==N?(f=[f,g,h],d=f):(Uc=d,d=Q)}else Uc=d,d=Q;else Uc=d,d=Q;if(d===N)if(d=[],f=G(),f!==N)for(;f!==N;)d.push(f),f=G();else d=Q;d!==N?(Vc=b,c=Nc(),b=c):(Uc=b,b=Q)}else Uc=b,b=Q;return $c--,b===N&&(c=N,0===$c&&e(Ic)),b}function G(){var b,c;return $c++,Pc.test(a.charAt(Uc))?(b=a.charAt(Uc),Uc++):(b=N,0===$c&&e(Qc)),$c--,b===N&&(c=N,0===$c&&e(Oc)),b}function H(){var b,c;if(b=[],Rc.test(a.charAt(Uc))?(c=a.charAt(Uc),Uc++):(c=N,0===$c&&e(Sc)),c!==N)for(;c!==N;)b.push(c),Rc.test(a.charAt(Uc))?(c=a.charAt(Uc),Uc++):(c=N,0===$c&&e(Sc));else b=Q;return b}function I(){var a,b;return $c++,a=H(),$c--,a===N&&(b=N,0===$c&&e(Tc)),a}function J(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function K(a,b,c){return(null!==a?[a]:[]).concat(J(b,c))}var L,M=arguments.length>1?arguments[1]:{},N={},O={start:g},P=g,Q=N,R="and",S={type:"literal",value:"and",description:'"and"'},T=function(a,b,c){return{rules:K(a,b,3),rewards:K(null,c,1)}},U=function(a,b){return{rules:[a],rewards:K(null,b,1)}},V="action",W={type:"literal",value:"action",description:'"action"'},X=function(a,b,c,d){return{scope:a,code:b,conditions:K(null,c,1),filters:K(null,d,1)}},Y="challenge",Z={type:"literal",value:"challenge",description:'"challenge"'},$=function(a,b,c,d){return{scope:a,code:b,conditions:K(null,c,1),filters:K(null,d,1)}},_="member",ab={type:"literal",value:"member",description:'"member"'},bb="level",cb={type:"literal",value:"level",description:'"level"'},db="point",eb={type:"literal",value:"point",description:'"point"'},fb=null,gb=function(a,b,c,d,e){var f={scope:a,type:b,levelCode:c,conditions:[{type:b,value:d}],filters:e?[e]:[]};return f},hb="tag",ib={type:"literal",value:"tag",description:'"tag"'},jb=function(a,b,c,d,e){var f={scope:a,type:b,levelCode:c,conditions:[{type:b,value:d}],filters:e?[e]:[]};return f},kb="in zone",lb={type:"literal",value:"in zone",description:'"in zone"'},mb=",",nb={type:"literal",value:",",description:'","'},ob="for",pb={type:"literal",value:"for",description:'"for"'},qb=function(a,b,c,d){var e={scope:a,type:"zone",codes:K(b,c,3),duration:d?d[3]:null,timeframe:d?d[5]:null};return e},rb="level up",sb={type:"literal",value:"level up",description:'"level up"'},tb=function(a,b,c,d,e){return{scope:a,type:b,levelCode:c,conditions:K(null,d,1),filters:e?[e]:[]}},ub=function(a,b){return{type:"zone",zones:K(a,b,3)}},vb="near",wb={type:"literal",value:"near",description:'"near"'},xb="of beacon",yb={type:"literal",value:"of beacon",description:'"of beacon"'},zb=function(a,b,c){return{type:"beacon",distance:a,beacons:K(b,c,3)}},Ab="with tag",Bb={type:"literal",value:"with tag",description:'"with tag"'},Cb="=",Db={type:"literal",value:"=",description:'"="'},Eb=function(a,b){return{type:"tag",tag:a,value:b?b[2]:null}},Fb="with data",Gb={type:"literal",value:"with data",description:'"with data"'},Hb=function(a,b){return{type:"data",attribute:a,value:b}},Ib="times",Jb={type:"literal",value:"times",description:'"times"'},Kb=function(a){return{type:"times",value:a}},Lb="within",Mb={type:"literal",value:"within",description:'"within"'},Nb=function(a,b,c){return{type:"times_within_timeframe",value:a,duration:b,durationScope:c}},Ob="minutes",Pb={type:"literal",value:"minutes",description:'"minutes"'},Qb="minute",Rb={type:"literal",value:"minute",description:'"minute"'},Sb="hours",Tb={type:"literal",value:"hours",description:'"hours"'},Ub="hour",Vb={type:"literal",value:"hour",description:'"hour"'},Wb="days",Xb={type:"literal",value:"days",description:'"days"'},Yb="day",Zb={type:"literal",value:"day",description:'"day"'},$b="weeks",_b={type:"literal",value:"weeks",description:'"weeks"'},ac="week",bc={type:"literal",value:"week",description:'"week"'},cc="months",dc={type:"literal",value:"months",description:'"months"'},ec="month",fc={type:"literal",value:"month",description:'"month"'},gc="years",hc={type:"literal",value:"years",description:'"years"'},ic="year",jc={type:"literal",value:"year",description:'"year"'},kc=function(a){return a.replace(/s/g,"")},lc="give",mc={type:"literal",value:"give",description:'"give"'},nc=function(a,b){return{quantity:a,code:b}},oc='"',pc={type:"literal",value:'"',description:'"\\""'},qc=/^[^\n\r\f\\"]/,rc={type:"class",value:'[^\\n\\r\\f\\\\"]',description:'[^\\n\\r\\f\\\\"]'},sc="\\",tc={type:"literal",value:"\\",description:'"\\\\"'},uc=function(a){return a.join("")
},vc="'",wc={type:"literal",value:"'",description:'"\'"'},xc=/^[^\n\r\f\\']/,yc={type:"class",value:"[^\\n\\r\\f\\\\']",description:"[^\\n\\r\\f\\\\']"},zc=/^[_a-z0-9\-.]/i,Ac={type:"class",value:"[_a-z0-9\\-.]i",description:"[_a-z0-9\\-.]i"},Bc={type:"other",description:"rewardCode"},Cc={type:"other",description:"actionCode"},Dc={type:"other",description:"challengeCode"},Ec={type:"other",description:"levelCode"},Fc={type:"other",description:"tagCode"},Gc={type:"other",description:"zoneCode"},Hc={type:"other",description:"beaconCode"},Ic={type:"other",description:"number"},Jc=/^[+\-]/,Kc={type:"class",value:"[+\\-]",description:"[+\\-]"},Lc=".",Mc={type:"literal",value:".",description:'"."'},Nc=function(){return parseFloat(c())},Oc={type:"other",description:"digit"},Pc=/^[0-9]/,Qc={type:"class",value:"[0-9]",description:"[0-9]"},Rc=/^[ \t\r\n\f]/,Sc={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Tc={type:"other",description:"whitespace"},Uc=0,Vc=0,Wc=0,Xc={line:1,column:1,seenCR:!1},Yc=0,Zc=[],$c=0;if("startRule"in M){if(!(M.startRule in O))throw new Error("Can't start parsing from rule \""+M.startRule+'".');P=O[M.startRule]}if(L=P(),L!==N&&Uc===a.length)return L;throw L!==N&&Uc<a.length&&e({type:"end",description:"end of input"}),f(null,Zc,Yc)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],5:[function(a,b){"use strict";b.exports.literals=["and","action","challenge","member","level","point","tag","level up","with tag","times","within","in zone","for","minutes","minute","hours","hour","days","day","weeks","week","months","month","years","year","give"]},{}],6:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return a.substring(Gb,Fb)}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return Hb!==b&&(Hb>b&&(Hb=0,Ib={line:1,column:1,seenCR:!1}),c(Ib,Hb,b),Hb=b),Ib}function e(a){Jb>Fb||(Fb>Jb&&(Jb=Fb,Kb=[]),Kb.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var a;return a=h()}function h(){var b,c,d,f,g,h,j,k,m,n,t,u,w,x,y,z,B,C;if(b=Fb,a.substr(Fb,11)===E?(c=E,Fb+=11):(c=A,0===Lb&&e(F)),c!==A){for(d=[],f=v();f!==A;)d.push(f),f=v();if(d!==A)if(f=s(),f!==A){for(g=[],h=v();h!==A;)g.push(h),h=v();if(g!==A)if(h=q(),h!==A){for(j=[],k=v();k!==A;)j.push(k),k=v();if(j!==A)if(a.substr(Fb,12)===G?(k=G,Fb+=12):(k=A,0===Lb&&e(H)),k!==A){for(m=[],n=v();n!==A;)m.push(n),n=v();if(m!==A)if(n=r(),n!==A){for(t=[],u=v();u!==A;)t.push(u),u=v();if(t!==A)if(a.substr(Fb,7)===I?(u=I,Fb+=7):(u=A,0===Lb&&e(J)),u!==A){for(w=[],x=v();x!==A;)w.push(x),x=v();w!==A?(x=p(),x!==A?(Gb=b,c=K(f,h,n,x),b=c):(Fb=b,b=D)):(Fb=b,b=D)}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;if(b===A){if(b=Fb,a.substr(Fb,17)===L?(c=L,Fb+=17):(c=A,0===Lb&&e(M)),c!==A){for(d=[],f=v();f!==A;)d.push(f),f=v();if(d!==A)if(f=l(),f!==A){for(g=[],h=v();h!==A;)g.push(h),h=v();if(g!==A)if(a.substr(Fb,12)===N?(h=N,Fb+=12):(h=A,0===Lb&&e(O)),h!==A){for(j=[],k=v();k!==A;)j.push(k),k=v();if(j!==A)if(k=l(),k!==A){for(m=[],n=v();n!==A;)m.push(n),n=v();if(m!==A)if(a.substr(Fb,7)===I?(n=I,Fb+=7):(n=A,0===Lb&&e(J)),n!==A){for(t=[],u=v();u!==A;)t.push(u),u=v();t!==A?(u=p(),u!==A?(Gb=b,c=P(f,k,u),b=c):(Fb=b,b=D)):(Fb=b,b=D)}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;if(b===A){if(b=Fb,a.substr(Fb,17)===L?(c=L,Fb+=17):(c=A,0===Lb&&e(M)),c!==A){for(d=[],f=v();f!==A;)d.push(f),f=v();if(d!==A)if(f=l(),f!==A){for(g=[],h=v();h!==A;)g.push(h),h=v();if(g!==A)if(a.substr(Fb,12)===N?(h=N,Fb+=12):(h=A,0===Lb&&e(O)),h!==A){for(j=[],k=v();k!==A;)j.push(k),k=v();if(j!==A)if(k=l(),k!==A){for(m=[],n=v();n!==A;)m.push(n),n=v();if(m!==A)if(a.substr(Fb,9)===Q?(n=Q,Fb+=9):(n=A,0===Lb&&e(R)),n!==A){for(t=[],u=v();u!==A;)t.push(u),u=v();if(t!==A)if(u=i(),u!==A){for(w=[],x=Fb,y=[],z=v();z!==A;)y.push(z),z=v();if(y!==A)if(44===a.charCodeAt(Fb)?(z=S,Fb++):(z=A,0===Lb&&e(T)),z!==A){for(B=[],C=v();C!==A;)B.push(C),C=v();B!==A?(C=i(),C!==A?(y=[y,z,B,C],x=y):(Fb=x,x=D)):(Fb=x,x=D)}else Fb=x,x=D;else Fb=x,x=D;for(;x!==A;){for(w.push(x),x=Fb,y=[],z=v();z!==A;)y.push(z),z=v();if(y!==A)if(44===a.charCodeAt(Fb)?(z=S,Fb++):(z=A,0===Lb&&e(T)),z!==A){for(B=[],C=v();C!==A;)B.push(C),C=v();B!==A?(C=i(),C!==A?(y=[y,z,B,C],x=y):(Fb=x,x=D)):(Fb=x,x=D)}else Fb=x,x=D;else Fb=x,x=D}w!==A?(Gb=b,c=U(f,k,u,w),b=c):(Fb=b,b=D)}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;if(b===A){if(b=Fb,a.substr(Fb,21)===V?(c=V,Fb+=21):(c=A,0===Lb&&e(W)),c!==A){for(d=[],f=v();f!==A;)d.push(f),f=v();if(d!==A)if(f=o(),f!==A){for(g=[],h=v();h!==A;)g.push(h),h=v();if(g!==A)if(a.substr(Fb,7)===I?(h=I,Fb+=7):(h=A,0===Lb&&e(J)),h!==A){for(j=[],k=v();k!==A;)j.push(k),k=v();j!==A?(k=p(),k!==A?(Gb=b,c=X(f,k),b=c):(Fb=b,b=D)):(Fb=b,b=D)}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;if(b===A)if(b=Fb,a.substr(Fb,21)===V?(c=V,Fb+=21):(c=A,0===Lb&&e(W)),c!==A){for(d=[],f=v();f!==A;)d.push(f),f=v();if(d!==A)if(f=o(),f!==A){for(g=[],h=v();h!==A;)g.push(h),h=v();if(g!==A)if(a.substr(Fb,9)===Q?(h=Q,Fb+=9):(h=A,0===Lb&&e(R)),h!==A){for(j=[],k=v();k!==A;)j.push(k),k=v();if(j!==A)if(k=i(),k!==A){for(m=[],n=Fb,t=[],u=v();u!==A;)t.push(u),u=v();if(t!==A)if(44===a.charCodeAt(Fb)?(u=S,Fb++):(u=A,0===Lb&&e(T)),u!==A){for(w=[],x=v();x!==A;)w.push(x),x=v();w!==A?(x=i(),x!==A?(t=[t,u,w,x],n=t):(Fb=n,n=D)):(Fb=n,n=D)}else Fb=n,n=D;else Fb=n,n=D;for(;n!==A;){for(m.push(n),n=Fb,t=[],u=v();u!==A;)t.push(u),u=v();if(t!==A)if(44===a.charCodeAt(Fb)?(u=S,Fb++):(u=A,0===Lb&&e(T)),u!==A){for(w=[],x=v();x!==A;)w.push(x),x=v();w!==A?(x=i(),x!==A?(t=[t,u,w,x],n=t):(Fb=n,n=D)):(Fb=n,n=D)}else Fb=n,n=D;else Fb=n,n=D}m!==A?(Gb=b,c=Y(f,k,m),b=c):(Fb=b,b=D)}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D;else Fb=b,b=D}else Fb=b,b=D}}}return b}function i(){var b,c,d,f;return Lb++,b=Fb,c=n(),c!==A?(64===a.charCodeAt(Fb)?(d=$,Fb++):(d=A,0===Lb&&e(_)),d!==A?(f=n(),f!==A?(Gb=b,c=ab(c,f),b=c):(Fb=b,b=D)):(Fb=b,b=D)):(Fb=b,b=D),Lb--,b===A&&(c=A,0===Lb&&e(Z)),b}function j(){var b,c,d,f;if(b=Fb,34===a.charCodeAt(Fb)?(c=bb,Fb++):(c=A,0===Lb&&e(cb)),c!==A){for(d=[],db.test(a.charAt(Fb))?(f=a.charAt(Fb),Fb++):(f=A,0===Lb&&e(eb)),f===A&&(92===a.charCodeAt(Fb)?(f=fb,Fb++):(f=A,0===Lb&&e(gb)));f!==A;)d.push(f),db.test(a.charAt(Fb))?(f=a.charAt(Fb),Fb++):(f=A,0===Lb&&e(eb)),f===A&&(92===a.charCodeAt(Fb)?(f=fb,Fb++):(f=A,0===Lb&&e(gb)));d!==A?(34===a.charCodeAt(Fb)?(f=bb,Fb++):(f=A,0===Lb&&e(cb)),f!==A?(Gb=b,c=hb(d),b=c):(Fb=b,b=D)):(Fb=b,b=D)}else Fb=b,b=D;return b}function k(){var b,c,d,f;if(b=Fb,39===a.charCodeAt(Fb)?(c=ib,Fb++):(c=A,0===Lb&&e(jb)),c!==A){for(d=[],kb.test(a.charAt(Fb))?(f=a.charAt(Fb),Fb++):(f=A,0===Lb&&e(lb)),f===A&&(92===a.charCodeAt(Fb)?(f=fb,Fb++):(f=A,0===Lb&&e(gb)));f!==A;)d.push(f),kb.test(a.charAt(Fb))?(f=a.charAt(Fb),Fb++):(f=A,0===Lb&&e(lb)),f===A&&(92===a.charCodeAt(Fb)?(f=fb,Fb++):(f=A,0===Lb&&e(gb)));d!==A?(39===a.charCodeAt(Fb)?(f=ib,Fb++):(f=A,0===Lb&&e(jb)),f!==A?(Gb=b,c=hb(d),b=c):(Fb=b,b=D)):(Fb=b,b=D)}else Fb=b,b=D;return b}function l(){var a;return a=j(),a===A&&(a=k()),a}function m(){var b;return mb.test(a.charAt(Fb))?(b=a.charAt(Fb),Fb++):(b=A,0===Lb&&e(nb)),b}function n(){var a,b,c;if(a=Fb,b=[],c=m(),c!==A)for(;c!==A;)b.push(c),c=m();else b=D;return b!==A&&(Gb=a,b=hb(b)),a=b}function o(){var a,b;return Lb++,a=n(),Lb--,a===A&&(b=A,0===Lb&&e(ob)),a}function p(){var a,b;return Lb++,a=n(),Lb--,a===A&&(b=A,0===Lb&&e(pb)),a}function q(){var a,b;return Lb++,a=n(),Lb--,a===A&&(b=A,0===Lb&&e(qb)),a}function r(){var a,b;return Lb++,a=n(),Lb--,a===A&&(b=A,0===Lb&&e(rb)),a}function s(){var b,c,d,f,g,h,i;if(Lb++,b=Fb,ub.test(a.charAt(Fb))?(c=a.charAt(Fb),Fb++):(c=A,0===Lb&&e(vb)),c===A&&(c=tb),c!==A){for(d=Fb,f=[],g=t();g!==A;)f.push(g),g=t();if(f!==A)if(46===a.charCodeAt(Fb)?(g=wb,Fb++):(g=A,0===Lb&&e(xb)),g!==A){if(h=[],i=t(),i!==A)for(;i!==A;)h.push(i),i=t();else h=D;h!==A?(f=[f,g,h],d=f):(Fb=d,d=D)}else Fb=d,d=D;else Fb=d,d=D;if(d===A)if(d=[],f=t(),f!==A)for(;f!==A;)d.push(f),f=t();else d=D;d!==A?(Gb=b,c=yb(),b=c):(Fb=b,b=D)}else Fb=b,b=D;return Lb--,b===A&&(c=A,0===Lb&&e(sb)),b}function t(){var b,c;return Lb++,Ab.test(a.charAt(Fb))?(b=a.charAt(Fb),Fb++):(b=A,0===Lb&&e(Bb)),Lb--,b===A&&(c=A,0===Lb&&e(zb)),b}function u(){var b,c;if(b=[],Cb.test(a.charAt(Fb))?(c=a.charAt(Fb),Fb++):(c=A,0===Lb&&e(Db)),c!==A)for(;c!==A;)b.push(c),Cb.test(a.charAt(Fb))?(c=a.charAt(Fb),Fb++):(c=A,0===Lb&&e(Db));else b=D;return b}function v(){var a,b;return Lb++,a=u(),Lb--,a===A&&(b=A,0===Lb&&e(Eb)),a}function w(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function x(a,b,c){return(null!==a?[a]:[]).concat(w(b,c))}var y,z=arguments.length>1?arguments[1]:{},A={},B={start:g},C=g,D=A,E="give reward",F={type:"literal",value:"give reward",description:'"give reward"'},G="from program",H={type:"literal",value:"from program",description:'"from program"'},I="to list",J={type:"literal",value:"to list",description:'"to list"'},K=function(a,b,c,d){return{action:"giveReward",rewardCode:b,quantity:a,programCode:c,listCode:d}},L="send message text",M={type:"literal",value:"send message text",description:'"send message text"'},N="with subject",O={type:"literal",value:"with subject",description:'"with subject"'},P=function(a,b,c){return{action:"sendTextMessage",messageText:a,messageSubject:b,listCode:c}},Q="to emails",R={type:"literal",value:"to emails",description:'"to emails"'},S=",",T={type:"literal",value:",",description:'","'},U=function(a,b,c,d){return{action:"sendTextMessage",messageText:a,messageSubject:b,emails:x(c,d,3)}},V="send message template",W={type:"literal",value:"send message template",description:'"send message template"'},X=function(a,b){return{action:"sendTemplateMessage",templateMessageCode:a,listCode:b}},Y=function(a,b,c){return{action:"sendTemplateMessage",templateMessageCode:a,emails:x(b,c,3)}},Z={type:"other",description:"email"},$="@",_={type:"literal",value:"@",description:'"@"'},ab=function(a,b){return a+"@"+b},bb='"',cb={type:"literal",value:'"',description:'"\\""'},db=/^[^\n\r\f\\"]/,eb={type:"class",value:'[^\\n\\r\\f\\\\"]',description:'[^\\n\\r\\f\\\\"]'},fb="\\",gb={type:"literal",value:"\\",description:'"\\\\"'},hb=function(a){return a.join("")},ib="'",jb={type:"literal",value:"'",description:'"\'"'},kb=/^[^\n\r\f\\']/,lb={type:"class",value:"[^\\n\\r\\f\\\\']",description:"[^\\n\\r\\f\\\\']"},mb=/^[_a-z0-9\-.]/i,nb={type:"class",value:"[_a-z0-9\\-.]i",description:"[_a-z0-9\\-.]i"},ob={type:"other",description:"templateMessageCode"},pb={type:"other",description:"listCode"},qb={type:"other",description:"rewardCode"},rb={type:"other",description:"programCode"},sb={type:"other",description:"number"},tb=null,ub=/^[+\-]/,vb={type:"class",value:"[+\\-]",description:"[+\\-]"},wb=".",xb={type:"literal",value:".",description:'"."'},yb=function(){return parseFloat(c())},zb={type:"other",description:"digit"},Ab=/^[0-9]/,Bb={type:"class",value:"[0-9]",description:"[0-9]"},Cb=/^[ \t\r\n\f]/,Db={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Eb={type:"other",description:"whitespace"},Fb=0,Gb=0,Hb=0,Ib={line:1,column:1,seenCR:!1},Jb=0,Kb=[],Lb=0;if("startRule"in z){if(!(z.startRule in B))throw new Error("Can't start parsing from rule \""+z.startRule+'".');C=B[z.startRule]}if(y=C(),y!==A&&Fb===a.length)return y;throw y!==A&&Fb<a.length&&e({type:"end",description:"end of input"}),f(null,Kb,Jb)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],7:[function(a,b){"use strict";b.exports.literals=['give reward"',"from program","to list","send message text","with subject","to emails","send message template"]},{}],8:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return a.substring($b,Zb)}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return _b!==b&&(_b>b&&(_b=0,ac={line:1,column:1,seenCR:!1}),c(ac,_b,b),_b=b),ac}function e(a){bc>Zb||(Zb>bc&&(bc=Zb,cc=[]),cc.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var a;return a=h()}function h(){var b,c,d,f,g,h,j,k;if(b=Zb,c=i(),c!==w){for(d=[],f=Zb,g=[],h=r();h!==w;)g.push(h),h=r();if(g!==w)if(a.substr(Zb,3)===A?(h=A,Zb+=3):(h=w,0===dc&&e(B)),h!==w){for(j=[],k=r();k!==w;)j.push(k),k=r();j!==w?(k=i(),k!==w?(g=[g,h,j,k],f=g):(Zb=f,f=z)):(Zb=f,f=z)}else Zb=f,f=z;else Zb=f,f=z;for(;f!==w;){for(d.push(f),f=Zb,g=[],h=r();h!==w;)g.push(h),h=r();if(g!==w)if(a.substr(Zb,3)===A?(h=A,Zb+=3):(h=w,0===dc&&e(B)),h!==w){for(j=[],k=r();k!==w;)j.push(k),k=r();j!==w?(k=i(),k!==w?(g=[g,h,j,k],f=g):(Zb=f,f=z)):(Zb=f,f=z)}else Zb=f,f=z;else Zb=f,f=z}if(d!==w){for(f=[],g=r();g!==w;)f.push(g),g=r();if(f!==w)if(a.substr(Zb,2)===C?(g=C,Zb+=2):(g=w,0===dc&&e(D)),g!==w){for(h=[],j=r();j!==w;)h.push(j),j=r();h!==w?(j=m(),j!==w?($b=b,c=E(c,d,j),b=c):(Zb=b,b=z)):(Zb=b,b=z)}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z}else Zb=b,b=z;return b}function i(){var b,c,d,f,g,h,i,k,l,m,p;if(b=Zb,c=o(),c!==w){for(d=[],f=r();f!==w;)d.push(f),f=r();if(d!==w)if(f=j(),f!==w){for(g=[],h=r();h!==w;)g.push(h),h=r();if(g!==w)if(a.substr(Zb,5)===F?(h=F,Zb+=5):(h=w,0===dc&&e(G)),h===w&&(a.substr(Zb,6)===H?(h=H,Zb+=6):(h=w,0===dc&&e(I))),h!==w){for(i=[],k=r();k!==w;)i.push(k),k=r();i!==w?(a.substr(Zb,5)===J?(k=J,Zb+=5):(k=w,0===dc&&e(K)),k===w&&(a.substr(Zb,7)===L?(k=L,Zb+=7):(k=w,0===dc&&e(M)),k===w&&(a.substr(Zb,5)===N?(k=N,Zb+=5):(k=w,0===dc&&e(O)),k===w&&(a.substr(Zb,3)===P?(k=P,Zb+=3):(k=w,0===dc&&e(Q))))),k!==w?($b=b,c=R(c,f,h,k),b=c):(Zb=b,b=z)):(Zb=b,b=z)}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z;if(b===w){if(b=Zb,a.substr(Zb,4)===S?(c=S,Zb+=4):(c=w,0===dc&&e(T)),c!==w){for(d=[],f=r();f!==w;)d.push(f),f=r();if(d!==w)if(f=n(),f!==w){for(g=[],h=r();h!==w;)g.push(h),h=r();if(g!==w)if(a.substr(Zb,12)===U?(h=U,Zb+=12):(h=w,0===dc&&e(V)),h!==w){for(i=[],k=r();k!==w;)i.push(k),k=r();if(i!==w)if(a.substr(Zb,2)===W?(k=W,Zb+=2):(k=w,0===dc&&e(X)),k===w&&(a.substr(Zb,2)===Y?(k=Y,Zb+=2):(k=w,0===dc&&e(Z)),k===w&&(61===a.charCodeAt(Zb)?(k=$,Zb++):(k=w,0===dc&&e(_)),k===w&&(62===a.charCodeAt(Zb)?(k=ab,Zb++):(k=w,0===dc&&e(bb)),k===w&&(60===a.charCodeAt(Zb)?(k=cb,Zb++):(k=w,0===dc&&e(db)))))),k!==w){for(l=[],m=r();m!==w;)l.push(m),m=r();l!==w?(m=o(),m!==w?(37===a.charCodeAt(Zb)?(p=fb,Zb++):(p=w,0===dc&&e(gb)),p===w&&(p=eb),p!==w?($b=b,c=hb(f,k,m,p),b=c):(Zb=b,b=z)):(Zb=b,b=z)):(Zb=b,b=z)}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z;if(b===w)if(b=Zb,a.substr(Zb,12)===U?(c=U,Zb+=12):(c=w,0===dc&&e(V)),c!==w){for(d=[],f=r();f!==w;)d.push(f),f=r();if(d!==w)if(a.substr(Zb,2)===W?(f=W,Zb+=2):(f=w,0===dc&&e(X)),f===w&&(a.substr(Zb,2)===Y?(f=Y,Zb+=2):(f=w,0===dc&&e(Z)),f===w&&(61===a.charCodeAt(Zb)?(f=$,Zb++):(f=w,0===dc&&e(_)),f===w&&(62===a.charCodeAt(Zb)?(f=ab,Zb++):(f=w,0===dc&&e(bb)),f===w&&(60===a.charCodeAt(Zb)?(f=cb,Zb++):(f=w,0===dc&&e(db)))))),f!==w){for(g=[],h=r();h!==w;)g.push(h),h=r();g!==w?(h=o(),h!==w?(37===a.charCodeAt(Zb)?(i=fb,Zb++):(i=w,0===dc&&e(gb)),i===w&&(i=eb),i!==w?($b=b,c=ib(f,h,i),b=c):(Zb=b,b=z)):(Zb=b,b=z)):(Zb=b,b=z)}else Zb=b,b=z;else Zb=b,b=z}else Zb=b,b=z}return b}function j(){var b,c;return b=Zb,a.substr(Zb,7)===jb?(c=jb,Zb+=7):(c=w,0===dc&&e(kb)),c===w&&(a.substr(Zb,6)===lb?(c=lb,Zb+=6):(c=w,0===dc&&e(mb)),c===w&&(a.substr(Zb,5)===nb?(c=nb,Zb+=5):(c=w,0===dc&&e(ob)),c===w&&(a.substr(Zb,4)===pb?(c=pb,Zb+=4):(c=w,0===dc&&e(qb)),c===w&&(a.substr(Zb,4)===rb?(c=rb,Zb+=4):(c=w,0===dc&&e(sb)),c===w&&(a.substr(Zb,3)===tb?(c=tb,Zb+=3):(c=w,0===dc&&e(ub)),c===w&&(a.substr(Zb,5)===vb?(c=vb,Zb+=5):(c=w,0===dc&&e(wb)),c===w&&(a.substr(Zb,4)===xb?(c=xb,Zb+=4):(c=w,0===dc&&e(yb)),c===w&&(a.substr(Zb,6)===zb?(c=zb,Zb+=6):(c=w,0===dc&&e(Ab)),c===w&&(a.substr(Zb,5)===Bb?(c=Bb,Zb+=5):(c=w,0===dc&&e(Cb)),c===w&&(a.substr(Zb,5)===Db?(c=Db,Zb+=5):(c=w,0===dc&&e(Eb)),c===w&&(a.substr(Zb,4)===Fb?(c=Fb,Zb+=4):(c=w,0===dc&&e(Gb))))))))))))),c!==w&&($b=b,c=Hb(c)),b=c}function k(){var b;return Jb.test(a.charAt(Zb))?(b=a.charAt(Zb),Zb++):(b=w,0===dc&&e(Kb)),b}function l(){var a,b,c;if(a=Zb,b=[],c=k(),c!==w)for(;c!==w;)b.push(c),c=k();else b=z;return b!==w&&($b=a,b=Ib(b)),a=b}function m(){var a,b;return dc++,a=l(),dc--,a===w&&(b=w,0===dc&&e(Lb)),a}function n(){var a,b;return dc++,a=l(),dc--,a===w&&(b=w,0===dc&&e(Mb)),a}function o(){var b,c,d,f,g,h,i;if(dc++,b=Zb,Ob.test(a.charAt(Zb))?(c=a.charAt(Zb),Zb++):(c=w,0===dc&&e(Pb)),c===w&&(c=eb),c!==w){for(d=Zb,f=[],g=p();g!==w;)f.push(g),g=p();if(f!==w)if(46===a.charCodeAt(Zb)?(g=Qb,Zb++):(g=w,0===dc&&e(Rb)),g!==w){if(h=[],i=p(),i!==w)for(;i!==w;)h.push(i),i=p();else h=z;h!==w?(f=[f,g,h],d=f):(Zb=d,d=z)}else Zb=d,d=z;else Zb=d,d=z;if(d===w)if(d=[],f=p(),f!==w)for(;f!==w;)d.push(f),f=p();else d=z;d!==w?($b=b,c=Sb(),b=c):(Zb=b,b=z)}else Zb=b,b=z;return dc--,b===w&&(c=w,0===dc&&e(Nb)),b}function p(){var b,c;return dc++,Ub.test(a.charAt(Zb))?(b=a.charAt(Zb),Zb++):(b=w,0===dc&&e(Vb)),dc--,b===w&&(c=w,0===dc&&e(Tb)),b}function q(){var b,c;if(b=[],Wb.test(a.charAt(Zb))?(c=a.charAt(Zb),Zb++):(c=w,0===dc&&e(Xb)),c!==w)for(;c!==w;)b.push(c),Wb.test(a.charAt(Zb))?(c=a.charAt(Zb),Zb++):(c=w,0===dc&&e(Xb));else b=z;return b}function r(){var a,b;return dc++,a=q(),dc--,a===w&&(b=w,0===dc&&e(Yb)),a}function s(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function t(a,b,c){return(null!==a?[a]:[]).concat(s(b,c))}var u,v=arguments.length>1?arguments[1]:{},w={},x={start:g},y=g,z=w,A="and",B={type:"literal",value:"and",description:'"and"'},C="of",D={type:"literal",value:"of",description:'"of"'},E=function(a,b,c){return{eventCode:c,conditions:t(a,b,3)}},F="after",G={type:"literal",value:"after",description:'"after"'},H="before",I={type:"literal",value:"before",description:'"before"'},J="sales",K={type:"literal",value:"sales",description:'"sales"'},L="curtain",M={type:"literal",value:"curtain",description:'"curtain"'},N="start",O={type:"literal",value:"start",description:'"start"'},P="end",Q={type:"literal",value:"end",description:'"end"'},R=function(a,b,c,d){return{type:"time",duration:a,durationScope:b,qualifier:c,eventQualifier:d}},S="tier",T={type:"literal",value:"tier",description:'"tier"'},U="ticket sales",V={type:"literal",value:"ticket sales",description:'"ticket sales"'},W=">=",X={type:"literal",value:">=",description:'">="'},Y="<=",Z={type:"literal",value:"<=",description:'"<="'},$="=",_={type:"literal",value:"=",description:'"="'},ab=">",bb={type:"literal",value:">",description:'">"'},cb="<",db={type:"literal",value:"<",description:'"<"'},eb=null,fb="%",gb={type:"literal",value:"%",description:'"%"'},hb=function(a,b,c,d){return{type:"tierSales",tierCode:a,operator:b,value:c,percent:null!==d}},ib=function(a,b,c){return{type:"eventSales",operator:a,value:b,percent:null!==c}},jb="minutes",kb={type:"literal",value:"minutes",description:'"minutes"'},lb="minute",mb={type:"literal",value:"minute",description:'"minute"'},nb="hours",ob={type:"literal",value:"hours",description:'"hours"'},pb="hour",qb={type:"literal",value:"hour",description:'"hour"'},rb="days",sb={type:"literal",value:"days",description:'"days"'},tb="day",ub={type:"literal",value:"day",description:'"day"'},vb="weeks",wb={type:"literal",value:"weeks",description:'"weeks"'},xb="week",yb={type:"literal",value:"week",description:'"week"'},zb="months",Ab={type:"literal",value:"months",description:'"months"'},Bb="month",Cb={type:"literal",value:"month",description:'"month"'},Db="years",Eb={type:"literal",value:"years",description:'"years"'},Fb="year",Gb={type:"literal",value:"year",description:'"year"'},Hb=function(a){return a.replace(/s/g,"")},Ib=function(a){return a.join("")},Jb=/^[_a-z0-9\-.]/i,Kb={type:"class",value:"[_a-z0-9\\-.]i",description:"[_a-z0-9\\-.]i"},Lb={type:"other",description:"eventCode"},Mb={type:"other",description:"tierCode"},Nb={type:"other",description:"number"},Ob=/^[+\-]/,Pb={type:"class",value:"[+\\-]",description:"[+\\-]"},Qb=".",Rb={type:"literal",value:".",description:'"."'},Sb=function(){return parseFloat(c())},Tb={type:"other",description:"digit"},Ub=/^[0-9]/,Vb={type:"class",value:"[0-9]",description:"[0-9]"},Wb=/^[ \t\r\n\f]/,Xb={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Yb={type:"other",description:"whitespace"},Zb=0,$b=0,_b=0,ac={line:1,column:1,seenCR:!1},bc=0,cc=[],dc=0;if("startRule"in v){if(!(v.startRule in x))throw new Error("Can't start parsing from rule \""+v.startRule+'".');y=x[v.startRule]}if(u=y(),u!==w&&Zb===a.length)return u;throw u!==w&&Zb<a.length&&e({type:"end",description:"end of input"}),f(null,cc,bc)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],9:[function(a,b){"use strict";b.exports.literals=["and","of","after","before","sales","curtain","start","end","tier","ticket sales","minutes","minute","hours","hour","days","day","weeks","week","months","month","years","year"]},{}],10:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return a.substring(zd,yd)}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return Ad!==b&&(Ad>b&&(Ad=0,Bd={line:1,column:1,seenCR:!1}),c(Bd,Ad,b),Ad=b),Bd}function e(a){Cd>yd||(yd>Cd&&(Cd=yd,Dd=[]),Dd.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var a,b;return a=h(),a===Q&&(a=yd,b=k(),b!==Q&&(zd=a,b=T(b)),a=b),a}function h(){var b,c,d,f,g,h,j,l;if(b=yd,c=i(),c!==Q){for(d=[],f=yd,g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(a.substr(yd,3)===V?(h=V,yd+=3):(h=Q,0===Ed&&e(W)),h!==Q){for(j=[],l=D();l!==Q;)j.push(l),l=D();j!==Q?(l=i(),l!==Q?(g=[g,h,j,l],f=g):(yd=f,f=U)):(yd=f,f=U)}else yd=f,f=U;else yd=f,f=U;for(;f!==Q;){for(d.push(f),f=yd,g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(a.substr(yd,3)===V?(h=V,yd+=3):(h=Q,0===Ed&&e(W)),h!==Q){for(j=[],l=D();l!==Q;)j.push(l),l=D();j!==Q?(l=i(),l!==Q?(g=[g,h,j,l],f=g):(yd=f,f=U)):(yd=f,f=U)}else yd=f,f=U;else yd=f,f=U}if(d!==Q){for(f=[],g=D();g!==Q;)f.push(g),g=D();f!==Q?(g=k(),g===Q&&(g=X),g!==Q?(zd=b,c=Y(c,d,g),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U}else yd=b,b=U;return b}function i(){var b,c,d,f,g,h,i,k,n,o,q,r,s,z;if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,7)===_?(f=_,yd+=7):(f=Q,0===Ed&&e(ab)),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(h=t(),h!==Q){for(i=[],k=D();k!==Q;)i.push(k),k=D();if(i!==Q)if(a.substr(yd,2)===bb?(k=bb,yd+=2):(k=Q,0===Ed&&e(cb)),k===Q&&(a.substr(yd,2)===db?(k=db,yd+=2):(k=Q,0===Ed&&e(eb)),k===Q&&(61===a.charCodeAt(yd)?(k=fb,yd++):(k=Q,0===Ed&&e(gb)),k===Q&&(62===a.charCodeAt(yd)?(k=hb,yd++):(k=Q,0===Ed&&e(ib)),k===Q&&(60===a.charCodeAt(yd)?(k=jb,yd++):(k=Q,0===Ed&&e(kb)))))),k!==Q){for(n=[],o=D();o!==Q;)n.push(o),o=D();n!==Q?(o=A(),o!==Q?(zd=b,c=lb(c,f,h,k,o),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,5)===mb?(f=mb,yd+=5):(f=Q,0===Ed&&e(nb)),f===Q&&(a.substr(yd,6)===ob?(f=ob,yd+=6):(f=Q,0===Ed&&e(pb))),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(h=w(),h!==Q){for(i=[],k=D();k!==Q;)i.push(k),k=D();if(i!==Q)if(a.substr(yd,2)===bb?(k=bb,yd+=2):(k=Q,0===Ed&&e(cb)),k===Q&&(a.substr(yd,2)===db?(k=db,yd+=2):(k=Q,0===Ed&&e(eb)),k===Q&&(61===a.charCodeAt(yd)?(k=fb,yd++):(k=Q,0===Ed&&e(gb)),k===Q&&(62===a.charCodeAt(yd)?(k=hb,yd++):(k=Q,0===Ed&&e(ib)),k===Q&&(60===a.charCodeAt(yd)?(k=jb,yd++):(k=Q,0===Ed&&e(kb)))))),k!==Q){for(n=[],o=D();o!==Q;)n.push(o),o=D();n!==Q?(o=A(),o!==Q?(zd=b,c=qb(c,f,h,k,o),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,3)===rb?(f=rb,yd+=3):(f=Q,0===Ed&&e(sb)),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(h=x(),h!==Q){for(i=[],k=D();k!==Q;)i.push(k),k=D();if(i!==Q)if(a.substr(yd,2)===bb?(k=bb,yd+=2):(k=Q,0===Ed&&e(cb)),k===Q&&(a.substr(yd,2)===db?(k=db,yd+=2):(k=Q,0===Ed&&e(eb)),k===Q&&(61===a.charCodeAt(yd)?(k=fb,yd++):(k=Q,0===Ed&&e(gb)),k===Q&&(62===a.charCodeAt(yd)?(k=hb,yd++):(k=Q,0===Ed&&e(ib)),k===Q&&(60===a.charCodeAt(yd)?(k=jb,yd++):(k=Q,0===Ed&&e(kb)))))),k!==Q){for(n=[],o=D();o!==Q;)n.push(o),o=D();n!==Q?(o=A(),o!==Q?(zd=b,c=tb(c,f,h,k,o),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,7)===ub?(f=ub,yd+=7):(f=Q,0===Ed&&e(vb)),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(a.substr(yd,4)===wb?(h=wb,yd+=4):(h=Q,0===Ed&&e(xb)),h!==Q){for(i=[],k=D();k!==Q;)i.push(k),k=D();if(i!==Q)if(k=A(),k!==Q){for(n=[],o=D();o!==Q;)n.push(o),o=D();n!==Q?(o=m(),o!==Q?(zd=b,c=yb(c,h,k,o),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,7)===ub?(f=ub,yd+=7):(f=Q,0===Ed&&e(vb)),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(a.substr(yd,7)===zb?(h=zb,yd+=7):(h=Q,0===Ed&&e(Ab)),h!==Q){for(i=[],k=D();k!==Q;)i.push(k),k=D();if(i!==Q)if(k=L(),k!==Q){for(n=[],o=D();o!==Q;)n.push(o),o=D();n!==Q?(o=L(),o!==Q?(zd=b,c=Bb(c,h,k,o),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,4)===Cb?(f=Cb,yd+=4):(f=Q,0===Ed&&e(Db)),f===Q&&(a.substr(yd,5)===Eb?(f=Eb,yd+=5):(f=Q,0===Ed&&e(Fb)),f===Q&&(a.substr(yd,3)===Gb?(f=Gb,yd+=3):(f=Q,0===Ed&&e(Hb)),f===Q&&(a.substr(yd,7)===Ib?(f=Ib,yd+=7):(f=Q,0===Ed&&e(Jb))))),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(61===a.charCodeAt(yd)?(h=fb,yd++):(h=Q,0===Ed&&e(gb)),h===Q&&(a.substr(yd,2)===Kb?(h=Kb,yd+=2):(h=Q,0===Ed&&e(Lb))),h!==Q){for(i=[],k=D();k!==Q;)i.push(k),k=D();i!==Q?(k=p(),k!==Q?(zd=b,c=Mb(c,f,h,k),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,6)===Z?(c=Z,yd+=6):(c=Q,0===Ed&&e($)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,7)===Nb?(f=Nb,yd+=7):(f=Q,0===Ed&&e(Ob)),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(h=y(),h!==Q){for(i=[],k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(44===a.charCodeAt(yd)?(o=Pb,yd++):(o=Q,0===Ed&&e(Qb)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();q!==Q?(r=y(),r!==Q?(n=[n,o,q,r],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U;for(;k!==Q;){for(i.push(k),k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(44===a.charCodeAt(yd)?(o=Pb,yd++):(o=Q,0===Ed&&e(Qb)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();q!==Q?(r=y(),r!==Q?(n=[n,o,q,r],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U}if(i!==Q){for(k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(a.substr(yd,3)===Rb?(o=Rb,yd+=3):(o=Q,0===Ed&&e(Sb)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();if(q!==Q)if(r=A(),r!==Q){for(s=[],z=D();z!==Q;)s.push(z),z=D();s!==Q?(z=m(),z!==Q?(n=[n,o,q,r,s,z],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U}else yd=k,k=U;else yd=k,k=U;k===Q&&(k=X),k!==Q?(zd=b,c=Tb(c,h,i,k),b=c):(yd=b,b=U)}else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q){if(b=yd,a.substr(yd,9)===Ub?(c=Ub,yd+=9):(c=Q,0===Ed&&e(Vb)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(f=u(),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q){if(h=yd,a.substr(yd,4)===Wb?(i=Wb,yd+=4):(i=Q,0===Ed&&e(Xb)),i!==Q){for(k=[],n=D();n!==Q;)k.push(n),n=D();
k!==Q?(n=l(),n!==Q?(i=[i,k,n],h=i):(yd=h,h=U)):(yd=h,h=U)}else yd=h,h=U;if(h===Q&&(h=X),h!==Q){for(i=[],k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(a.substr(yd,3)===V?(o=V,yd+=3):(o=Q,0===Ed&&e(W)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();q!==Q?(r=l(),r!==Q?(n=[n,o,q,r],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U;for(;k!==Q;){for(i.push(k),k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(a.substr(yd,3)===V?(o=V,yd+=3):(o=Q,0===Ed&&e(W)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();q!==Q?(r=l(),r!==Q?(n=[n,o,q,r],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U}i!==Q?(zd=b,c=Yb(c,f,h,i),b=c):(yd=b,b=U)}else yd=b,b=U}else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;if(b===Q)if(b=yd,a.substr(yd,6)===Zb?(c=Zb,yd+=6):(c=Q,0===Ed&&e($b)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(f=v(),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q){if(h=yd,a.substr(yd,4)===Wb?(i=Wb,yd+=4):(i=Q,0===Ed&&e(Xb)),i!==Q){for(k=[],n=D();n!==Q;)k.push(n),n=D();k!==Q?(n=l(),n!==Q?(i=[i,k,n],h=i):(yd=h,h=U)):(yd=h,h=U)}else yd=h,h=U;if(h===Q&&(h=X),h!==Q){for(i=[],k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(a.substr(yd,3)===V?(o=V,yd+=3):(o=Q,0===Ed&&e(W)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();q!==Q?(r=l(),r!==Q?(n=[n,o,q,r],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U;for(;k!==Q;){for(i.push(k),k=yd,n=[],o=D();o!==Q;)n.push(o),o=D();if(n!==Q)if(a.substr(yd,3)===V?(o=V,yd+=3):(o=Q,0===Ed&&e(W)),o!==Q){for(q=[],r=D();r!==Q;)q.push(r),r=D();q!==Q?(r=l(),r!==Q?(n=[n,o,q,r],k=n):(yd=k,k=U)):(yd=k,k=U)}else yd=k,k=U;else yd=k,k=U}if(i!==Q){for(k=[],n=yd,o=[],q=D();q!==Q;)o.push(q),q=D();for(o!==Q?(q=j(),q!==Q?(o=[o,q],n=o):(yd=n,n=U)):(yd=n,n=U);n!==Q;){for(k.push(n),n=yd,o=[],q=D();q!==Q;)o.push(q),q=D();o!==Q?(q=j(),q!==Q?(o=[o,q],n=o):(yd=n,n=U)):(yd=n,n=U)}k!==Q?(zd=b,c=_b(c,f,h,i,k),b=c):(yd=b,b=U)}else yd=b,b=U}else yd=b,b=U}else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U}}}}}}}return b}function j(){var b,c,d,f,g,h,i,j,k,l;if(b=yd,a.substr(yd,7)===Nb?(c=Nb,yd+=7):(c=Q,0===Ed&&e(Ob)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(f=y(),f!==Q){for(g=[],h=yd,i=[],j=D();j!==Q;)i.push(j),j=D();if(i!==Q)if(44===a.charCodeAt(yd)?(j=Pb,yd++):(j=Q,0===Ed&&e(Qb)),j!==Q){for(k=[],l=D();l!==Q;)k.push(l),l=D();k!==Q?(l=y(),l!==Q?(i=[i,j,k,l],h=i):(yd=h,h=U)):(yd=h,h=U)}else yd=h,h=U;else yd=h,h=U;for(;h!==Q;){for(g.push(h),h=yd,i=[],j=D();j!==Q;)i.push(j),j=D();if(i!==Q)if(44===a.charCodeAt(yd)?(j=Pb,yd++):(j=Q,0===Ed&&e(Qb)),j!==Q){for(k=[],l=D();l!==Q;)k.push(l),l=D();k!==Q?(l=y(),l!==Q?(i=[i,j,k,l],h=i):(yd=h,h=U)):(yd=h,h=U)}else yd=h,h=U;else yd=h,h=U}g!==Q?(zd=b,c=ac(f,g),b=c):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;return b}function k(){var b,c,d,f,g,h,i,j,k,l;if(b=yd,a.substr(yd,8)===bc?(c=bc,yd+=8):(c=Q,0===Ed&&e(cc)),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(f=A(),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();if(g!==Q)if(a.substr(yd,9)===dc?(h=dc,yd+=9):(h=Q,0===Ed&&e(ec)),h!==Q){for(i=[],j=D();j!==Q;)i.push(j),j=D();if(i!==Q)if(a.substr(yd,6)===ob?(j=ob,yd+=6):(j=Q,0===Ed&&e(pb)),j===Q&&(a.substr(yd,5)===mb?(j=mb,yd+=5):(j=Q,0===Ed&&e(nb))),j!==Q){for(k=[],l=D();l!==Q;)k.push(l),l=D();k!==Q?(l=w(),l!==Q?(zd=b,c=fc(f,j,l),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;return b}function l(){var b,c,d,f,g,h;if(b=yd,c=z(),c!==Q){for(d=[],f=D();f!==Q;)d.push(f),f=D();if(d!==Q)if(a.substr(yd,2)===bb?(f=bb,yd+=2):(f=Q,0===Ed&&e(cb)),f===Q&&(a.substr(yd,2)===db?(f=db,yd+=2):(f=Q,0===Ed&&e(eb)),f===Q&&(61===a.charCodeAt(yd)?(f=fb,yd++):(f=Q,0===Ed&&e(gb)),f===Q&&(62===a.charCodeAt(yd)?(f=hb,yd++):(f=Q,0===Ed&&e(ib)),f===Q&&(60===a.charCodeAt(yd)?(f=jb,yd++):(f=Q,0===Ed&&e(kb)))))),f!==Q){for(g=[],h=D();h!==Q;)g.push(h),h=D();g!==Q?(h=q(),h!==Q?(zd=b,c=gc(c,f,h),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U}else yd=b,b=U;return b}function m(){var b,c;return b=yd,a.substr(yd,7)===hc?(c=hc,yd+=7):(c=Q,0===Ed&&e(ic)),c===Q&&(a.substr(yd,6)===jc?(c=jc,yd+=6):(c=Q,0===Ed&&e(kc)),c===Q&&(a.substr(yd,5)===lc?(c=lc,yd+=5):(c=Q,0===Ed&&e(mc)),c===Q&&(a.substr(yd,4)===nc?(c=nc,yd+=4):(c=Q,0===Ed&&e(oc)),c===Q&&(a.substr(yd,4)===pc?(c=pc,yd+=4):(c=Q,0===Ed&&e(qc)),c===Q&&(a.substr(yd,3)===rc?(c=rc,yd+=3):(c=Q,0===Ed&&e(sc)),c===Q&&(a.substr(yd,5)===tc?(c=tc,yd+=5):(c=Q,0===Ed&&e(uc)),c===Q&&(a.substr(yd,4)===vc?(c=vc,yd+=4):(c=Q,0===Ed&&e(wc)),c===Q&&(a.substr(yd,6)===xc?(c=xc,yd+=6):(c=Q,0===Ed&&e(yc)),c===Q&&(a.substr(yd,5)===zc?(c=zc,yd+=5):(c=Q,0===Ed&&e(Ac)),c===Q&&(a.substr(yd,5)===Bc?(c=Bc,yd+=5):(c=Q,0===Ed&&e(Cc)),c===Q&&(a.substr(yd,4)===Dc?(c=Dc,yd+=4):(c=Q,0===Ed&&e(Ec))))))))))))),c!==Q&&(zd=b,c=Fc(c)),b=c}function n(){var b,c,d,f;if(b=yd,34===a.charCodeAt(yd)?(c=Gc,yd++):(c=Q,0===Ed&&e(Hc)),c!==Q){for(d=[],Ic.test(a.charAt(yd))?(f=a.charAt(yd),yd++):(f=Q,0===Ed&&e(Jc)),f===Q&&(92===a.charCodeAt(yd)?(f=Kc,yd++):(f=Q,0===Ed&&e(Lc)));f!==Q;)d.push(f),Ic.test(a.charAt(yd))?(f=a.charAt(yd),yd++):(f=Q,0===Ed&&e(Jc)),f===Q&&(92===a.charCodeAt(yd)?(f=Kc,yd++):(f=Q,0===Ed&&e(Lc)));d!==Q?(34===a.charCodeAt(yd)?(f=Gc,yd++):(f=Q,0===Ed&&e(Hc)),f!==Q?(zd=b,c=Mc(d),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;return b}function o(){var b,c,d,f;if(b=yd,39===a.charCodeAt(yd)?(c=Nc,yd++):(c=Q,0===Ed&&e(Oc)),c!==Q){for(d=[],Pc.test(a.charAt(yd))?(f=a.charAt(yd),yd++):(f=Q,0===Ed&&e(Qc)),f===Q&&(92===a.charCodeAt(yd)?(f=Kc,yd++):(f=Q,0===Ed&&e(Lc)));f!==Q;)d.push(f),Pc.test(a.charAt(yd))?(f=a.charAt(yd),yd++):(f=Q,0===Ed&&e(Qc)),f===Q&&(92===a.charCodeAt(yd)?(f=Kc,yd++):(f=Q,0===Ed&&e(Lc)));d!==Q?(39===a.charCodeAt(yd)?(f=Nc,yd++):(f=Q,0===Ed&&e(Oc)),f!==Q?(zd=b,c=Mc(d),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;return b}function p(){var a;return a=n(),a===Q&&(a=o()),a}function q(){var a;return a=p(),a===Q&&(a=A()),a}function p(){var a;return a=n(),a===Q&&(a=o()),a}function r(){var b;return Rc.test(a.charAt(yd))?(b=a.charAt(yd),yd++):(b=Q,0===Ed&&e(Sc)),b}function s(){var a,b,c;if(a=yd,b=[],c=r(),c!==Q)for(;c!==Q;)b.push(c),c=r();else b=U;return b!==Q&&(zd=a,b=Mc(b)),a=b}function t(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Tc)),a}function u(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Uc)),a}function v(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Vc)),a}function w(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Wc)),a}function x(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Xc)),a}function y(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Yc)),a}function z(){var a,b;return Ed++,a=s(),Ed--,a===Q&&(b=Q,0===Ed&&e(Zc)),a}function A(){var b,c,d,f,g,h,i;if(Ed++,b=yd,_c.test(a.charAt(yd))?(c=a.charAt(yd),yd++):(c=Q,0===Ed&&e(ad)),c===Q&&(c=X),c!==Q){for(d=yd,f=[],g=B();g!==Q;)f.push(g),g=B();if(f!==Q)if(46===a.charCodeAt(yd)?(g=bd,yd++):(g=Q,0===Ed&&e(cd)),g!==Q){if(h=[],i=B(),i!==Q)for(;i!==Q;)h.push(i),i=B();else h=U;h!==Q?(f=[f,g,h],d=f):(yd=d,d=U)}else yd=d,d=U;else yd=d,d=U;if(d===Q)if(d=[],f=B(),f!==Q)for(;f!==Q;)d.push(f),f=B();else d=U;d!==Q?(zd=b,c=dd(),b=c):(yd=b,b=U)}else yd=b,b=U;return Ed--,b===Q&&(c=Q,0===Ed&&e($c)),b}function B(){var b,c;return Ed++,fd.test(a.charAt(yd))?(b=a.charAt(yd),yd++):(b=Q,0===Ed&&e(gd)),Ed--,b===Q&&(c=Q,0===Ed&&e(ed)),b}function C(){var b,c;if(b=[],hd.test(a.charAt(yd))?(c=a.charAt(yd),yd++):(c=Q,0===Ed&&e(id)),c!==Q)for(;c!==Q;)b.push(c),hd.test(a.charAt(yd))?(c=a.charAt(yd),yd++):(c=Q,0===Ed&&e(id));else b=U;return b}function D(){var a,b;return Ed++,a=C(),Ed--,a===Q&&(b=Q,0===Ed&&e(jd)),a}function E(){var b,c,d,f,g,h;return Ed++,b=yd,c=yd,d=B(),d!==Q?(f=B(),f!==Q?(g=B(),g!==Q?(h=B(),h!==Q?(d=[d,f,g,h],c=d):(yd=c,c=U)):(yd=c,c=U)):(yd=c,c=U)):(yd=c,c=U),c!==Q&&(c=a.substring(b,yd)),b=c,Ed--,b===Q&&(c=Q,0===Ed&&e(kd)),b}function F(){var b,c,d,f;return Ed++,b=yd,c=yd,d=B(),d!==Q?(f=B(),f!==Q?(d=[d,f],c=d):(yd=c,c=U)):(yd=c,c=U),c!==Q&&(c=a.substring(b,yd)),b=c,Ed--,b===Q&&(c=Q,0===Ed&&e(ld)),b}function G(){var b,c,d,f;return Ed++,b=yd,c=yd,d=B(),d!==Q?(f=B(),f!==Q?(d=[d,f],c=d):(yd=c,c=U)):(yd=c,c=U),c!==Q&&(c=a.substring(b,yd)),b=c,Ed--,b===Q&&(c=Q,0===Ed&&e(md)),b}function H(){var b,c,d,f;return Ed++,b=yd,c=yd,d=B(),d!==Q?(f=B(),f!==Q?(d=[d,f],c=d):(yd=c,c=U)):(yd=c,c=U),c!==Q&&(c=a.substring(b,yd)),b=c,Ed--,b===Q&&(c=Q,0===Ed&&e(nd)),b}function I(){var b,c,d,f;return Ed++,b=yd,c=yd,d=B(),d!==Q?(f=B(),f!==Q?(d=[d,f],c=d):(yd=c,c=U)):(yd=c,c=U),c!==Q&&(c=a.substring(b,yd)),b=c,Ed--,b===Q&&(c=Q,0===Ed&&e(od)),b}function J(){var b,c,d,f;return Ed++,b=yd,c=yd,d=B(),d!==Q?(f=B(),f!==Q?(d=[d,f],c=d):(yd=c,c=U)):(yd=c,c=U),c!==Q&&(c=a.substring(b,yd)),b=c,Ed--,b===Q&&(c=Q,0===Ed&&e(pd)),b}function K(){var b,c,d,f,g,h,i;return Ed++,b=yd,c=H(),c!==Q?(58===a.charCodeAt(yd)?(d=rd,yd++):(d=Q,0===Ed&&e(sd)),d!==Q?(f=I(),f!==Q?(g=yd,58===a.charCodeAt(yd)?(h=rd,yd++):(h=Q,0===Ed&&e(sd)),h!==Q?(i=J(),i!==Q?(h=[h,i],g=h):(yd=g,g=U)):(yd=g,g=U),g===Q&&(g=X),g!==Q?(zd=b,c=td(c,f,g),b=c):(yd=b,b=U)):(yd=b,b=U)):(yd=b,b=U)):(yd=b,b=U),Ed--,b===Q&&(c=Q,0===Ed&&e(qd)),b}function L(){var b,c,d,f,g,h,i,j;if(Ed++,b=yd,c=E(),c!==Q)if(45===a.charCodeAt(yd)?(d=vd,yd++):(d=Q,0===Ed&&e(wd)),d!==Q)if(f=F(),f!==Q)if(45===a.charCodeAt(yd)?(g=vd,yd++):(g=Q,0===Ed&&e(wd)),g!==Q)if(h=G(),h!==Q){for(i=[],j=D();j!==Q;)i.push(j),j=D();i!==Q?(j=K(),j===Q&&(j=X),j!==Q?(zd=b,c=xd(c,f,h,j),b=c):(yd=b,b=U)):(yd=b,b=U)}else yd=b,b=U;else yd=b,b=U;else yd=b,b=U;else yd=b,b=U;else yd=b,b=U;return Ed--,b===Q&&(c=Q,0===Ed&&e(ud)),b}function M(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function N(a,b,c){return(null!==a?[a]:[]).concat(M(b,c))}var O,P=arguments.length>1?arguments[1]:{},Q={},R={start:g},S=g,T=function(a){return{conditions:[],filter:a}},U=Q,V="and",W={type:"literal",value:"and",description:'"and"'},X=null,Y=function(a,b,c){return{conditions:N(a,b,3),filter:c}},Z="member",$={type:"literal",value:"member",description:'"member"'},_="segment",ab={type:"literal",value:"segment",description:'"segment"'},bb=">=",cb={type:"literal",value:">=",description:'">="'},db="<=",eb={type:"literal",value:"<=",description:'"<="'},fb="=",gb={type:"literal",value:"=",description:'"="'},hb=">",ib={type:"literal",value:">",description:'">"'},jb="<",kb={type:"literal",value:"<",description:'"<"'},lb=function(a,b,c,d,e){return{scope:"member",sub_scope:b,code:c,operator:d,value:e}},mb="level",nb={type:"literal",value:"level",description:'"level"'},ob="points",pb={type:"literal",value:"points",description:'"points"'},qb=function(a,b,c,d,e){return{scope:"member",sub_scope:b,code:c,operator:d,value:e}},rb="tag",sb={type:"literal",value:"tag",description:'"tag"'},tb=function(a,b,c,d,e){return{scope:"member",sub_scope:b,code:c,operator:d,value:e}},ub="created",vb={type:"literal",value:"created",description:'"created"'},wb="last",xb={type:"literal",value:"last",description:'"last"'},yb=function(a,b,c,d){return{scope:"member",sub_scope:"created",condition:b,quantity:c,timeframe:d}},zb="between",Ab={type:"literal",value:"between",description:'"between"'},Bb=function(a,b,c,d){return{scope:"member",sub_scope:"created",condition:b,date1:c,date2:d}},Cb="city",Db={type:"literal",value:"city",description:'"city"'},Eb="state",Fb={type:"literal",value:"state",description:'"state"'},Gb="zip",Hb={type:"literal",value:"zip",description:'"zip"'},Ib="country",Jb={type:"literal",value:"country",description:'"country"'},Kb="!=",Lb={type:"literal",value:"!=",description:'"!="'},Mb=function(a,b,c,d){return{scope:"member",sub_scope:b,operator:c,value:d}},Nb="in zone",Ob={type:"literal",value:"in zone",description:'"in zone"'},Pb=",",Qb={type:"literal",value:",",description:'","'},Rb="for",Sb={type:"literal",value:"for",description:'"for"'},Tb=function(a,b,c,d){return{scope:"member",sub_scope:"zone",codes:N(b,c,3),duration:d?d[3]:null,timeframe:d?d[5]:null}},Ub="challenge",Vb={type:"literal",value:"challenge",description:'"challenge"'},Wb="with",Xb={type:"literal",value:"with",description:'"with"'},Yb=function(a,b,c,d){return{scope:"challenge",code:b,conditions:N(c?c[2]:null,d,3)}},Zb="action",$b={type:"literal",value:"action",description:'"action"'},_b=function(a,b,c,d,e){return{scope:"action",code:b,conditions:N(c?c[2]:null,d,3),filters:N(null,e,1)}},ac=function(a,b){return{type:"zone",zones:N(a,b,3)}},bc="only top",cc={type:"literal",value:"only top",description:'"only top"'},dc="by member",ec={type:"literal",value:"by member",description:'"by member"'},fc=function(a,b,c){return{quantity:a,type:b,levelCode:c}},gc=function(a,b,c){return{name:a,operator:b,value:c}},hc="minutes",ic={type:"literal",value:"minutes",description:'"minutes"'},jc="minute",kc={type:"literal",value:"minute",description:'"minute"'},lc="hours",mc={type:"literal",value:"hours",description:'"hours"'},nc="hour",oc={type:"literal",value:"hour",description:'"hour"'},pc="days",qc={type:"literal",value:"days",description:'"days"'},rc="day",sc={type:"literal",value:"day",description:'"day"'},tc="weeks",uc={type:"literal",value:"weeks",description:'"weeks"'},vc="week",wc={type:"literal",value:"week",description:'"week"'},xc="months",yc={type:"literal",value:"months",description:'"months"'},zc="month",Ac={type:"literal",value:"month",description:'"month"'},Bc="years",Cc={type:"literal",value:"years",description:'"years"'},Dc="year",Ec={type:"literal",value:"year",description:'"year"'},Fc=function(a){return a.replace(/s/g,"")},Gc='"',Hc={type:"literal",value:'"',description:'"\\""'},Ic=/^[^\n\r\f\\"]/,Jc={type:"class",value:'[^\\n\\r\\f\\\\"]',description:'[^\\n\\r\\f\\\\"]'},Kc="\\",Lc={type:"literal",value:"\\",description:'"\\\\"'},Mc=function(a){return a.join("")},Nc="'",Oc={type:"literal",value:"'",description:'"\'"'},Pc=/^[^\n\r\f\\']/,Qc={type:"class",value:"[^\\n\\r\\f\\\\']",description:"[^\\n\\r\\f\\\\']"},Rc=/^[_a-z0-9\-.]/i,Sc={type:"class",value:"[_a-z0-9\\-.]i",description:"[_a-z0-9\\-.]i"},Tc={type:"other",description:"segmentCode"},Uc={type:"other",description:"challengeCode"},Vc={type:"other",description:"actionCode"},Wc={type:"other",description:"levelCode"},Xc={type:"other",description:"tagCode"},Yc={type:"other",description:"zoneCode"},Zc={type:"other",description:"attributeName"},$c={type:"other",description:"number"},_c=/^[+\-]/,ad={type:"class",value:"[+\\-]",description:"[+\\-]"},bd=".",cd={type:"literal",value:".",description:'"."'},dd=function(){return parseFloat(c())},ed={type:"other",description:"digit"},fd=/^[0-9]/,gd={type:"class",value:"[0-9]",description:"[0-9]"},hd=/^[ \t\r\n\f]/,id={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},jd={type:"other",description:"whitespace"},kd={type:"other",description:"year"},ld={type:"other",description:"month"},md={type:"other",description:"day"},nd={type:"other",description:"hour"},od={type:"other",description:"minute"},pd={type:"other",description:"second"},qd={type:"other",description:"time"},rd=":",sd={type:"literal",value:":",description:'":"'},td=function(a,b,c){return{hour:a,minute:b,second:"00"|c}},ud={type:"other",description:"datetime"},vd="-",wd={type:"literal",value:"-",description:'"-"'},xd=function(a,b,c,d){return d?a+"-"+b+"-"+c+"T"+d.hour+":"+d.minute+":"+d.second:a+"-"+b+"-"+c},yd=0,zd=0,Ad=0,Bd={line:1,column:1,seenCR:!1},Cd=0,Dd=[],Ed=0;if("startRule"in P){if(!(P.startRule in R))throw new Error("Can't start parsing from rule \""+P.startRule+'".');S=R[P.startRule]}if(O=S(),O!==Q&&yd===a.length)return O;throw O!==Q&&yd<a.length&&e({type:"end",description:"end of input"}),f(null,Dd,Cd)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],11:[function(a,b){"use strict";b.exports.literals=["and","member","segment","level","points","tag","created","last","between","city","state","zip","country","challenge","with","action","only top","by member","minutes","minute","hours","hour","days","day","weeks","week","months","month","year","years","in zone","for"]},{}]},{},[1])(1)});
//# sourceMappingURL=fidem-dsl.min.js.map