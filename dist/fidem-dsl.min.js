!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.fidemdsl=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports.challengeRules=a("./lib/challenge-rules-parser"),b.exports.challengeRules.literals=a("./lib/challenge-rules").literals,b.exports.challengeAvailabilityRules=a("./lib/challenge-availability-rules-parser"),b.exports.challengeAvailabilityRules.literals=a("./lib/challenge-availability-rules").literals,b.exports.reactionActions=a("./lib/reaction-actions-parser"),b.exports.reactionActions.literals=a("./lib/reaction-actions").literals,b.exports.reactionTriggerConditions=a("./lib/reaction-trigger-conditions-parser"),b.exports.reactionTriggerConditions.literals=a("./lib/reaction-trigger-conditions").literals,b.exports.smartListMemberConditions=a("./lib/smartlist-member-conditions-parser"),b.exports.smartListMemberConditions.literals=a("./lib/smartlist-member-conditions").literals,b.exports.smartListLimit=a("./lib/smartlist-limit-parser"),b.exports.smartListLimit.literals=a("./lib/smartlist-limit").literals},{"./lib/challenge-availability-rules":3,"./lib/challenge-availability-rules-parser":2,"./lib/challenge-rules":5,"./lib/challenge-rules-parser":4,"./lib/reaction-actions":7,"./lib/reaction-actions-parser":6,"./lib/reaction-trigger-conditions":9,"./lib/reaction-trigger-conditions-parser":8,"./lib/smartlist-limit":11,"./lib/smartlist-limit-parser":10,"./lib/smartlist-member-conditions":13,"./lib/smartlist-member-conditions-parser":12}],2:[function(a,b){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(){return a.substring(ac,_b)}function d(b){var c,d,e=bc[b];if(e)return e;for(c=b-1;!bc[c];)c--;for(e=bc[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return bc[b]=e,e}function e(a,b){var c=d(a),e=d(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function f(a){cc>_b||(_b>cc&&(cc=_b,dc=[]),dc.push(a))}function g(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function h(){var a;return a=i()}function i(){var b,c,d,e,g,h,i,k;if(b=_b,c=j(),c!==A){for(d=[],e=_b,g=[],h=u();h!==A;)g.push(h),h=u();if(g!==A)if(a.substr(_b,3)===D?(h=D,_b+=3):(h=A,0===ec&&f(E)),h!==A){for(i=[],k=u();k!==A;)i.push(k),k=u();i!==A?(k=j(),k!==A?(g=[g,h,i,k],e=g):(_b=e,e=A)):(_b=e,e=A)}else _b=e,e=A;else _b=e,e=A;if(e!==A)for(;e!==A;){for(d.push(e),e=_b,g=[],h=u();h!==A;)g.push(h),h=u();if(g!==A)if(a.substr(_b,3)===D?(h=D,_b+=3):(h=A,0===ec&&f(E)),h!==A){for(i=[],k=u();k!==A;)i.push(k),k=u();i!==A?(k=j(),k!==A?(g=[g,h,i,k],e=g):(_b=e,e=A)):(_b=e,e=A)}else _b=e,e=A;else _b=e,e=A}else d=A;d!==A?(ac=b,c=F(c,d),b=c):(_b=b,b=A)}else _b=b,b=A;return b===A&&(b=_b,c=j(),c!==A&&(ac=b,c=G(c)),b=c),b}function j(){var b,c,d,e,g,h,i,j,k,l,s,t;if(b=_b,a.substr(_b,5)===H?(c=H,_b+=5):(c=A,0===ec&&f(I)),c!==A){for(d=[],e=u();e!==A;)d.push(e),e=u();if(d!==A)if(e=n(),e!==A){for(g=[],h=u();h!==A;)g.push(h),h=u();if(g!==A)if(a.substr(_b,2)===J?(h=J,_b+=2):(h=A,0===ec&&f(K)),h===A&&(a.substr(_b,2)===L?(h=L,_b+=2):(h=A,0===ec&&f(M)),h===A&&(61===a.charCodeAt(_b)?(h=N,_b++):(h=A,0===ec&&f(O)),h===A&&(62===a.charCodeAt(_b)?(h=P,_b++):(h=A,0===ec&&f(Q)),h===A&&(60===a.charCodeAt(_b)?(h=R,_b++):(h=A,0===ec&&f(S)))))),h!==A){for(i=[],j=u();j!==A;)i.push(j),j=u();i!==A?(j=r(),j!==A?(ac=b,c=T(c,e,h,j),b=c):(_b=b,b=A)):(_b=b,b=A)}else _b=b,b=A;else _b=b,b=A}else _b=b,b=A;else _b=b,b=A}else _b=b,b=A;if(b===A){if(b=_b,a.substr(_b,3)===U?(c=U,_b+=3):(c=A,0===ec&&f(V)),c!==A){for(d=[],e=u();e!==A;)d.push(e),e=u();if(d!==A)if(e=p(),e!==A){for(g=[],h=u();h!==A;)g.push(h),h=u();if(g!==A)if(a.substr(_b,2)===J?(h=J,_b+=2):(h=A,0===ec&&f(K)),h===A&&(a.substr(_b,2)===L?(h=L,_b+=2):(h=A,0===ec&&f(M)),h===A&&(61===a.charCodeAt(_b)?(h=N,_b++):(h=A,0===ec&&f(O)),h===A&&(62===a.charCodeAt(_b)?(h=P,_b++):(h=A,0===ec&&f(Q)),h===A&&(60===a.charCodeAt(_b)?(h=R,_b++):(h=A,0===ec&&f(S)))))),h!==A){for(i=[],j=u();j!==A;)i.push(j),j=u();i!==A?(j=r(),j!==A?(ac=b,c=W(c,e,h,j),b=c):(_b=b,b=A)):(_b=b,b=A)}else _b=b,b=A;else _b=b,b=A}else _b=b,b=A;else _b=b,b=A}else _b=b,b=A;if(b===A){if(b=_b,a.substr(_b,7)===X?(c=X,_b+=7):(c=A,0===ec&&f(Y)),c!==A){for(d=[],e=u();e!==A;)d.push(e),e=u();if(d!==A)if(e=q(),e!==A){for(g=[],h=_b,i=[],j=u();j!==A;)i.push(j),j=u();if(i!==A)if(44===a.charCodeAt(_b)?(j=Z,_b++):(j=A,0===ec&&f($)),j!==A){for(k=[],l=u();l!==A;)k.push(l),l=u();k!==A?(l=q(),l!==A?(i=[i,j,k,l],h=i):(_b=h,h=A)):(_b=h,h=A)}else _b=h,h=A;else _b=h,h=A;for(;h!==A;){for(g.push(h),h=_b,i=[],j=u();j!==A;)i.push(j),j=u();if(i!==A)if(44===a.charCodeAt(_b)?(j=Z,_b++):(j=A,0===ec&&f($)),j!==A){for(k=[],l=u();l!==A;)k.push(l),l=u();k!==A?(l=q(),l!==A?(i=[i,j,k,l],h=i):(_b=h,h=A)):(_b=h,h=A)}else _b=h,h=A;else _b=h,h=A}if(g!==A){for(h=_b,i=[],j=u();j!==A;)i.push(j),j=u();if(i!==A)if(a.substr(_b,3)===_?(j=_,_b+=3):(j=A,0===ec&&f(ab)),j!==A){for(k=[],l=u();l!==A;)k.push(l),l=u();if(k!==A)if(l=r(),l!==A){for(s=[],t=u();t!==A;)s.push(t),t=u();s!==A?(t=v(),t!==A?(i=[i,j,k,l,s,t],h=i):(_b=h,h=A)):(_b=h,h=A)}else _b=h,h=A;else _b=h,h=A}else _b=h,h=A;else _b=h,h=A;h===A&&(h=null),h!==A?(ac=b,c=bb(e,g,h),b=c):(_b=b,b=A)}else _b=b,b=A}else _b=b,b=A;else _b=b,b=A}else _b=b,b=A;if(b===A){if(b=_b,a.substr(_b,9)===cb?(c=cb,_b+=9):(c=A,0===ec&&f(db)),c!==A){for(d=[],e=u();e!==A;)d.push(e),e=u();d!==A?(e=m(),e!==A?(ac=b,c=eb(c,e),b=c):(_b=b,b=A)):(_b=b,b=A)}else _b=b,b=A;if(b===A)if(b=_b,a.substr(_b,20)===fb?(c=fb,_b+=20):(c=A,0===ec&&f(gb)),c!==A){for(d=[],e=u();e!==A;)d.push(e),e=u();if(d!==A)if(e=o(),e!==A){for(g=[],h=u();h!==A;)g.push(h),h=u();if(g!==A){if(h=[],i=_b,44===a.charCodeAt(_b)?(j=Z,_b++):(j=A,0===ec&&f($)),j!==A){for(k=[],l=u();l!==A;)k.push(l),l=u();k!==A?(l=o(),l!==A?(j=[j,k,l],i=j):(_b=i,i=A)):(_b=i,i=A)}else _b=i,i=A;for(;i!==A;)if(h.push(i),i=_b,44===a.charCodeAt(_b)?(j=Z,_b++):(j=A,0===ec&&f($)),j!==A){for(k=[],l=u();l!==A;)k.push(l),l=u();k!==A?(l=o(),l!==A?(j=[j,k,l],i=j):(_b=i,i=A)):(_b=i,i=A)}else _b=i,i=A;h!==A?(ac=b,c=hb(e,h),b=c):(_b=b,b=A)}else _b=b,b=A}else _b=b,b=A;else _b=b,b=A}else _b=b,b=A}}}return b}function k(){var b;return jb.test(a.charAt(_b))?(b=a.charAt(_b),_b++):(b=A,0===ec&&f(kb)),b}function l(){var a,b,c;if(a=_b,b=[],c=k(),c!==A)for(;c!==A;)b.push(c),c=k();else b=A;return b!==A&&(ac=a,b=ib(b)),a=b}function m(){var a,b;return ec++,a=l(),ec--,a===A&&(b=A,0===ec&&f(lb)),a}function n(){var a,b;return ec++,a=l(),ec--,a===A&&(b=A,0===ec&&f(mb)),a}function o(){var a,b;return ec++,a=l(),ec--,a===A&&(b=A,0===ec&&f(nb)),a}function p(){var a,b;return ec++,a=l(),ec--,a===A&&(b=A,0===ec&&f(ob)),a}function q(){var a,b;return ec++,a=l(),ec--,a===A&&(b=A,0===ec&&f(pb)),a}function r(){var b,c,d,e,g,h,i;if(ec++,b=_b,rb.test(a.charAt(_b))?(c=a.charAt(_b),_b++):(c=A,0===ec&&f(sb)),c===A&&(c=null),c!==A){for(d=_b,e=[],g=s();g!==A;)e.push(g),g=s();if(e!==A)if(46===a.charCodeAt(_b)?(g=tb,_b++):(g=A,0===ec&&f(ub)),g!==A){if(h=[],i=s(),i!==A)for(;i!==A;)h.push(i),i=s();else h=A;h!==A?(e=[e,g,h],d=e):(_b=d,d=A)}else _b=d,d=A;else _b=d,d=A;if(d===A)if(d=[],e=s(),e!==A)for(;e!==A;)d.push(e),e=s();else d=A;d!==A?(ac=b,c=vb(),b=c):(_b=b,b=A)}else _b=b,b=A;return ec--,b===A&&(c=A,0===ec&&f(qb)),b}function s(){var b,c;return ec++,xb.test(a.charAt(_b))?(b=a.charAt(_b),_b++):(b=A,0===ec&&f(yb)),ec--,b===A&&(c=A,0===ec&&f(wb)),b}function t(){var b,c;if(b=[],zb.test(a.charAt(_b))?(c=a.charAt(_b),_b++):(c=A,0===ec&&f(Ab)),c!==A)for(;c!==A;)b.push(c),zb.test(a.charAt(_b))?(c=a.charAt(_b),_b++):(c=A,0===ec&&f(Ab));else b=A;return b}function u(){var a,b;return ec++,a=t(),ec--,a===A&&(b=A,0===ec&&f(Bb)),a}function v(){var b,c;return b=_b,a.substr(_b,7)===Cb?(c=Cb,_b+=7):(c=A,0===ec&&f(Db)),c===A&&(a.substr(_b,6)===Eb?(c=Eb,_b+=6):(c=A,0===ec&&f(Fb)),c===A&&(a.substr(_b,5)===Gb?(c=Gb,_b+=5):(c=A,0===ec&&f(Hb)),c===A&&(a.substr(_b,4)===Ib?(c=Ib,_b+=4):(c=A,0===ec&&f(Jb)),c===A&&(a.substr(_b,4)===Kb?(c=Kb,_b+=4):(c=A,0===ec&&f(Lb)),c===A&&(a.substr(_b,3)===Mb?(c=Mb,_b+=3):(c=A,0===ec&&f(Nb)),c===A&&(a.substr(_b,5)===Ob?(c=Ob,_b+=5):(c=A,0===ec&&f(Pb)),c===A&&(a.substr(_b,4)===Qb?(c=Qb,_b+=4):(c=A,0===ec&&f(Rb)),c===A&&(a.substr(_b,6)===Sb?(c=Sb,_b+=6):(c=A,0===ec&&f(Tb)),c===A&&(a.substr(_b,5)===Ub?(c=Ub,_b+=5):(c=A,0===ec&&f(Vb)),c===A&&(a.substr(_b,5)===Wb?(c=Wb,_b+=5):(c=A,0===ec&&f(Xb)),c===A&&(a.substr(_b,4)===Yb?(c=Yb,_b+=4):(c=A,0===ec&&f(Zb))))))))))))),c!==A&&(ac=b,c=$b(c)),b=c}function w(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function x(a,b,c){return(null!==a?[a]:[]).concat(w(b,c))}var y,z=arguments.length>1?arguments[1]:{},A={},B={start:h},C=h,D="and",E={type:"literal",value:"and",description:'"and"'},F=function(a,b){return x(a,b,3)},G=function(a){return[a]},H="level",I={type:"literal",value:"level",description:'"level"'},J=">=",K={type:"literal",value:">=",description:'">="'},L="<=",M={type:"literal",value:"<=",description:'"<="'},N="=",O={type:"literal",value:"=",description:'"="'},P=">",Q={type:"literal",value:">",description:'">"'},R="<",S={type:"literal",value:"<",description:'"<"'},T=function(a,b,c,d){return{scope:a,code:b,operator:c,value:d}},U="tag",V={type:"literal",value:"tag",description:'"tag"'},W=function(a,b,c,d){return{scope:a,code:b,operator:c,value:d}},X="in zone",Y={type:"literal",value:"in zone",description:'"in zone"'},Z=",",$={type:"literal",value:",",description:'","'},_="for",ab={type:"literal",value:"for",description:'"for"'},bb=function(a,b,c){return{scope:"zone",codes:x(a,b,3),duration:c?c[3]:null,timeframe:c?c[5]:null}},cb="challenge",db={type:"literal",value:"challenge",description:'"challenge"'},eb=function(a,b){return{scope:a,code:b}},fb="belongs to smartlist",gb={type:"literal",value:"belongs to smartlist",description:'"belongs to smartlist"'},hb=function(a,b){return{scope:"smartlist",codes:x(a,b,2)}},ib=function(a){return a.join("")},jb=/^[_a-z0-9\-.]/i,kb={type:"class",value:"[_a-z0-9-\\.]i",description:"[_a-z0-9-\\.]i"},lb={type:"other",description:"challengeCode"},mb={type:"other",description:"levelCode"},nb={type:"other",description:"smartlistCode"},ob={type:"other",description:"tagCode"},pb={type:"other",description:"zoneCode"},qb={type:"other",description:"number"},rb=/^[+\-]/,sb={type:"class",value:"[+-]",description:"[+-]"},tb=".",ub={type:"literal",value:".",description:'"."'},vb=function(){return parseFloat(c())},wb={type:"other",description:"digit"},xb=/^[0-9]/,yb={type:"class",value:"[0-9]",description:"[0-9]"},zb=/^[ \t\r\n\f]/,Ab={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Bb={type:"other",description:"whitespace"},Cb="minutes",Db={type:"literal",value:"minutes",description:'"minutes"'},Eb="minute",Fb={type:"literal",value:"minute",description:'"minute"'},Gb="hours",Hb={type:"literal",value:"hours",description:'"hours"'},Ib="hour",Jb={type:"literal",value:"hour",description:'"hour"'},Kb="days",Lb={type:"literal",value:"days",description:'"days"'},Mb="day",Nb={type:"literal",value:"day",description:'"day"'},Ob="weeks",Pb={type:"literal",value:"weeks",description:'"weeks"'},Qb="week",Rb={type:"literal",value:"week",description:'"week"'},Sb="months",Tb={type:"literal",value:"months",description:'"months"'},Ub="month",Vb={type:"literal",value:"month",description:'"month"'},Wb="years",Xb={type:"literal",value:"years",description:'"years"'},Yb="year",Zb={type:"literal",value:"year",description:'"year"'},$b=function(a){return a.replace(/s/g,"")},_b=0,ac=0,bc=[{line:1,column:1,seenCR:!1}],cc=0,dc=[],ec=0;if("startRule"in z){if(!(z.startRule in B))throw new Error("Can't start parsing from rule \""+z.startRule+'".');C=B[z.startRule]}if(y=C(),y!==A&&_b===a.length)return y;throw y!==A&&_b<a.length&&f({type:"end",description:"end of input"}),g(null,dc,cc<a.length?a.charAt(cc):null,cc<a.length?e(cc,cc+1):e(cc,cc))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],3:[function(a,b){"use strict";b.exports.literals=["and","level","tag","segment","challenge","in zone","for","minutes","minute","hours","hour","days","day","weeks","week","months","month","years","year"]},{}],4:[function(a,b){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(){return a.substring(_c,$c)}function d(b){var c,d,e=ad[b];if(e)return e;for(c=b-1;!ad[c];)c--;for(e=ad[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return ad[b]=e,e}function e(a,b){var c=d(a),e=d(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function f(a){bd>$c||($c>bd&&(bd=$c,cd=[]),cd.push(a))}function g(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function h(){var a;return a=i()}function i(){var b,c,d,e,g,h,i,k;if(b=$c,c=j(),c!==P){for(d=[],e=$c,g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(a.substr($c,3)===S?(h=S,$c+=3):(h=P,0===dd&&f(T)),h!==P){for(i=[],k=K();k!==P;)i.push(k),k=K();i!==P?(k=j(),k!==P?(g=[g,h,i,k],e=g):($c=e,e=P)):($c=e,e=P)}else $c=e,e=P;else $c=e,e=P;if(e!==P)for(;e!==P;){for(d.push(e),e=$c,g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(a.substr($c,3)===S?(h=S,$c+=3):(h=P,0===dd&&f(T)),h!==P){for(i=[],k=K();k!==P;)i.push(k),k=K();i!==P?(k=j(),k!==P?(g=[g,h,i,k],e=g):($c=e,e=P)):($c=e,e=P)}else $c=e,e=P;else $c=e,e=P}else d=P;if(d!==P){for(e=[],g=$c,h=[],i=K();i!==P;)h.push(i),i=K();if(h!==P?(i=t(),i!==P?(h=[h,i],g=h):($c=g,g=P)):($c=g,g=P),g!==P)for(;g!==P;){for(e.push(g),g=$c,h=[],i=K();i!==P;)h.push(i),i=K();h!==P?(i=t(),i!==P?(h=[h,i],g=h):($c=g,g=P)):($c=g,g=P)}else e=P;e!==P?(_c=b,c=U(c,d,e),b=c):($c=b,b=P)}else $c=b,b=P}else $c=b,b=P;if(b===P)if(b=$c,c=j(),c!==P){for(d=[],e=$c,g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P?(h=t(),h!==P?(g=[g,h],e=g):($c=e,e=P)):($c=e,e=P),e!==P)for(;e!==P;){for(d.push(e),e=$c,g=[],h=K();h!==P;)g.push(h),h=K();g!==P?(h=t(),h!==P?(g=[g,h],e=g):($c=e,e=P)):($c=e,e=P)}else d=P;d!==P?(_c=b,c=V(c,d),b=c):($c=b,b=P)}else $c=b,b=P;return b}function j(){var b,c,d,e,g,h,i,j,m,n,p,q,r,t;if(b=$c,a.substr($c,6)===W?(c=W,$c+=6):(c=P,0===dd&&f(X)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(e=B(),e!==P){for(g=[],h=$c,i=[],j=K();j!==P;)i.push(j),j=K();for(i!==P?(j=k(),j!==P?(i=[i,j],h=i):($c=h,h=P)):($c=h,h=P);h!==P;){for(g.push(h),h=$c,i=[],j=K();j!==P;)i.push(j),j=K();i!==P?(j=k(),j!==P?(i=[i,j],h=i):($c=h,h=P)):($c=h,h=P)}if(g!==P){for(h=[],i=$c,j=[],m=K();m!==P;)j.push(m),m=K();for(j!==P?(m=l(),m!==P?(j=[j,m],i=j):($c=i,i=P)):($c=i,i=P);i!==P;){for(h.push(i),i=$c,j=[],m=K();m!==P;)j.push(m),m=K();j!==P?(m=l(),m!==P?(j=[j,m],i=j):($c=i,i=P)):($c=i,i=P)}h!==P?(_c=b,c=Y(c,e,g,h),b=c):($c=b,b=P)}else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;if(b===P){if(b=$c,a.substr($c,9)===Z?(c=Z,$c+=9):(c=P,0===dd&&f($)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(e=C(),e!==P){for(g=[],h=$c,i=[],j=K();j!==P;)i.push(j),j=K();for(i!==P?(j=k(),j!==P?(i=[i,j],h=i):($c=h,h=P)):($c=h,h=P);h!==P;){for(g.push(h),h=$c,i=[],j=K();j!==P;)i.push(j),j=K();i!==P?(j=k(),j!==P?(i=[i,j],h=i):($c=h,h=P)):($c=h,h=P)}if(g!==P){for(h=[],i=$c,j=[],m=K();m!==P;)j.push(m),m=K();for(j!==P?(m=l(),m!==P?(j=[j,m],i=j):($c=i,i=P)):($c=i,i=P);i!==P;){for(h.push(i),i=$c,j=[],m=K();m!==P;)j.push(m),m=K();j!==P?(m=l(),m!==P?(j=[j,m],i=j):($c=i,i=P)):($c=i,i=P)}h!==P?(_c=b,c=_(c,e,g,h),b=c):($c=b,b=P)}else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;if(b===P){if(b=$c,a.substr($c,6)===ab?(c=ab,$c+=6):(c=P,0===dd&&f(bb)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(a.substr($c,5)===cb?(e=cb,$c+=5):(e=P,0===dd&&f(db)),e===P&&(a.substr($c,5)===eb?(e=eb,$c+=5):(e=P,0===dd&&f(fb))),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(h=D(),h!==P){for(i=[],j=K();j!==P;)i.push(j),j=K();if(i!==P)if(a.substr($c,2)===gb?(j=gb,$c+=2):(j=P,0===dd&&f(hb)),j===P&&(a.substr($c,2)===ib?(j=ib,$c+=2):(j=P,0===dd&&f(jb)),j===P&&(61===a.charCodeAt($c)?(j=kb,$c++):(j=P,0===dd&&f(lb)),j===P&&(62===a.charCodeAt($c)?(j=mb,$c++):(j=P,0===dd&&f(nb)),j===P&&(60===a.charCodeAt($c)?(j=ob,$c++):(j=P,0===dd&&f(pb)))))),j===P&&(j=null),j!==P){for(m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(n=H(),n!==P){for(p=[],q=K();q!==P;)p.push(q),q=K();p!==P?(q=o(),q===P&&(q=null),q!==P?(_c=b,c=qb(c,e,h,j,n,q),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;if(b===P){if(b=$c,a.substr($c,6)===ab?(c=ab,$c+=6):(c=P,0===dd&&f(bb)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(a.substr($c,3)===rb?(e=rb,$c+=3):(e=P,0===dd&&f(sb)),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(h=E(),h!==P){for(i=[],j=K();j!==P;)i.push(j),j=K();if(i!==P)if(a.substr($c,2)===gb?(j=gb,$c+=2):(j=P,0===dd&&f(hb)),j===P&&(a.substr($c,2)===ib?(j=ib,$c+=2):(j=P,0===dd&&f(jb)),j===P&&(61===a.charCodeAt($c)?(j=kb,$c++):(j=P,0===dd&&f(lb)),j===P&&(62===a.charCodeAt($c)?(j=mb,$c++):(j=P,0===dd&&f(nb)),j===P&&(60===a.charCodeAt($c)?(j=ob,$c++):(j=P,0===dd&&f(pb)))))),j===P&&(j=null),j!==P){for(m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(n=H(),n!==P){for(p=[],q=K();q!==P;)p.push(q),q=K();p!==P?(q=o(),q===P&&(q=null),q!==P?(_c=b,c=tb(c,e,h,j,n,q),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;if(b===P)if(b=$c,a.substr($c,6)===ab?(c=ab,$c+=6):(c=P,0===dd&&f(bb)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(a.substr($c,7)===ub?(e=ub,$c+=7):(e=P,0===dd&&f(vb)),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(h=F(),h!==P){for(i=[],j=$c,m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(44===a.charCodeAt($c)?(n=wb,$c++):(n=P,0===dd&&f(xb)),n!==P){for(p=[],q=K();q!==P;)p.push(q),q=K();p!==P?(q=F(),q!==P?(m=[m,n,p,q],j=m):($c=j,j=P)):($c=j,j=P)}else $c=j,j=P;else $c=j,j=P;for(;j!==P;){for(i.push(j),j=$c,m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(44===a.charCodeAt($c)?(n=wb,$c++):(n=P,0===dd&&f(xb)),n!==P){for(p=[],q=K();q!==P;)p.push(q),q=K();p!==P?(q=F(),q!==P?(m=[m,n,p,q],j=m):($c=j,j=P)):($c=j,j=P)}else $c=j,j=P;else $c=j,j=P}if(i!==P){for(j=$c,m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(a.substr($c,3)===yb?(n=yb,$c+=3):(n=P,0===dd&&f(zb)),n!==P){for(p=[],q=K();q!==P;)p.push(q),q=K();if(p!==P)if(q=H(),q!==P){for(r=[],t=K();t!==P;)r.push(t),t=K();r!==P?(t=s(),t!==P?(m=[m,n,p,q,r,t],j=m):($c=j,j=P)):($c=j,j=P)}else $c=j,j=P;else $c=j,j=P}else $c=j,j=P;else $c=j,j=P;j===P&&(j=null),j!==P?(_c=b,c=Ab(c,h,i,j),b=c):($c=b,b=P)}else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P}}}return b}function k(){var a;return a=r(),a===P&&(a=q()),a}function l(){var a;return a=o(),a===P&&(a=p(),a===P&&(a=m(),a===P&&(a=n()))),a}function m(){var b,c,d,e,g,h,i,j,k,l;if(b=$c,a.substr($c,7)===ub?(c=ub,$c+=7):(c=P,0===dd&&f(vb)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(e=F(),e!==P){for(g=[],h=$c,i=[],j=K();j!==P;)i.push(j),j=K();if(i!==P)if(44===a.charCodeAt($c)?(j=wb,$c++):(j=P,0===dd&&f(xb)),j!==P){for(k=[],l=K();l!==P;)k.push(l),l=K();k!==P?(l=F(),l!==P?(i=[i,j,k,l],h=i):($c=h,h=P)):($c=h,h=P)}else $c=h,h=P;else $c=h,h=P;for(;h!==P;){for(g.push(h),h=$c,i=[],j=K();j!==P;)i.push(j),j=K();if(i!==P)if(44===a.charCodeAt($c)?(j=wb,$c++):(j=P,0===dd&&f(xb)),j!==P){for(k=[],l=K();l!==P;)k.push(l),l=K();k!==P?(l=F(),l!==P?(i=[i,j,k,l],h=i):($c=h,h=P)):($c=h,h=P)}else $c=h,h=P;else $c=h,h=P}g!==P?(_c=b,c=Bb(e,g),b=c):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;return b}function n(){var b,c,d,e,g,h,i,j,k,l,m,n,o,p;if(b=$c,a.substr($c,4)===Cb?(c=Cb,$c+=4):(c=P,0===dd&&f(Db)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(e=H(),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(a.substr($c,9)===Eb?(h=Eb,$c+=9):(h=P,0===dd&&f(Fb)),h!==P){for(i=[],j=K();j!==P;)i.push(j),j=K();if(i!==P)if(j=G(),j!==P){for(k=[],l=$c,m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(44===a.charCodeAt($c)?(n=wb,$c++):(n=P,0===dd&&f(xb)),n!==P){for(o=[],p=K();p!==P;)o.push(p),p=K();o!==P?(p=G(),p!==P?(m=[m,n,o,p],l=m):($c=l,l=P)):($c=l,l=P)}else $c=l,l=P;else $c=l,l=P;for(;l!==P;){for(k.push(l),l=$c,m=[],n=K();n!==P;)m.push(n),n=K();if(m!==P)if(44===a.charCodeAt($c)?(n=wb,$c++):(n=P,0===dd&&f(xb)),n!==P){for(o=[],p=K();p!==P;)o.push(p),p=K();o!==P?(p=G(),p!==P?(m=[m,n,o,p],l=m):($c=l,l=P)):($c=l,l=P)}else $c=l,l=P;else $c=l,l=P}k!==P?(_c=b,c=Gb(e,j,k),b=c):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;return b}function o(){var b,c,d,e;if(b=$c,a.substr($c,8)===Hb?(c=Hb,$c+=8):(c=P,0===dd&&f(Ib)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();d!==P?(e=E(),e!==P?(_c=b,c=Jb(e),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;return b}function p(){var b,c,d,e,g,h,i,j;if(b=$c,a.substr($c,9)===Kb?(c=Kb,$c+=9):(c=P,0===dd&&f(Lb)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(e=z(),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(a.substr($c,2)===gb?(h=gb,$c+=2):(h=P,0===dd&&f(hb)),h===P&&(a.substr($c,2)===ib?(h=ib,$c+=2):(h=P,0===dd&&f(jb)),h===P&&(61===a.charCodeAt($c)?(h=kb,$c++):(h=P,0===dd&&f(lb)),h===P&&(62===a.charCodeAt($c)?(h=mb,$c++):(h=P,0===dd&&f(nb)),h===P&&(60===a.charCodeAt($c)?(h=ob,$c++):(h=P,0===dd&&f(pb)))))),h!==P){for(i=[],j=K();j!==P;)i.push(j),j=K();i!==P?(j=w(),j===P&&(j=H()),j!==P?(_c=b,c=Mb(e,h,j),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;return b}function q(){var b,c,d,e;if(b=$c,c=H(),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();d!==P?(a.substr($c,5)===Nb?(e=Nb,$c+=5):(e=P,0===dd&&f(Ob)),e!==P?(_c=b,c=Pb(c),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;return b}function r(){var b,c,d,e,g,h,i,j,k,l;if(b=$c,c=H(),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(a.substr($c,5)===Nb?(e=Nb,$c+=5):(e=P,0===dd&&f(Ob)),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();if(g!==P)if(a.substr($c,6)===Qb?(h=Qb,$c+=6):(h=P,0===dd&&f(Rb)),h!==P){for(i=[],j=K();j!==P;)i.push(j),j=K();if(i!==P)if(j=H(),j!==P){for(k=[],l=K();l!==P;)k.push(l),l=K();k!==P?(l=s(),l!==P?(_c=b,c=Sb(c,j,l),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;return b}function s(){var b,c;return b=$c,a.substr($c,7)===Tb?(c=Tb,$c+=7):(c=P,0===dd&&f(Ub)),c===P&&(a.substr($c,6)===Vb?(c=Vb,$c+=6):(c=P,0===dd&&f(Wb)),c===P&&(a.substr($c,5)===Xb?(c=Xb,$c+=5):(c=P,0===dd&&f(Yb)),c===P&&(a.substr($c,4)===Zb?(c=Zb,$c+=4):(c=P,0===dd&&f($b)),c===P&&(a.substr($c,4)===_b?(c=_b,$c+=4):(c=P,0===dd&&f(ac)),c===P&&(a.substr($c,3)===bc?(c=bc,$c+=3):(c=P,0===dd&&f(cc)),c===P&&(a.substr($c,5)===dc?(c=dc,$c+=5):(c=P,0===dd&&f(ec)),c===P&&(a.substr($c,4)===fc?(c=fc,$c+=4):(c=P,0===dd&&f(gc)),c===P&&(a.substr($c,6)===hc?(c=hc,$c+=6):(c=P,0===dd&&f(ic)),c===P&&(a.substr($c,5)===jc?(c=jc,$c+=5):(c=P,0===dd&&f(kc)),c===P&&(a.substr($c,5)===lc?(c=lc,$c+=5):(c=P,0===dd&&f(mc)),c===P&&(a.substr($c,4)===nc?(c=nc,$c+=4):(c=P,0===dd&&f(oc))))))))))))),c!==P&&(_c=b,c=pc(c)),b=c}function t(){var b,c,d,e,g,h;if(b=$c,a.substr($c,4)===qc?(c=qc,$c+=4):(c=P,0===dd&&f(rc)),c!==P){for(d=[],e=K();e!==P;)d.push(e),e=K();if(d!==P)if(e=H(),e!==P){for(g=[],h=K();h!==P;)g.push(h),h=K();g!==P?(h=A(),h!==P?(_c=b,c=sc(e,h),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;else $c=b,b=P}else $c=b,b=P;return b}function u(){var b,c,d,e;if(b=$c,34===a.charCodeAt($c)?(c=tc,$c++):(c=P,0===dd&&f(uc)),c!==P){for(d=[],vc.test(a.charAt($c))?(e=a.charAt($c),$c++):(e=P,0===dd&&f(wc)),e===P&&(92===a.charCodeAt($c)?(e=xc,$c++):(e=P,0===dd&&f(yc)));e!==P;)d.push(e),vc.test(a.charAt($c))?(e=a.charAt($c),$c++):(e=P,0===dd&&f(wc)),e===P&&(92===a.charCodeAt($c)?(e=xc,$c++):(e=P,0===dd&&f(yc)));d!==P?(34===a.charCodeAt($c)?(e=tc,$c++):(e=P,0===dd&&f(uc)),e!==P?(_c=b,c=zc(d),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;return b}function v(){var b,c,d,e;if(b=$c,39===a.charCodeAt($c)?(c=Ac,$c++):(c=P,0===dd&&f(Bc)),c!==P){for(d=[],Cc.test(a.charAt($c))?(e=a.charAt($c),$c++):(e=P,0===dd&&f(Dc)),e===P&&(92===a.charCodeAt($c)?(e=xc,$c++):(e=P,0===dd&&f(yc)));e!==P;)d.push(e),Cc.test(a.charAt($c))?(e=a.charAt($c),$c++):(e=P,0===dd&&f(Dc)),e===P&&(92===a.charCodeAt($c)?(e=xc,$c++):(e=P,0===dd&&f(yc)));d!==P?(39===a.charCodeAt($c)?(e=Ac,$c++):(e=P,0===dd&&f(Bc)),e!==P?(_c=b,c=zc(d),b=c):($c=b,b=P)):($c=b,b=P)}else $c=b,b=P;return b}function w(){var a;return a=u(),a===P&&(a=v()),a}function x(){var b;return Ec.test(a.charAt($c))?(b=a.charAt($c),$c++):(b=P,0===dd&&f(Fc)),b}function y(){var a,b,c;if(a=$c,b=[],c=x(),c!==P)for(;c!==P;)b.push(c),c=x();else b=P;return b!==P&&(_c=a,b=zc(b)),a=b}function z(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Gc)),a}function A(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Hc)),a}function B(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Ic)),a}function C(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Jc)),a}function D(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Kc)),a}function E(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Lc)),a}function F(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Mc)),a}function G(){var a,b;return dd++,a=y(),dd--,a===P&&(b=P,0===dd&&f(Nc)),a}function H(){var b,c,d,e,g,h,i;if(dd++,b=$c,Pc.test(a.charAt($c))?(c=a.charAt($c),$c++):(c=P,0===dd&&f(Qc)),c===P&&(c=null),c!==P){for(d=$c,e=[],g=I();g!==P;)e.push(g),g=I();if(e!==P)if(46===a.charCodeAt($c)?(g=Rc,$c++):(g=P,0===dd&&f(Sc)),g!==P){if(h=[],i=I(),i!==P)for(;i!==P;)h.push(i),i=I();else h=P;h!==P?(e=[e,g,h],d=e):($c=d,d=P)}else $c=d,d=P;else $c=d,d=P;if(d===P)if(d=[],e=I(),e!==P)for(;e!==P;)d.push(e),e=I();else d=P;d!==P?(_c=b,c=Tc(),b=c):($c=b,b=P)}else $c=b,b=P;return dd--,b===P&&(c=P,0===dd&&f(Oc)),b}function I(){var b,c;return dd++,Vc.test(a.charAt($c))?(b=a.charAt($c),$c++):(b=P,0===dd&&f(Wc)),dd--,b===P&&(c=P,0===dd&&f(Uc)),b}function J(){var b,c;if(b=[],Xc.test(a.charAt($c))?(c=a.charAt($c),$c++):(c=P,0===dd&&f(Yc)),c!==P)for(;c!==P;)b.push(c),Xc.test(a.charAt($c))?(c=a.charAt($c),$c++):(c=P,0===dd&&f(Yc));else b=P;return b}function K(){var a,b;return dd++,a=J(),dd--,a===P&&(b=P,0===dd&&f(Zc)),a}function L(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function M(a,b,c){return(null!==a?[a]:[]).concat(L(b,c))}var N,O=arguments.length>1?arguments[1]:{},P={},Q={start:h},R=h,S="and",T={type:"literal",value:"and",description:'"and"'},U=function(a,b,c){return{rules:M(a,b,3),rewards:M(null,c,1)}},V=function(a,b){return{rules:[a],rewards:M(null,b,1)}},W="action",X={type:"literal",value:"action",description:'"action"'},Y=function(a,b,c,d){return{scope:a,code:b,conditions:M(null,c,1),filters:M(null,d,1)}},Z="challenge",$={type:"literal",value:"challenge",description:'"challenge"'},_=function(a,b,c,d){return{scope:a,code:b,conditions:M(null,c,1),filters:M(null,d,1)}},ab="member",bb={type:"literal",value:"member",description:'"member"'},cb="level",db={type:"literal",value:"level",description:'"level"'},eb="point",fb={type:"literal",value:"point",description:'"point"'},gb=">=",hb={type:"literal",value:">=",description:'">="'},ib="<=",jb={type:"literal",value:"<=",description:'"<="'},kb="=",lb={type:"literal",value:"=",description:'"="'},mb=">",nb={type:"literal",value:">",description:'">"'},ob="<",pb={type:"literal",value:"<",description:'"<"'},qb=function(a,b,c,d,e,f){var g={scope:a,type:b,levelCode:c,conditions:[{operator:d?d:">=",type:b,value:e}],filters:f?[f]:[]};return g},rb="tag",sb={type:"literal",value:"tag",description:'"tag"'},tb=function(a,b,c,d,e,f){var g={scope:a,type:b,levelCode:c,conditions:[{operator:d?d:">=",type:b,value:e}],filters:f?[f]:[]};return g},ub="in zone",vb={type:"literal",value:"in zone",description:'"in zone"'},wb=",",xb={type:"literal",value:",",description:'","'},yb="for",zb={type:"literal",value:"for",description:'"for"'},Ab=function(a,b,c,d){var e={scope:a,type:"zone",codes:M(b,c,3),duration:d?d[3]:null,timeframe:d?d[5]:null};return e},Bb=function(a,b){return{type:"zone",zones:M(a,b,3)}},Cb="near",Db={type:"literal",value:"near",description:'"near"'},Eb="of beacon",Fb={type:"literal",value:"of beacon",description:'"of beacon"'},Gb=function(a,b,c){return{type:"beacon",distance:a,beacons:M(b,c,3)}},Hb="with tag",Ib={type:"literal",value:"with tag",description:'"with tag"'},Jb=function(a){return{type:"tag",tag:a}},Kb="with data",Lb={type:"literal",value:"with data",description:'"with data"'},Mb=function(a,b,c){return{type:"data",operator:b,attribute:a,value:c}},Nb="times",Ob={type:"literal",value:"times",description:'"times"'},Pb=function(a){return{type:"times",value:a}},Qb="within",Rb={type:"literal",value:"within",description:'"within"'},Sb=function(a,b,c){return{type:"times_within_timeframe",value:a,duration:b,durationScope:c}},Tb="minutes",Ub={type:"literal",value:"minutes",description:'"minutes"'},Vb="minute",Wb={type:"literal",value:"minute",description:'"minute"'},Xb="hours",Yb={type:"literal",value:"hours",description:'"hours"'},Zb="hour",$b={type:"literal",value:"hour",description:'"hour"'},_b="days",ac={type:"literal",value:"days",description:'"days"'},bc="day",cc={type:"literal",value:"day",description:'"day"'},dc="weeks",ec={type:"literal",value:"weeks",description:'"weeks"'},fc="week",gc={type:"literal",value:"week",description:'"week"'},hc="months",ic={type:"literal",value:"months",description:'"months"'},jc="month",kc={type:"literal",value:"month",description:'"month"'},lc="years",mc={type:"literal",value:"years",description:'"years"'},nc="year",oc={type:"literal",value:"year",description:'"year"'},pc=function(a){return a.replace(/s/g,"")
},qc="give",rc={type:"literal",value:"give",description:'"give"'},sc=function(a,b){return{quantity:a,code:b}},tc='"',uc={type:"literal",value:'"',description:'"\\""'},vc=/^[^\n\r\f\\"]/,wc={type:"class",value:'[^\\n\\r\\f\\\\"]',description:'[^\\n\\r\\f\\\\"]'},xc="\\",yc={type:"literal",value:"\\",description:'"\\\\"'},zc=function(a){return a.join("")},Ac="'",Bc={type:"literal",value:"'",description:'"\'"'},Cc=/^[^\n\r\f\\']/,Dc={type:"class",value:"[^\\n\\r\\f\\\\']",description:"[^\\n\\r\\f\\\\']"},Ec=/^[_a-z0-9\-.]/i,Fc={type:"class",value:"[_a-z0-9-\\.]i",description:"[_a-z0-9-\\.]i"},Gc={type:"other",description:"attributeName"},Hc={type:"other",description:"rewardCode"},Ic={type:"other",description:"actionCode"},Jc={type:"other",description:"challengeCode"},Kc={type:"other",description:"levelCode"},Lc={type:"other",description:"tagCode"},Mc={type:"other",description:"zoneCode"},Nc={type:"other",description:"beaconCode"},Oc={type:"other",description:"number"},Pc=/^[+\-]/,Qc={type:"class",value:"[+-]",description:"[+-]"},Rc=".",Sc={type:"literal",value:".",description:'"."'},Tc=function(){return parseFloat(c())},Uc={type:"other",description:"digit"},Vc=/^[0-9]/,Wc={type:"class",value:"[0-9]",description:"[0-9]"},Xc=/^[ \t\r\n\f]/,Yc={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Zc={type:"other",description:"whitespace"},$c=0,_c=0,ad=[{line:1,column:1,seenCR:!1}],bd=0,cd=[],dd=0;if("startRule"in O){if(!(O.startRule in Q))throw new Error("Can't start parsing from rule \""+O.startRule+'".');R=Q[O.startRule]}if(N=R(),N!==P&&$c===a.length)return N;throw N!==P&&$c<a.length&&f({type:"end",description:"end of input"}),g(null,cd,bd<a.length?a.charAt(bd):null,bd<a.length?e(bd,bd+1):e(bd,bd))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],5:[function(a,b){"use strict";b.exports.literals=["and","action","challenge","member","level","point","tag","level up","with tag","times","within","in zone","for","minutes","minute","hours","hour","days","day","weeks","week","months","month","years","year","give"]},{}],6:[function(a,b){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(){return a.substring(Fb,Eb)}function d(b){var c,d,e=Gb[b];if(e)return e;for(c=b-1;!Gb[c];)c--;for(e=Gb[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return Gb[b]=e,e}function e(a,b){var c=d(a),e=d(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function f(a){Hb>Eb||(Eb>Hb&&(Hb=Eb,Ib=[]),Ib.push(a))}function g(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function h(){var a;return a=i()}function i(){var b,c,d,e,g,h,i,k,l,n,o,u,v,x,y,z,A,C;if(b=Eb,a.substr(Eb,11)===E?(c=E,Eb+=11):(c=B,0===Jb&&f(F)),c!==B){for(d=[],e=w();e!==B;)d.push(e),e=w();if(d!==B)if(e=t(),e!==B){for(g=[],h=w();h!==B;)g.push(h),h=w();if(g!==B)if(h=r(),h!==B){for(i=[],k=w();k!==B;)i.push(k),k=w();if(i!==B)if(a.substr(Eb,12)===G?(k=G,Eb+=12):(k=B,0===Jb&&f(H)),k!==B){for(l=[],n=w();n!==B;)l.push(n),n=w();if(l!==B)if(n=s(),n!==B){for(o=[],u=w();u!==B;)o.push(u),u=w();if(o!==B)if(a.substr(Eb,7)===I?(u=I,Eb+=7):(u=B,0===Jb&&f(J)),u!==B){for(v=[],x=w();x!==B;)v.push(x),x=w();v!==B?(x=q(),x!==B?(Fb=b,c=K(e,h,n,x),b=c):(Eb=b,b=B)):(Eb=b,b=B)}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;if(b===B){if(b=Eb,a.substr(Eb,17)===L?(c=L,Eb+=17):(c=B,0===Jb&&f(M)),c!==B){for(d=[],e=w();e!==B;)d.push(e),e=w();if(d!==B)if(e=m(),e!==B){for(g=[],h=w();h!==B;)g.push(h),h=w();if(g!==B)if(a.substr(Eb,12)===N?(h=N,Eb+=12):(h=B,0===Jb&&f(O)),h!==B){for(i=[],k=w();k!==B;)i.push(k),k=w();if(i!==B)if(k=m(),k!==B){for(l=[],n=w();n!==B;)l.push(n),n=w();if(l!==B)if(a.substr(Eb,7)===I?(n=I,Eb+=7):(n=B,0===Jb&&f(J)),n!==B){for(o=[],u=w();u!==B;)o.push(u),u=w();o!==B?(u=q(),u!==B?(Fb=b,c=P(e,k,u),b=c):(Eb=b,b=B)):(Eb=b,b=B)}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;if(b===B){if(b=Eb,a.substr(Eb,17)===L?(c=L,Eb+=17):(c=B,0===Jb&&f(M)),c!==B){for(d=[],e=w();e!==B;)d.push(e),e=w();if(d!==B)if(e=m(),e!==B){for(g=[],h=w();h!==B;)g.push(h),h=w();if(g!==B)if(a.substr(Eb,12)===N?(h=N,Eb+=12):(h=B,0===Jb&&f(O)),h!==B){for(i=[],k=w();k!==B;)i.push(k),k=w();if(i!==B)if(k=m(),k!==B){for(l=[],n=w();n!==B;)l.push(n),n=w();if(l!==B)if(a.substr(Eb,9)===Q?(n=Q,Eb+=9):(n=B,0===Jb&&f(R)),n!==B){for(o=[],u=w();u!==B;)o.push(u),u=w();if(o!==B)if(u=j(),u!==B){for(v=[],x=Eb,y=[],z=w();z!==B;)y.push(z),z=w();if(y!==B)if(44===a.charCodeAt(Eb)?(z=S,Eb++):(z=B,0===Jb&&f(T)),z!==B){for(A=[],C=w();C!==B;)A.push(C),C=w();A!==B?(C=j(),C!==B?(y=[y,z,A,C],x=y):(Eb=x,x=B)):(Eb=x,x=B)}else Eb=x,x=B;else Eb=x,x=B;for(;x!==B;){for(v.push(x),x=Eb,y=[],z=w();z!==B;)y.push(z),z=w();if(y!==B)if(44===a.charCodeAt(Eb)?(z=S,Eb++):(z=B,0===Jb&&f(T)),z!==B){for(A=[],C=w();C!==B;)A.push(C),C=w();A!==B?(C=j(),C!==B?(y=[y,z,A,C],x=y):(Eb=x,x=B)):(Eb=x,x=B)}else Eb=x,x=B;else Eb=x,x=B}v!==B?(Fb=b,c=U(e,k,u,v),b=c):(Eb=b,b=B)}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;if(b===B){if(b=Eb,a.substr(Eb,21)===V?(c=V,Eb+=21):(c=B,0===Jb&&f(W)),c!==B){for(d=[],e=w();e!==B;)d.push(e),e=w();if(d!==B)if(e=p(),e!==B){for(g=[],h=w();h!==B;)g.push(h),h=w();if(g!==B)if(a.substr(Eb,7)===I?(h=I,Eb+=7):(h=B,0===Jb&&f(J)),h!==B){for(i=[],k=w();k!==B;)i.push(k),k=w();i!==B?(k=q(),k!==B?(Fb=b,c=X(e,k),b=c):(Eb=b,b=B)):(Eb=b,b=B)}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;if(b===B)if(b=Eb,a.substr(Eb,21)===V?(c=V,Eb+=21):(c=B,0===Jb&&f(W)),c!==B){for(d=[],e=w();e!==B;)d.push(e),e=w();if(d!==B)if(e=p(),e!==B){for(g=[],h=w();h!==B;)g.push(h),h=w();if(g!==B)if(a.substr(Eb,9)===Q?(h=Q,Eb+=9):(h=B,0===Jb&&f(R)),h!==B){for(i=[],k=w();k!==B;)i.push(k),k=w();if(i!==B)if(k=j(),k!==B){for(l=[],n=Eb,o=[],u=w();u!==B;)o.push(u),u=w();if(o!==B)if(44===a.charCodeAt(Eb)?(u=S,Eb++):(u=B,0===Jb&&f(T)),u!==B){for(v=[],x=w();x!==B;)v.push(x),x=w();v!==B?(x=j(),x!==B?(o=[o,u,v,x],n=o):(Eb=n,n=B)):(Eb=n,n=B)}else Eb=n,n=B;else Eb=n,n=B;for(;n!==B;){for(l.push(n),n=Eb,o=[],u=w();u!==B;)o.push(u),u=w();if(o!==B)if(44===a.charCodeAt(Eb)?(u=S,Eb++):(u=B,0===Jb&&f(T)),u!==B){for(v=[],x=w();x!==B;)v.push(x),x=w();v!==B?(x=j(),x!==B?(o=[o,u,v,x],n=o):(Eb=n,n=B)):(Eb=n,n=B)}else Eb=n,n=B;else Eb=n,n=B}l!==B?(Fb=b,c=Y(e,k,l),b=c):(Eb=b,b=B)}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B;else Eb=b,b=B}else Eb=b,b=B}}}return b}function j(){var b,c,d,e;return Jb++,b=Eb,c=o(),c!==B?(64===a.charCodeAt(Eb)?(d=$,Eb++):(d=B,0===Jb&&f(_)),d!==B?(e=o(),e!==B?(Fb=b,c=ab(c,e),b=c):(Eb=b,b=B)):(Eb=b,b=B)):(Eb=b,b=B),Jb--,b===B&&(c=B,0===Jb&&f(Z)),b}function k(){var b,c,d,e;if(b=Eb,34===a.charCodeAt(Eb)?(c=bb,Eb++):(c=B,0===Jb&&f(cb)),c!==B){for(d=[],db.test(a.charAt(Eb))?(e=a.charAt(Eb),Eb++):(e=B,0===Jb&&f(eb)),e===B&&(92===a.charCodeAt(Eb)?(e=fb,Eb++):(e=B,0===Jb&&f(gb)));e!==B;)d.push(e),db.test(a.charAt(Eb))?(e=a.charAt(Eb),Eb++):(e=B,0===Jb&&f(eb)),e===B&&(92===a.charCodeAt(Eb)?(e=fb,Eb++):(e=B,0===Jb&&f(gb)));d!==B?(34===a.charCodeAt(Eb)?(e=bb,Eb++):(e=B,0===Jb&&f(cb)),e!==B?(Fb=b,c=hb(d),b=c):(Eb=b,b=B)):(Eb=b,b=B)}else Eb=b,b=B;return b}function l(){var b,c,d,e;if(b=Eb,39===a.charCodeAt(Eb)?(c=ib,Eb++):(c=B,0===Jb&&f(jb)),c!==B){for(d=[],kb.test(a.charAt(Eb))?(e=a.charAt(Eb),Eb++):(e=B,0===Jb&&f(lb)),e===B&&(92===a.charCodeAt(Eb)?(e=fb,Eb++):(e=B,0===Jb&&f(gb)));e!==B;)d.push(e),kb.test(a.charAt(Eb))?(e=a.charAt(Eb),Eb++):(e=B,0===Jb&&f(lb)),e===B&&(92===a.charCodeAt(Eb)?(e=fb,Eb++):(e=B,0===Jb&&f(gb)));d!==B?(39===a.charCodeAt(Eb)?(e=ib,Eb++):(e=B,0===Jb&&f(jb)),e!==B?(Fb=b,c=hb(d),b=c):(Eb=b,b=B)):(Eb=b,b=B)}else Eb=b,b=B;return b}function m(){var a;return a=k(),a===B&&(a=l()),a}function n(){var b;return mb.test(a.charAt(Eb))?(b=a.charAt(Eb),Eb++):(b=B,0===Jb&&f(nb)),b}function o(){var a,b,c;if(a=Eb,b=[],c=n(),c!==B)for(;c!==B;)b.push(c),c=n();else b=B;return b!==B&&(Fb=a,b=hb(b)),a=b}function p(){var a,b;return Jb++,a=o(),Jb--,a===B&&(b=B,0===Jb&&f(ob)),a}function q(){var a,b;return Jb++,a=o(),Jb--,a===B&&(b=B,0===Jb&&f(pb)),a}function r(){var a,b;return Jb++,a=o(),Jb--,a===B&&(b=B,0===Jb&&f(qb)),a}function s(){var a,b;return Jb++,a=o(),Jb--,a===B&&(b=B,0===Jb&&f(rb)),a}function t(){var b,c,d,e,g,h,i;if(Jb++,b=Eb,tb.test(a.charAt(Eb))?(c=a.charAt(Eb),Eb++):(c=B,0===Jb&&f(ub)),c===B&&(c=null),c!==B){for(d=Eb,e=[],g=u();g!==B;)e.push(g),g=u();if(e!==B)if(46===a.charCodeAt(Eb)?(g=vb,Eb++):(g=B,0===Jb&&f(wb)),g!==B){if(h=[],i=u(),i!==B)for(;i!==B;)h.push(i),i=u();else h=B;h!==B?(e=[e,g,h],d=e):(Eb=d,d=B)}else Eb=d,d=B;else Eb=d,d=B;if(d===B)if(d=[],e=u(),e!==B)for(;e!==B;)d.push(e),e=u();else d=B;d!==B?(Fb=b,c=xb(),b=c):(Eb=b,b=B)}else Eb=b,b=B;return Jb--,b===B&&(c=B,0===Jb&&f(sb)),b}function u(){var b,c;return Jb++,zb.test(a.charAt(Eb))?(b=a.charAt(Eb),Eb++):(b=B,0===Jb&&f(Ab)),Jb--,b===B&&(c=B,0===Jb&&f(yb)),b}function v(){var b,c;if(b=[],Bb.test(a.charAt(Eb))?(c=a.charAt(Eb),Eb++):(c=B,0===Jb&&f(Cb)),c!==B)for(;c!==B;)b.push(c),Bb.test(a.charAt(Eb))?(c=a.charAt(Eb),Eb++):(c=B,0===Jb&&f(Cb));else b=B;return b}function w(){var a,b;return Jb++,a=v(),Jb--,a===B&&(b=B,0===Jb&&f(Db)),a}function x(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function y(a,b,c){return(null!==a?[a]:[]).concat(x(b,c))}var z,A=arguments.length>1?arguments[1]:{},B={},C={start:h},D=h,E="give reward",F={type:"literal",value:"give reward",description:'"give reward"'},G="from program",H={type:"literal",value:"from program",description:'"from program"'},I="to list",J={type:"literal",value:"to list",description:'"to list"'},K=function(a,b,c,d){return{action:"giveReward",rewardCode:b,quantity:a,programCode:c,listCode:d}},L="send message text",M={type:"literal",value:"send message text",description:'"send message text"'},N="with subject",O={type:"literal",value:"with subject",description:'"with subject"'},P=function(a,b,c){return{action:"sendTextMessage",messageText:a,messageSubject:b,listCode:c}},Q="to emails",R={type:"literal",value:"to emails",description:'"to emails"'},S=",",T={type:"literal",value:",",description:'","'},U=function(a,b,c,d){return{action:"sendTextMessage",messageText:a,messageSubject:b,emails:y(c,d,3)}},V="send message template",W={type:"literal",value:"send message template",description:'"send message template"'},X=function(a,b){return{action:"sendTemplateMessage",templateMessageCode:a,listCode:b}},Y=function(a,b,c){return{action:"sendTemplateMessage",templateMessageCode:a,emails:y(b,c,3)}},Z={type:"other",description:"email"},$="@",_={type:"literal",value:"@",description:'"@"'},ab=function(a,b){return a+"@"+b},bb='"',cb={type:"literal",value:'"',description:'"\\""'},db=/^[^\n\r\f\\"]/,eb={type:"class",value:'[^\\n\\r\\f\\\\"]',description:'[^\\n\\r\\f\\\\"]'},fb="\\",gb={type:"literal",value:"\\",description:'"\\\\"'},hb=function(a){return a.join("")},ib="'",jb={type:"literal",value:"'",description:'"\'"'},kb=/^[^\n\r\f\\']/,lb={type:"class",value:"[^\\n\\r\\f\\\\']",description:"[^\\n\\r\\f\\\\']"},mb=/^[_a-z0-9\-.]/i,nb={type:"class",value:"[_a-z0-9-\\.]i",description:"[_a-z0-9-\\.]i"},ob={type:"other",description:"templateMessageCode"},pb={type:"other",description:"listCode"},qb={type:"other",description:"rewardCode"},rb={type:"other",description:"programCode"},sb={type:"other",description:"number"},tb=/^[+\-]/,ub={type:"class",value:"[+-]",description:"[+-]"},vb=".",wb={type:"literal",value:".",description:'"."'},xb=function(){return parseFloat(c())},yb={type:"other",description:"digit"},zb=/^[0-9]/,Ab={type:"class",value:"[0-9]",description:"[0-9]"},Bb=/^[ \t\r\n\f]/,Cb={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Db={type:"other",description:"whitespace"},Eb=0,Fb=0,Gb=[{line:1,column:1,seenCR:!1}],Hb=0,Ib=[],Jb=0;if("startRule"in A){if(!(A.startRule in C))throw new Error("Can't start parsing from rule \""+A.startRule+'".');D=C[A.startRule]}if(z=D(),z!==B&&Eb===a.length)return z;throw z!==B&&Eb<a.length&&f({type:"end",description:"end of input"}),g(null,Ib,Hb<a.length?a.charAt(Hb):null,Hb<a.length?e(Hb,Hb+1):e(Hb,Hb))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],7:[function(a,b){"use strict";b.exports.literals=['give reward"',"from program","to list","send message text","with subject","to emails","send message template"]},{}],8:[function(a,b){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(){return a.substring(Zb,Yb)}function d(b){var c,d,e=$b[b];if(e)return e;for(c=b-1;!$b[c];)c--;for(e=$b[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return $b[b]=e,e}function e(a,b){var c=d(a),e=d(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function f(a){_b>Yb||(Yb>_b&&(_b=Yb,ac=[]),ac.push(a))}function g(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function h(){var a;return a=i()}function i(){var b,c,d,e,g,h,i,k;if(b=Yb,c=j(),c!==x){for(d=[],e=Yb,g=[],h=s();h!==x;)g.push(h),h=s();if(g!==x)if(a.substr(Yb,3)===A?(h=A,Yb+=3):(h=x,0===bc&&f(B)),h!==x){for(i=[],k=s();k!==x;)i.push(k),k=s();i!==x?(k=j(),k!==x?(g=[g,h,i,k],e=g):(Yb=e,e=x)):(Yb=e,e=x)}else Yb=e,e=x;else Yb=e,e=x;for(;e!==x;){for(d.push(e),e=Yb,g=[],h=s();h!==x;)g.push(h),h=s();if(g!==x)if(a.substr(Yb,3)===A?(h=A,Yb+=3):(h=x,0===bc&&f(B)),h!==x){for(i=[],k=s();k!==x;)i.push(k),k=s();i!==x?(k=j(),k!==x?(g=[g,h,i,k],e=g):(Yb=e,e=x)):(Yb=e,e=x)}else Yb=e,e=x;else Yb=e,e=x}if(d!==x){for(e=[],g=s();g!==x;)e.push(g),g=s();if(e!==x)if(a.substr(Yb,2)===C?(g=C,Yb+=2):(g=x,0===bc&&f(D)),g!==x){for(h=[],i=s();i!==x;)h.push(i),i=s();h!==x?(i=n(),i!==x?(Zb=b,c=E(c,d,i),b=c):(Yb=b,b=x)):(Yb=b,b=x)}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x}else Yb=b,b=x;return b}function j(){var b,c,d,e,g,h,i,j,l,m,n;if(b=Yb,c=p(),c!==x){for(d=[],e=s();e!==x;)d.push(e),e=s();if(d!==x)if(e=k(),e!==x){for(g=[],h=s();h!==x;)g.push(h),h=s();if(g!==x)if(a.substr(Yb,5)===F?(h=F,Yb+=5):(h=x,0===bc&&f(G)),h===x&&(a.substr(Yb,6)===H?(h=H,Yb+=6):(h=x,0===bc&&f(I))),h!==x){for(i=[],j=s();j!==x;)i.push(j),j=s();i!==x?(a.substr(Yb,5)===J?(j=J,Yb+=5):(j=x,0===bc&&f(K)),j===x&&(a.substr(Yb,7)===L?(j=L,Yb+=7):(j=x,0===bc&&f(M)),j===x&&(a.substr(Yb,5)===N?(j=N,Yb+=5):(j=x,0===bc&&f(O)),j===x&&(a.substr(Yb,3)===P?(j=P,Yb+=3):(j=x,0===bc&&f(Q))))),j!==x?(Zb=b,c=R(c,e,h,j),b=c):(Yb=b,b=x)):(Yb=b,b=x)}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x;if(b===x){if(b=Yb,a.substr(Yb,4)===S?(c=S,Yb+=4):(c=x,0===bc&&f(T)),c!==x){for(d=[],e=s();e!==x;)d.push(e),e=s();if(d!==x)if(e=o(),e!==x){for(g=[],h=s();h!==x;)g.push(h),h=s();if(g!==x)if(a.substr(Yb,12)===U?(h=U,Yb+=12):(h=x,0===bc&&f(V)),h!==x){for(i=[],j=s();j!==x;)i.push(j),j=s();if(i!==x)if(a.substr(Yb,2)===W?(j=W,Yb+=2):(j=x,0===bc&&f(X)),j===x&&(a.substr(Yb,2)===Y?(j=Y,Yb+=2):(j=x,0===bc&&f(Z)),j===x&&(61===a.charCodeAt(Yb)?(j=$,Yb++):(j=x,0===bc&&f(_)),j===x&&(62===a.charCodeAt(Yb)?(j=ab,Yb++):(j=x,0===bc&&f(bb)),j===x&&(60===a.charCodeAt(Yb)?(j=cb,Yb++):(j=x,0===bc&&f(db)))))),j!==x){for(l=[],m=s();m!==x;)l.push(m),m=s();l!==x?(m=p(),m!==x?(37===a.charCodeAt(Yb)?(n=eb,Yb++):(n=x,0===bc&&f(fb)),n===x&&(n=null),n!==x?(Zb=b,c=gb(e,j,m,n),b=c):(Yb=b,b=x)):(Yb=b,b=x)):(Yb=b,b=x)}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x;if(b===x)if(b=Yb,a.substr(Yb,12)===U?(c=U,Yb+=12):(c=x,0===bc&&f(V)),c!==x){for(d=[],e=s();e!==x;)d.push(e),e=s();if(d!==x)if(a.substr(Yb,2)===W?(e=W,Yb+=2):(e=x,0===bc&&f(X)),e===x&&(a.substr(Yb,2)===Y?(e=Y,Yb+=2):(e=x,0===bc&&f(Z)),e===x&&(61===a.charCodeAt(Yb)?(e=$,Yb++):(e=x,0===bc&&f(_)),e===x&&(62===a.charCodeAt(Yb)?(e=ab,Yb++):(e=x,0===bc&&f(bb)),e===x&&(60===a.charCodeAt(Yb)?(e=cb,Yb++):(e=x,0===bc&&f(db)))))),e!==x){for(g=[],h=s();h!==x;)g.push(h),h=s();g!==x?(h=p(),h!==x?(37===a.charCodeAt(Yb)?(i=eb,Yb++):(i=x,0===bc&&f(fb)),i===x&&(i=null),i!==x?(Zb=b,c=hb(e,h,i),b=c):(Yb=b,b=x)):(Yb=b,b=x)):(Yb=b,b=x)}else Yb=b,b=x;else Yb=b,b=x}else Yb=b,b=x}return b}function k(){var b,c;return b=Yb,a.substr(Yb,7)===ib?(c=ib,Yb+=7):(c=x,0===bc&&f(jb)),c===x&&(a.substr(Yb,6)===kb?(c=kb,Yb+=6):(c=x,0===bc&&f(lb)),c===x&&(a.substr(Yb,5)===mb?(c=mb,Yb+=5):(c=x,0===bc&&f(nb)),c===x&&(a.substr(Yb,4)===ob?(c=ob,Yb+=4):(c=x,0===bc&&f(pb)),c===x&&(a.substr(Yb,4)===qb?(c=qb,Yb+=4):(c=x,0===bc&&f(rb)),c===x&&(a.substr(Yb,3)===sb?(c=sb,Yb+=3):(c=x,0===bc&&f(tb)),c===x&&(a.substr(Yb,5)===ub?(c=ub,Yb+=5):(c=x,0===bc&&f(vb)),c===x&&(a.substr(Yb,4)===wb?(c=wb,Yb+=4):(c=x,0===bc&&f(xb)),c===x&&(a.substr(Yb,6)===yb?(c=yb,Yb+=6):(c=x,0===bc&&f(zb)),c===x&&(a.substr(Yb,5)===Ab?(c=Ab,Yb+=5):(c=x,0===bc&&f(Bb)),c===x&&(a.substr(Yb,5)===Cb?(c=Cb,Yb+=5):(c=x,0===bc&&f(Db)),c===x&&(a.substr(Yb,4)===Eb?(c=Eb,Yb+=4):(c=x,0===bc&&f(Fb))))))))))))),c!==x&&(Zb=b,c=Gb(c)),b=c}function l(){var b;return Ib.test(a.charAt(Yb))?(b=a.charAt(Yb),Yb++):(b=x,0===bc&&f(Jb)),b}function m(){var a,b,c;if(a=Yb,b=[],c=l(),c!==x)for(;c!==x;)b.push(c),c=l();else b=x;return b!==x&&(Zb=a,b=Hb(b)),a=b}function n(){var a,b;return bc++,a=m(),bc--,a===x&&(b=x,0===bc&&f(Kb)),a}function o(){var a,b;return bc++,a=m(),bc--,a===x&&(b=x,0===bc&&f(Lb)),a}function p(){var b,c,d,e,g,h,i;if(bc++,b=Yb,Nb.test(a.charAt(Yb))?(c=a.charAt(Yb),Yb++):(c=x,0===bc&&f(Ob)),c===x&&(c=null),c!==x){for(d=Yb,e=[],g=q();g!==x;)e.push(g),g=q();if(e!==x)if(46===a.charCodeAt(Yb)?(g=Pb,Yb++):(g=x,0===bc&&f(Qb)),g!==x){if(h=[],i=q(),i!==x)for(;i!==x;)h.push(i),i=q();else h=x;h!==x?(e=[e,g,h],d=e):(Yb=d,d=x)}else Yb=d,d=x;else Yb=d,d=x;if(d===x)if(d=[],e=q(),e!==x)for(;e!==x;)d.push(e),e=q();else d=x;d!==x?(Zb=b,c=Rb(),b=c):(Yb=b,b=x)}else Yb=b,b=x;return bc--,b===x&&(c=x,0===bc&&f(Mb)),b}function q(){var b,c;return bc++,Tb.test(a.charAt(Yb))?(b=a.charAt(Yb),Yb++):(b=x,0===bc&&f(Ub)),bc--,b===x&&(c=x,0===bc&&f(Sb)),b}function r(){var b,c;if(b=[],Vb.test(a.charAt(Yb))?(c=a.charAt(Yb),Yb++):(c=x,0===bc&&f(Wb)),c!==x)for(;c!==x;)b.push(c),Vb.test(a.charAt(Yb))?(c=a.charAt(Yb),Yb++):(c=x,0===bc&&f(Wb));else b=x;return b}function s(){var a,b;return bc++,a=r(),bc--,a===x&&(b=x,0===bc&&f(Xb)),a}function t(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function u(a,b,c){return(null!==a?[a]:[]).concat(t(b,c))}var v,w=arguments.length>1?arguments[1]:{},x={},y={start:h},z=h,A="and",B={type:"literal",value:"and",description:'"and"'},C="of",D={type:"literal",value:"of",description:'"of"'},E=function(a,b,c){return{eventCode:c,conditions:u(a,b,3)}},F="after",G={type:"literal",value:"after",description:'"after"'},H="before",I={type:"literal",value:"before",description:'"before"'},J="sales",K={type:"literal",value:"sales",description:'"sales"'},L="curtain",M={type:"literal",value:"curtain",description:'"curtain"'},N="start",O={type:"literal",value:"start",description:'"start"'},P="end",Q={type:"literal",value:"end",description:'"end"'},R=function(a,b,c,d){return{type:"time",duration:a,durationScope:b,qualifier:c,eventQualifier:d}},S="tier",T={type:"literal",value:"tier",description:'"tier"'},U="ticket sales",V={type:"literal",value:"ticket sales",description:'"ticket sales"'},W=">=",X={type:"literal",value:">=",description:'">="'},Y="<=",Z={type:"literal",value:"<=",description:'"<="'},$="=",_={type:"literal",value:"=",description:'"="'},ab=">",bb={type:"literal",value:">",description:'">"'},cb="<",db={type:"literal",value:"<",description:'"<"'},eb="%",fb={type:"literal",value:"%",description:'"%"'},gb=function(a,b,c,d){return{type:"tierSales",tierCode:a,operator:b,value:c,percent:null!==d}},hb=function(a,b,c){return{type:"eventSales",operator:a,value:b,percent:null!==c}},ib="minutes",jb={type:"literal",value:"minutes",description:'"minutes"'},kb="minute",lb={type:"literal",value:"minute",description:'"minute"'},mb="hours",nb={type:"literal",value:"hours",description:'"hours"'},ob="hour",pb={type:"literal",value:"hour",description:'"hour"'},qb="days",rb={type:"literal",value:"days",description:'"days"'},sb="day",tb={type:"literal",value:"day",description:'"day"'},ub="weeks",vb={type:"literal",value:"weeks",description:'"weeks"'},wb="week",xb={type:"literal",value:"week",description:'"week"'},yb="months",zb={type:"literal",value:"months",description:'"months"'},Ab="month",Bb={type:"literal",value:"month",description:'"month"'},Cb="years",Db={type:"literal",value:"years",description:'"years"'},Eb="year",Fb={type:"literal",value:"year",description:'"year"'},Gb=function(a){return a.replace(/s/g,"")},Hb=function(a){return a.join("")},Ib=/^[_a-z0-9\-.]/i,Jb={type:"class",value:"[_a-z0-9-\\.]i",description:"[_a-z0-9-\\.]i"},Kb={type:"other",description:"eventCode"},Lb={type:"other",description:"tierCode"},Mb={type:"other",description:"number"},Nb=/^[+\-]/,Ob={type:"class",value:"[+-]",description:"[+-]"},Pb=".",Qb={type:"literal",value:".",description:'"."'},Rb=function(){return parseFloat(c())},Sb={type:"other",description:"digit"},Tb=/^[0-9]/,Ub={type:"class",value:"[0-9]",description:"[0-9]"},Vb=/^[ \t\r\n\f]/,Wb={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Xb={type:"other",description:"whitespace"},Yb=0,Zb=0,$b=[{line:1,column:1,seenCR:!1}],_b=0,ac=[],bc=0;if("startRule"in w){if(!(w.startRule in y))throw new Error("Can't start parsing from rule \""+w.startRule+'".');z=y[w.startRule]}if(v=z(),v!==x&&Yb===a.length)return v;throw v!==x&&Yb<a.length&&f({type:"end",description:"end of input"}),g(null,ac,_b<a.length?a.charAt(_b):null,_b<a.length?e(_b,_b+1):e(_b,_b))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],9:[function(a,b){"use strict";b.exports.literals=["and","of","after","before","sales","curtain","start","end","tier","ticket sales","minutes","minute","hours","hour","days","day","weeks","week","months","month","years","year"]},{}],10:[function(a,b){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(){return a.substring($,Z)}function d(b){var c,d,e=_[b];if(e)return e;for(c=b-1;!_[c];)c--;for(e=_[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return _[b]=e,e}function e(a,b){var c=d(a),e=d(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function f(a){ab>Z||(Z>ab&&(ab=Z,bb=[]),bb.push(a))}function g(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function h(){var a,b;return a=Z,b=i(),b!==t&&($=a,b=w(b)),a=b}function i(){var b,c,d,e,g,h,i,j,k,o,p;if(b=Z,a.substr(Z,8)===x?(c=x,Z+=8):(c=t,0===cb&&f(y)),c!==t){for(d=[],e=q();e!==t;)d.push(e),e=q();if(d!==t)if(e=n(),e!==t){for(g=[],h=q();h!==t;)g.push(h),h=q();if(g!==t)if(a.substr(Z,9)===z?(h=z,Z+=9):(h=t,0===cb&&f(A)),h!==t){for(i=[],j=q();j!==t;)i.push(j),j=q();if(i!==t){if(j=Z,a.substr(Z,6)===B?(k=B,Z+=6):(k=t,0===cb&&f(C)),k===t&&(a.substr(Z,5)===D?(k=D,Z+=5):(k=t,0===cb&&f(E)),k===t&&(a.substr(Z,3)===F?(k=F,Z+=3):(k=t,0===cb&&f(G)))),k!==t){for(o=[],p=q();p!==t;)o.push(p),p=q();o!==t?(p=l(),p!==t?(k=[k,o,p],j=k):(Z=j,j=t)):(Z=j,j=t)}else Z=j,j=t;if(j===t)if(j=Z,a.substr(Z,3)===F?(k=F,Z+=3):(k=t,0===cb&&f(G)),k!==t){for(o=[],p=q();p!==t;)o.push(p),p=q();o!==t?(p=m(),p!==t?(k=[k,o,p],j=k):(Z=j,j=t)):(Z=j,j=t)}else Z=j,j=t;j!==t?($=b,c=H(e,j),b=c):(Z=b,b=t)}else Z=b,b=t}else Z=b,b=t;else Z=b,b=t}else Z=b,b=t;else Z=b,b=t}else Z=b,b=t;return b}function j(){var b;return J.test(a.charAt(Z))?(b=a.charAt(Z),Z++):(b=t,0===cb&&f(K)),b}function k(){var a,b,c;if(a=Z,b=[],c=j(),c!==t)for(;c!==t;)b.push(c),c=j();else b=t;return b!==t&&($=a,b=I(b)),a=b}function l(){var a,b;return cb++,a=k(),cb--,a===t&&(b=t,0===cb&&f(L)),a}function m(){var a,b;return cb++,a=k(),cb--,a===t&&(b=t,0===cb&&f(M)),a}function n(){var b,c,d,e,g,h,i;if(cb++,b=Z,O.test(a.charAt(Z))?(c=a.charAt(Z),Z++):(c=t,0===cb&&f(P)),c===t&&(c=null),c!==t){for(d=Z,e=[],g=o();g!==t;)e.push(g),g=o();if(e!==t)if(46===a.charCodeAt(Z)?(g=Q,Z++):(g=t,0===cb&&f(R)),g!==t){if(h=[],i=o(),i!==t)for(;i!==t;)h.push(i),i=o();else h=t;h!==t?(e=[e,g,h],d=e):(Z=d,d=t)}else Z=d,d=t;else Z=d,d=t;if(d===t)if(d=[],e=o(),e!==t)for(;e!==t;)d.push(e),e=o();else d=t;d!==t?($=b,c=S(),b=c):(Z=b,b=t)}else Z=b,b=t;return cb--,b===t&&(c=t,0===cb&&f(N)),b}function o(){var b,c;return cb++,U.test(a.charAt(Z))?(b=a.charAt(Z),Z++):(b=t,0===cb&&f(V)),cb--,b===t&&(c=t,0===cb&&f(T)),b}function p(){var b,c;if(b=[],W.test(a.charAt(Z))?(c=a.charAt(Z),Z++):(c=t,0===cb&&f(X)),c!==t)for(;c!==t;)b.push(c),W.test(a.charAt(Z))?(c=a.charAt(Z),Z++):(c=t,0===cb&&f(X));else b=t;return b}function q(){var a,b;return cb++,a=p(),cb--,a===t&&(b=t,0===cb&&f(Y)),a}var r,s=arguments.length>1?arguments[1]:{},t={},u={start:h},v=h,w=function(a){return{filter:a}},x="only top",y={type:"literal",value:"only top",description:'"only top"'},z="by member",A={type:"literal",value:"by member",description:'"by member"'},B="points",C={type:"literal",value:"points",description:'"points"'},D="level",E={type:"literal",value:"level",description:'"level"'},F="tag",G={type:"literal",value:"tag",description:'"tag"'},H=function(a,b){return{quantity:a,type:b[0],code:b[2]}},I=function(a){return a.join("")},J=/^[_a-z0-9\-.]/i,K={type:"class",value:"[_a-z0-9-\\.]i",description:"[_a-z0-9-\\.]i"},L={type:"other",description:"levelCode"},M={type:"other",description:"tagCode"},N={type:"other",description:"number"},O=/^[+\-]/,P={type:"class",value:"[+-]",description:"[+-]"},Q=".",R={type:"literal",value:".",description:'"."'},S=function(){return parseFloat(c())},T={type:"other",description:"digit"},U=/^[0-9]/,V={type:"class",value:"[0-9]",description:"[0-9]"},W=/^[ \t\r\n\f]/,X={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},Y={type:"other",description:"whitespace"},Z=0,$=0,_=[{line:1,column:1,seenCR:!1}],ab=0,bb=[],cb=0;if("startRule"in s){if(!(s.startRule in u))throw new Error("Can't start parsing from rule \""+s.startRule+'".');v=u[s.startRule]}if(r=v(),r!==t&&Z===a.length)return r;throw r!==t&&Z<a.length&&f({type:"end",description:"end of input"}),g(null,bb,ab<a.length?a.charAt(ab):null,ab<a.length?e(ab,ab+1):e(ab,ab))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],11:[function(a,b){"use strict";b.exports.literals=["only top","by member","level","points"]},{}],12:[function(a,b){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(){return a.substring(od,nd)}function d(b){var c,d,e=pd[b];if(e)return e;for(c=b-1;!pd[c];)c--;for(e=pd[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return pd[b]=e,e}function e(a,b){var c=d(a),e=d(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function f(a){qd>nd||(nd>qd&&(qd=nd,rd=[]),rd.push(a))}function g(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function h(){var b,c,d,e,g,h,j,k;if(b=nd,c=i(),c!==P){for(d=[],e=nd,g=[],h=C();h!==P;)g.push(h),h=C();
if(g!==P)if(a.substr(nd,3)===S?(h=S,nd+=3):(h=P,0===sd&&f(T)),h!==P){for(j=[],k=C();k!==P;)j.push(k),k=C();j!==P?(k=i(),k!==P?(g=[g,h,j,k],e=g):(nd=e,e=P)):(nd=e,e=P)}else nd=e,e=P;else nd=e,e=P;for(;e!==P;){for(d.push(e),e=nd,g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(a.substr(nd,3)===S?(h=S,nd+=3):(h=P,0===sd&&f(T)),h!==P){for(j=[],k=C();k!==P;)j.push(k),k=C();j!==P?(k=i(),k!==P?(g=[g,h,j,k],e=g):(nd=e,e=P)):(nd=e,e=P)}else nd=e,e=P;else nd=e,e=P}if(d!==P){for(e=[],g=C();g!==P;)e.push(g),g=C();e!==P?(od=b,c=U(c,d),b=c):(nd=b,b=P)}else nd=b,b=P}else nd=b,b=P;return b}function i(){var b,c,d,e,g,h,i,m,n,p,q,r;if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,5)===X?(e=X,nd+=5):(e=P,0===sd&&f(Y)),e===P&&(a.substr(nd,6)===Z?(e=Z,nd+=6):(e=P,0===sd&&f($))),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(h=u(),h!==P){for(i=[],m=C();m!==P;)i.push(m),m=C();if(i!==P)if(a.substr(nd,2)===_?(m=_,nd+=2):(m=P,0===sd&&f(ab)),m===P&&(a.substr(nd,2)===bb?(m=bb,nd+=2):(m=P,0===sd&&f(cb)),m===P&&(61===a.charCodeAt(nd)?(m=db,nd++):(m=P,0===sd&&f(eb)),m===P&&(62===a.charCodeAt(nd)?(m=fb,nd++):(m=P,0===sd&&f(gb)),m===P&&(60===a.charCodeAt(nd)?(m=hb,nd++):(m=P,0===sd&&f(ib)))))),m!==P){for(n=[],p=C();p!==P;)n.push(p),p=C();n!==P?(p=z(),p!==P?(od=b,c=jb(c,e,h,m,p),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,3)===kb?(e=kb,nd+=3):(e=P,0===sd&&f(lb)),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(h=v(),h!==P){for(i=[],m=C();m!==P;)i.push(m),m=C();if(i!==P)if(a.substr(nd,2)===_?(m=_,nd+=2):(m=P,0===sd&&f(ab)),m===P&&(a.substr(nd,2)===bb?(m=bb,nd+=2):(m=P,0===sd&&f(cb)),m===P&&(61===a.charCodeAt(nd)?(m=db,nd++):(m=P,0===sd&&f(eb)),m===P&&(62===a.charCodeAt(nd)?(m=fb,nd++):(m=P,0===sd&&f(gb)),m===P&&(60===a.charCodeAt(nd)?(m=hb,nd++):(m=P,0===sd&&f(ib)))))),m!==P){for(n=[],p=C();p!==P;)n.push(p),p=C();n!==P?(p=z(),p!==P?(od=b,c=mb(c,e,h,m,p),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,7)===nb?(e=nb,nd+=7):(e=P,0===sd&&f(ob)),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(a.substr(nd,4)===pb?(h=pb,nd+=4):(h=P,0===sd&&f(qb)),h!==P){for(i=[],m=C();m!==P;)i.push(m),m=C();if(i!==P)if(m=z(),m!==P){for(n=[],p=C();p!==P;)n.push(p),p=C();n!==P?(p=l(),p!==P?(od=b,c=rb(c,h,m,p),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,7)===nb?(e=nb,nd+=7):(e=P,0===sd&&f(ob)),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(a.substr(nd,7)===sb?(h=sb,nd+=7):(h=P,0===sd&&f(tb)),h!==P){for(i=[],m=C();m!==P;)i.push(m),m=C();if(i!==P)if(m=K(),m!==P){for(n=[],p=C();p!==P;)n.push(p),p=C();n!==P?(p=K(),p!==P?(od=b,c=ub(c,h,m,p),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,4)===vb?(e=vb,nd+=4):(e=P,0===sd&&f(wb)),e===P&&(a.substr(nd,5)===xb?(e=xb,nd+=5):(e=P,0===sd&&f(yb)),e===P&&(a.substr(nd,3)===zb?(e=zb,nd+=3):(e=P,0===sd&&f(Ab)),e===P&&(a.substr(nd,7)===Bb?(e=Bb,nd+=7):(e=P,0===sd&&f(Cb))))),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(61===a.charCodeAt(nd)?(h=db,nd++):(h=P,0===sd&&f(eb)),h===P&&(a.substr(nd,2)===Db?(h=Db,nd+=2):(h=P,0===sd&&f(Eb))),h!==P){for(i=[],m=C();m!==P;)i.push(m),m=C();i!==P?(m=o(),m!==P?(od=b,c=Fb(c,e,h,m),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,7)===Gb?(e=Gb,nd+=7):(e=P,0===sd&&f(Hb)),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(h=w(),h!==P){for(i=[],m=nd,n=[],p=C();p!==P;)n.push(p),p=C();if(n!==P)if(44===a.charCodeAt(nd)?(p=Ib,nd++):(p=P,0===sd&&f(Jb)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=w(),r!==P?(n=[n,p,q,r],m=n):(nd=m,m=P)):(nd=m,m=P)}else nd=m,m=P;else nd=m,m=P;for(;m!==P;){for(i.push(m),m=nd,n=[],p=C();p!==P;)n.push(p),p=C();if(n!==P)if(44===a.charCodeAt(nd)?(p=Ib,nd++):(p=P,0===sd&&f(Jb)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=w(),r!==P?(n=[n,p,q,r],m=n):(nd=m,m=P)):(nd=m,m=P)}else nd=m,m=P;else nd=m,m=P}i!==P?(od=b,c=Kb(c,h,i),b=c):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,6)===V?(c=V,nd+=6):(c=P,0===sd&&f(W)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,20)===Lb?(e=Lb,nd+=20):(e=P,0===sd&&f(Mb)),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P)if(h=x(),h!==P){for(i=[],m=C();m!==P;)i.push(m),m=C();if(i!==P){if(m=[],n=nd,44===a.charCodeAt(nd)?(p=Ib,nd++):(p=P,0===sd&&f(Jb)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=x(),r!==P?(p=[p,q,r],n=p):(nd=n,n=P)):(nd=n,n=P)}else nd=n,n=P;for(;n!==P;)if(m.push(n),n=nd,44===a.charCodeAt(nd)?(p=Ib,nd++):(p=P,0===sd&&f(Jb)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=x(),r!==P?(p=[p,q,r],n=p):(nd=n,n=P)):(nd=n,n=P)}else nd=n,n=P;m!==P?(od=b,c=Nb(c,h,m),b=c):(nd=b,b=P)}else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P){if(b=nd,a.substr(nd,9)===Ob?(c=Ob,nd+=9):(c=P,0===sd&&f(Pb)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(e=s(),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P){if(h=nd,a.substr(nd,4)===Qb?(i=Qb,nd+=4):(i=P,0===sd&&f(Rb)),i!==P){for(m=[],n=C();n!==P;)m.push(n),n=C();m!==P?(n=k(),n!==P?(i=[i,m,n],h=i):(nd=h,h=P)):(nd=h,h=P)}else nd=h,h=P;if(h===P&&(h=null),h!==P){for(i=[],m=nd,n=[],p=C();p!==P;)n.push(p),p=C();if(n!==P)if(a.substr(nd,3)===S?(p=S,nd+=3):(p=P,0===sd&&f(T)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=k(),r!==P?(n=[n,p,q,r],m=n):(nd=m,m=P)):(nd=m,m=P)}else nd=m,m=P;else nd=m,m=P;for(;m!==P;){for(i.push(m),m=nd,n=[],p=C();p!==P;)n.push(p),p=C();if(n!==P)if(a.substr(nd,3)===S?(p=S,nd+=3):(p=P,0===sd&&f(T)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=k(),r!==P?(n=[n,p,q,r],m=n):(nd=m,m=P)):(nd=m,m=P)}else nd=m,m=P;else nd=m,m=P}i!==P?(od=b,c=Sb(c,e,h,i),b=c):(nd=b,b=P)}else nd=b,b=P}else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;if(b===P)if(b=nd,a.substr(nd,6)===Tb?(c=Tb,nd+=6):(c=P,0===sd&&f(Ub)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(e=t(),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();if(g!==P){if(h=nd,a.substr(nd,4)===Qb?(i=Qb,nd+=4):(i=P,0===sd&&f(Rb)),i!==P){for(m=[],n=C();n!==P;)m.push(n),n=C();m!==P?(n=k(),n!==P?(i=[i,m,n],h=i):(nd=h,h=P)):(nd=h,h=P)}else nd=h,h=P;if(h===P&&(h=null),h!==P){for(i=[],m=nd,n=[],p=C();p!==P;)n.push(p),p=C();if(n!==P)if(a.substr(nd,3)===S?(p=S,nd+=3):(p=P,0===sd&&f(T)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=k(),r!==P?(n=[n,p,q,r],m=n):(nd=m,m=P)):(nd=m,m=P)}else nd=m,m=P;else nd=m,m=P;for(;m!==P;){for(i.push(m),m=nd,n=[],p=C();p!==P;)n.push(p),p=C();if(n!==P)if(a.substr(nd,3)===S?(p=S,nd+=3):(p=P,0===sd&&f(T)),p!==P){for(q=[],r=C();r!==P;)q.push(r),r=C();q!==P?(r=k(),r!==P?(n=[n,p,q,r],m=n):(nd=m,m=P)):(nd=m,m=P)}else nd=m,m=P;else nd=m,m=P}if(i!==P){for(m=[],n=nd,p=[],q=C();q!==P;)p.push(q),q=C();for(p!==P?(q=j(),q!==P?(p=[p,q],n=p):(nd=n,n=P)):(nd=n,n=P);n!==P;){for(m.push(n),n=nd,p=[],q=C();q!==P;)p.push(q),q=C();p!==P?(q=j(),q!==P?(p=[p,q],n=p):(nd=n,n=P)):(nd=n,n=P)}m!==P?(od=b,c=Vb(c,e,h,i,m),b=c):(nd=b,b=P)}else nd=b,b=P}else nd=b,b=P}else nd=b,b=P}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P}}}}}}}return b}function j(){var b,c,d,e,g,h,i,j,k,l;if(b=nd,a.substr(nd,7)===Gb?(c=Gb,nd+=7):(c=P,0===sd&&f(Hb)),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(e=w(),e!==P){for(g=[],h=nd,i=[],j=C();j!==P;)i.push(j),j=C();if(i!==P)if(44===a.charCodeAt(nd)?(j=Ib,nd++):(j=P,0===sd&&f(Jb)),j!==P){for(k=[],l=C();l!==P;)k.push(l),l=C();k!==P?(l=w(),l!==P?(i=[i,j,k,l],h=i):(nd=h,h=P)):(nd=h,h=P)}else nd=h,h=P;else nd=h,h=P;for(;h!==P;){for(g.push(h),h=nd,i=[],j=C();j!==P;)i.push(j),j=C();if(i!==P)if(44===a.charCodeAt(nd)?(j=Ib,nd++):(j=P,0===sd&&f(Jb)),j!==P){for(k=[],l=C();l!==P;)k.push(l),l=C();k!==P?(l=w(),l!==P?(i=[i,j,k,l],h=i):(nd=h,h=P)):(nd=h,h=P)}else nd=h,h=P;else nd=h,h=P}g!==P?(od=b,c=Wb(e,g),b=c):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;return b}function k(){var b,c,d,e,g,h;if(b=nd,c=y(),c!==P){for(d=[],e=C();e!==P;)d.push(e),e=C();if(d!==P)if(a.substr(nd,2)===_?(e=_,nd+=2):(e=P,0===sd&&f(ab)),e===P&&(a.substr(nd,2)===bb?(e=bb,nd+=2):(e=P,0===sd&&f(cb)),e===P&&(61===a.charCodeAt(nd)?(e=db,nd++):(e=P,0===sd&&f(eb)),e===P&&(62===a.charCodeAt(nd)?(e=fb,nd++):(e=P,0===sd&&f(gb)),e===P&&(60===a.charCodeAt(nd)?(e=hb,nd++):(e=P,0===sd&&f(ib)))))),e!==P){for(g=[],h=C();h!==P;)g.push(h),h=C();g!==P?(h=p(),h!==P?(od=b,c=Xb(c,e,h),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P}else nd=b,b=P;return b}function l(){var b,c;return b=nd,a.substr(nd,7)===Yb?(c=Yb,nd+=7):(c=P,0===sd&&f(Zb)),c===P&&(a.substr(nd,6)===$b?(c=$b,nd+=6):(c=P,0===sd&&f(_b)),c===P&&(a.substr(nd,5)===ac?(c=ac,nd+=5):(c=P,0===sd&&f(bc)),c===P&&(a.substr(nd,4)===cc?(c=cc,nd+=4):(c=P,0===sd&&f(dc)),c===P&&(a.substr(nd,4)===ec?(c=ec,nd+=4):(c=P,0===sd&&f(fc)),c===P&&(a.substr(nd,3)===gc?(c=gc,nd+=3):(c=P,0===sd&&f(hc)),c===P&&(a.substr(nd,5)===ic?(c=ic,nd+=5):(c=P,0===sd&&f(jc)),c===P&&(a.substr(nd,4)===kc?(c=kc,nd+=4):(c=P,0===sd&&f(lc)),c===P&&(a.substr(nd,6)===mc?(c=mc,nd+=6):(c=P,0===sd&&f(nc)),c===P&&(a.substr(nd,5)===oc?(c=oc,nd+=5):(c=P,0===sd&&f(pc)),c===P&&(a.substr(nd,5)===qc?(c=qc,nd+=5):(c=P,0===sd&&f(rc)),c===P&&(a.substr(nd,4)===sc?(c=sc,nd+=4):(c=P,0===sd&&f(tc))))))))))))),c!==P&&(od=b,c=uc(c)),b=c}function m(){var b,c,d,e;if(b=nd,34===a.charCodeAt(nd)?(c=vc,nd++):(c=P,0===sd&&f(wc)),c!==P){for(d=[],xc.test(a.charAt(nd))?(e=a.charAt(nd),nd++):(e=P,0===sd&&f(yc)),e===P&&(92===a.charCodeAt(nd)?(e=zc,nd++):(e=P,0===sd&&f(Ac)));e!==P;)d.push(e),xc.test(a.charAt(nd))?(e=a.charAt(nd),nd++):(e=P,0===sd&&f(yc)),e===P&&(92===a.charCodeAt(nd)?(e=zc,nd++):(e=P,0===sd&&f(Ac)));d!==P?(34===a.charCodeAt(nd)?(e=vc,nd++):(e=P,0===sd&&f(wc)),e!==P?(od=b,c=Bc(d),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;return b}function n(){var b,c,d,e;if(b=nd,39===a.charCodeAt(nd)?(c=Cc,nd++):(c=P,0===sd&&f(Dc)),c!==P){for(d=[],Ec.test(a.charAt(nd))?(e=a.charAt(nd),nd++):(e=P,0===sd&&f(Fc)),e===P&&(92===a.charCodeAt(nd)?(e=zc,nd++):(e=P,0===sd&&f(Ac)));e!==P;)d.push(e),Ec.test(a.charAt(nd))?(e=a.charAt(nd),nd++):(e=P,0===sd&&f(Fc)),e===P&&(92===a.charCodeAt(nd)?(e=zc,nd++):(e=P,0===sd&&f(Ac)));d!==P?(39===a.charCodeAt(nd)?(e=Cc,nd++):(e=P,0===sd&&f(Dc)),e!==P?(od=b,c=Bc(d),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;return b}function o(){var a;return a=m(),a===P&&(a=n()),a}function p(){var a;return a=o(),a===P&&(a=z()),a}function o(){var a;return a=m(),a===P&&(a=n()),a}function q(){var b;return Gc.test(a.charAt(nd))?(b=a.charAt(nd),nd++):(b=P,0===sd&&f(Hc)),b}function r(){var a,b,c;if(a=nd,b=[],c=q(),c!==P)for(;c!==P;)b.push(c),c=q();else b=P;return b!==P&&(od=a,b=Bc(b)),a=b}function s(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Ic)),a}function t(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Jc)),a}function u(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Kc)),a}function v(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Lc)),a}function w(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Mc)),a}function x(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Nc)),a}function y(){var a,b;return sd++,a=r(),sd--,a===P&&(b=P,0===sd&&f(Oc)),a}function z(){var b,c,d,e,g,h,i;if(sd++,b=nd,Qc.test(a.charAt(nd))?(c=a.charAt(nd),nd++):(c=P,0===sd&&f(Rc)),c===P&&(c=null),c!==P){for(d=nd,e=[],g=A();g!==P;)e.push(g),g=A();if(e!==P)if(46===a.charCodeAt(nd)?(g=Sc,nd++):(g=P,0===sd&&f(Tc)),g!==P){if(h=[],i=A(),i!==P)for(;i!==P;)h.push(i),i=A();else h=P;h!==P?(e=[e,g,h],d=e):(nd=d,d=P)}else nd=d,d=P;else nd=d,d=P;if(d===P)if(d=[],e=A(),e!==P)for(;e!==P;)d.push(e),e=A();else d=P;d!==P?(od=b,c=Uc(),b=c):(nd=b,b=P)}else nd=b,b=P;return sd--,b===P&&(c=P,0===sd&&f(Pc)),b}function A(){var b,c;return sd++,Wc.test(a.charAt(nd))?(b=a.charAt(nd),nd++):(b=P,0===sd&&f(Xc)),sd--,b===P&&(c=P,0===sd&&f(Vc)),b}function B(){var b,c;if(b=[],Yc.test(a.charAt(nd))?(c=a.charAt(nd),nd++):(c=P,0===sd&&f(Zc)),c!==P)for(;c!==P;)b.push(c),Yc.test(a.charAt(nd))?(c=a.charAt(nd),nd++):(c=P,0===sd&&f(Zc));else b=P;return b}function C(){var a,b;return sd++,a=B(),sd--,a===P&&(b=P,0===sd&&f($c)),a}function D(){var b,c,d,e,g,h;return sd++,b=nd,c=nd,d=A(),d!==P?(e=A(),e!==P?(g=A(),g!==P?(h=A(),h!==P?(d=[d,e,g,h],c=d):(nd=c,c=P)):(nd=c,c=P)):(nd=c,c=P)):(nd=c,c=P),b=c!==P?a.substring(b,nd):c,sd--,b===P&&(c=P,0===sd&&f(_c)),b}function E(){var b,c,d,e;return sd++,b=nd,c=nd,d=A(),d!==P?(e=A(),e!==P?(d=[d,e],c=d):(nd=c,c=P)):(nd=c,c=P),b=c!==P?a.substring(b,nd):c,sd--,b===P&&(c=P,0===sd&&f(ad)),b}function F(){var b,c,d,e;return sd++,b=nd,c=nd,d=A(),d!==P?(e=A(),e!==P?(d=[d,e],c=d):(nd=c,c=P)):(nd=c,c=P),b=c!==P?a.substring(b,nd):c,sd--,b===P&&(c=P,0===sd&&f(bd)),b}function G(){var b,c,d,e;return sd++,b=nd,c=nd,d=A(),d!==P?(e=A(),e!==P?(d=[d,e],c=d):(nd=c,c=P)):(nd=c,c=P),b=c!==P?a.substring(b,nd):c,sd--,b===P&&(c=P,0===sd&&f(cd)),b}function H(){var b,c,d,e;return sd++,b=nd,c=nd,d=A(),d!==P?(e=A(),e!==P?(d=[d,e],c=d):(nd=c,c=P)):(nd=c,c=P),b=c!==P?a.substring(b,nd):c,sd--,b===P&&(c=P,0===sd&&f(dd)),b}function I(){var b,c,d,e;return sd++,b=nd,c=nd,d=A(),d!==P?(e=A(),e!==P?(d=[d,e],c=d):(nd=c,c=P)):(nd=c,c=P),b=c!==P?a.substring(b,nd):c,sd--,b===P&&(c=P,0===sd&&f(ed)),b}function J(){var b,c,d,e,g,h,i;return sd++,b=nd,c=G(),c!==P?(58===a.charCodeAt(nd)?(d=gd,nd++):(d=P,0===sd&&f(hd)),d!==P?(e=H(),e!==P?(g=nd,58===a.charCodeAt(nd)?(h=gd,nd++):(h=P,0===sd&&f(hd)),h!==P?(i=I(),i!==P?(h=[h,i],g=h):(nd=g,g=P)):(nd=g,g=P),g===P&&(g=null),g!==P?(od=b,c=id(c,e,g),b=c):(nd=b,b=P)):(nd=b,b=P)):(nd=b,b=P)):(nd=b,b=P),sd--,b===P&&(c=P,0===sd&&f(fd)),b}function K(){var b,c,d,e,g,h,i,j;if(sd++,b=nd,c=D(),c!==P)if(45===a.charCodeAt(nd)?(d=kd,nd++):(d=P,0===sd&&f(ld)),d!==P)if(e=E(),e!==P)if(45===a.charCodeAt(nd)?(g=kd,nd++):(g=P,0===sd&&f(ld)),g!==P)if(h=F(),h!==P){for(i=[],j=C();j!==P;)i.push(j),j=C();i!==P?(j=J(),j===P&&(j=null),j!==P?(od=b,c=md(c,e,h,j),b=c):(nd=b,b=P)):(nd=b,b=P)}else nd=b,b=P;else nd=b,b=P;else nd=b,b=P;else nd=b,b=P;else nd=b,b=P;return sd--,b===P&&(c=P,0===sd&&f(jd)),b}function L(a,b){var c,d=[];for(c=0;c<a.length;c++)null!==a[c][b]&&d.push(a[c][b]);return d}function M(a,b,c){return(null!==a?[a]:[]).concat(L(b,c))}var N,O=arguments.length>1?arguments[1]:{},P={},Q={start:h},R=h,S="and",T={type:"literal",value:"and",description:'"and"'},U=function(a,b){return{conditions:M(a,b,3)}},V="member",W={type:"literal",value:"member",description:'"member"'},X="level",Y={type:"literal",value:"level",description:'"level"'},Z="points",$={type:"literal",value:"points",description:'"points"'},_=">=",ab={type:"literal",value:">=",description:'">="'},bb="<=",cb={type:"literal",value:"<=",description:'"<="'},db="=",eb={type:"literal",value:"=",description:'"="'},fb=">",gb={type:"literal",value:">",description:'">"'},hb="<",ib={type:"literal",value:"<",description:'"<"'},jb=function(a,b,c,d,e){return{scope:"member",sub_scope:b,code:c,operator:d,value:e}},kb="tag",lb={type:"literal",value:"tag",description:'"tag"'},mb=function(a,b,c,d,e){return{scope:"member",sub_scope:b,code:c,operator:d,value:e}},nb="created",ob={type:"literal",value:"created",description:'"created"'},pb="last",qb={type:"literal",value:"last",description:'"last"'},rb=function(a,b,c,d){return{scope:"member",sub_scope:"created",condition:b,quantity:c,timeframe:d}},sb="between",tb={type:"literal",value:"between",description:'"between"'},ub=function(a,b,c,d){return{scope:"member",sub_scope:"created",condition:b,date1:c,date2:d}},vb="city",wb={type:"literal",value:"city",description:'"city"'},xb="state",yb={type:"literal",value:"state",description:'"state"'},zb="zip",Ab={type:"literal",value:"zip",description:'"zip"'},Bb="country",Cb={type:"literal",value:"country",description:'"country"'},Db="!=",Eb={type:"literal",value:"!=",description:'"!="'},Fb=function(a,b,c,d){return{scope:"member",sub_scope:b,operator:c,value:d}},Gb="in zone",Hb={type:"literal",value:"in zone",description:'"in zone"'},Ib=",",Jb={type:"literal",value:",",description:'","'},Kb=function(a,b,c){return{scope:"member",sub_scope:"zone",codes:M(b,c,3)}},Lb="belongs to smartlist",Mb={type:"literal",value:"belongs to smartlist",description:'"belongs to smartlist"'},Nb=function(a,b,c){return{scope:"smartlist",codes:M(b,c,2)}},Ob="challenge",Pb={type:"literal",value:"challenge",description:'"challenge"'},Qb="with",Rb={type:"literal",value:"with",description:'"with"'},Sb=function(a,b,c,d){return{scope:"challenge",code:b,conditions:M(c?c[2]:null,d,3)}},Tb="action",Ub={type:"literal",value:"action",description:'"action"'},Vb=function(a,b,c,d,e){return{scope:"action",code:b,conditions:M(c?c[2]:null,d,3),filters:M(null,e,1)}},Wb=function(a,b){return{type:"zone",zones:M(a,b,3)}},Xb=function(a,b,c){return{name:a,operator:b,value:c}},Yb="minutes",Zb={type:"literal",value:"minutes",description:'"minutes"'},$b="minute",_b={type:"literal",value:"minute",description:'"minute"'},ac="hours",bc={type:"literal",value:"hours",description:'"hours"'},cc="hour",dc={type:"literal",value:"hour",description:'"hour"'},ec="days",fc={type:"literal",value:"days",description:'"days"'},gc="day",hc={type:"literal",value:"day",description:'"day"'},ic="weeks",jc={type:"literal",value:"weeks",description:'"weeks"'},kc="week",lc={type:"literal",value:"week",description:'"week"'},mc="months",nc={type:"literal",value:"months",description:'"months"'},oc="month",pc={type:"literal",value:"month",description:'"month"'},qc="years",rc={type:"literal",value:"years",description:'"years"'},sc="year",tc={type:"literal",value:"year",description:'"year"'},uc=function(a){return a.replace(/s/g,"")},vc='"',wc={type:"literal",value:'"',description:'"\\""'},xc=/^[^\n\r\f\\"]/,yc={type:"class",value:'[^\\n\\r\\f\\\\"]',description:'[^\\n\\r\\f\\\\"]'},zc="\\",Ac={type:"literal",value:"\\",description:'"\\\\"'},Bc=function(a){return a.join("")},Cc="'",Dc={type:"literal",value:"'",description:'"\'"'},Ec=/^[^\n\r\f\\']/,Fc={type:"class",value:"[^\\n\\r\\f\\\\']",description:"[^\\n\\r\\f\\\\']"},Gc=/^[_a-z0-9\-.]/i,Hc={type:"class",value:"[_a-z0-9-\\.]i",description:"[_a-z0-9-\\.]i"},Ic={type:"other",description:"challengeCode"},Jc={type:"other",description:"actionCode"},Kc={type:"other",description:"levelCode"},Lc={type:"other",description:"tagCode"},Mc={type:"other",description:"zoneCode"},Nc={type:"other",description:"smartlistCode"},Oc={type:"other",description:"attributeName"},Pc={type:"other",description:"number"},Qc=/^[+\-]/,Rc={type:"class",value:"[+-]",description:"[+-]"},Sc=".",Tc={type:"literal",value:".",description:'"."'},Uc=function(){return parseFloat(c())},Vc={type:"other",description:"digit"},Wc=/^[0-9]/,Xc={type:"class",value:"[0-9]",description:"[0-9]"},Yc=/^[ \t\r\n\f]/,Zc={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},$c={type:"other",description:"whitespace"},_c={type:"other",description:"year"},ad={type:"other",description:"month"},bd={type:"other",description:"day"},cd={type:"other",description:"hour"},dd={type:"other",description:"minute"},ed={type:"other",description:"second"},fd={type:"other",description:"time"},gd=":",hd={type:"literal",value:":",description:'":"'},id=function(a,b,c){return{hour:a,minute:b,second:"00"|c}},jd={type:"other",description:"datetime"},kd="-",ld={type:"literal",value:"-",description:'"-"'},md=function(a,b,c,d){return d?a+"-"+b+"-"+c+"T"+d.hour+":"+d.minute+":"+d.second:a+"-"+b+"-"+c},nd=0,od=0,pd=[{line:1,column:1,seenCR:!1}],qd=0,rd=[],sd=0;if("startRule"in O){if(!(O.startRule in Q))throw new Error("Can't start parsing from rule \""+O.startRule+'".');R=Q[O.startRule]}if(N=R(),N!==P&&nd===a.length)return N;throw N!==P&&nd<a.length&&f({type:"end",description:"end of input"}),g(null,rd,qd<a.length?a.charAt(qd):null,qd<a.length?e(qd,qd+1):e(qd,qd))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],13:[function(a,b){"use strict";b.exports.literals=["and","member","segment","level","points","tag","created","last","between","city","state","zip","country","challenge","with","action","only top","by member","minutes","minute","hours","hour","days","day","weeks","week","months","month","year","years","in zone","for"]},{}]},{},[1])(1)});
//# sourceMappingURL=fidem-dsl.min.js.map